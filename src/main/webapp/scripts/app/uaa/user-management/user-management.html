<div>
    <h2>Users</h2>
    <!-- <jh-alert></jh-alert> -->
    <div class="container">
        <div class="row">
          <div class="col-md-4">
              <button class="btn btn-primary" ui-sref="user-management.new">
                  <span class="glyphicon glyphicon-flash"></span> <span>Create a new User</span>
              </button>
              <button class="btn btn-success" ui-sref="user-management.invite">
                  <span class="glyphicon glyphicon-flash"></span> <span>Invite users</span>
              </button>
          </div>
          <div class="col-md-4 input-group">
              <input type="text" class="form-control" placeholder="id, name, or email"
                  ng-model="search">
              <span class="input-group-btn">
                  <button class="btn btn-default" type="button"
                      ng-click="loadPage()">
                      <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                  </button>
              </span>
          </div>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
            <tr>
                <th>ID</th>
                <th>Name<br>Given/Family</th>
                <th>Email</th>
                <th></th>
                <th>Previous/Last<br>LogonTime</th>
                <th>Password<br>LastModified</th>
                <th>Created<br>LastModified</th>
                <th>ZoneId</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="user in users track by user.id" rowspan="2">
                <td>
                    <a ui-sref="user-management-detail({id:user.id})">
                        {{user.id | limitTo:8}}
                    </a>
                </td>
                <td>
                    {{user.userName}}
                    <br><br>
                    {{user.name.givenName}} {{user.name.familyName}}
                </td>
                <td>
                    <span ng-repeat="e in user.emails"
                        style="cursor: pointer;">{{e.value}}</span>
                </td>
                <td>
                    <span class="label label-danger" style="cursor: pointer;"
                        ng-click="setActive(user, true)" 
                        ng-show="!user.active">Desactivated</span>
                    <span class="label label-success" style="cursor: pointer;"
                        ng-click="setActive(user, false)" 
                        ng-show="user.active">Activated</span>
                    <br><br>
                    <span class="label label-danger" 
                        ng-show="!user.verified">Desverified</span>
                    <span class="label label-success" 
                        ng-show="user.verified">Verified</span>
                </td>

                <td>
                    {{user.previousLogonTime | date:'dd/MM/yy HH:mm'}} 
                    <br><br>
                    {{user.lastLogonTime | date:'dd/MM/yy HH:mm'}}
                </td>
                <td>{{user.passwordLastModified | date:'dd/MM/yy HH:mm'}}</td>
                <td>
                    {{user.meta.created | date:'dd/MM/yy HH:mm'}}
                    <br><br>
                    {{user.meta.lastModified | date:'dd/MM/yy HH:mm'}}
                </td>
                <td>
                    <a ui-sref="zone-management-detail({id:user.zoneId})">
                        {{user.zoneId | limitTo:8}}
                    </a>
                </td>

                <td class="text-right">
                    <button type="submit"
                            ui-sref="user-management-detail({id:user.id})"
                            class="btn btn-info btn-sm">
                        <span class="glyphicon glyphicon-eye-open"></span>
                    </button>
                    <button type="submit"
                            ui-sref="user-management.edit({id:user.id})"
                            class="btn btn-primary btn-sm">
                        <span class="glyphicon glyphicon-pencil"></span>
                    </button>
                    <button type="submit"
                            ui-sref="user-management.delete({id:user.id})"
                            class="btn btn-danger btn-sm">
                        <span class="glyphicon glyphicon-remove-circle"></span>
                    </button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="text-center">
        <ul uib-pagination class="pagination-sm" total-items="pageTotal" items-per-page="pageSize"
            ng-model="pageNumber" ng-change="loadPage()"></ul>
    </div>
</div>
