{"version":3,"sources":["scripts/app.js"],"names":["angular","module","run","$rootScope","$location","$window","$http","$state","$interval","ENV","VERSION","STATHAT","moment","AlertService","icu","_StatHat","push","bootstrap","$on","event","toState","toParams","fromState","fromParams","toStateParams","hash","utcOffset","day","hour","error","titleKey","isUndefined","data","previous","previousStateName","name","previousStateParams","isDefined","pageTitle","document","title","back","get","go","config","$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider","httpRequestInterceptorCacheBusterProvider","AlertServiceProvider","setMatchlist","otherwise","rule","$injector","path","normalized","toLowerCase","state","abstract","views","navbar@","templateUrl","controller","interceptors","$urlMatcherFactory","type","decode","val","encode","equals","a","b","this","is","indexOf","pattern","constant","token","grant","value","template","description","version","debug","url","clientId","username","loginType","authUrlPath","authRedirectUrl","authWindowType","authWindowParam","sessionCheckUrl","factory","localStorageService","SETTING","set","setting","merge","$q","$filter","UserInfo","_identity","_token","_zone","_authenticated","_uaaLogin","that","isIdentityResolved","isAuthenticated","isUAALogin","isClient","grant_type","isRedirect","isSwitchingZone","zid","id","canSwitchingZone","zoneId","scope","length","userName","identity","then","_id","user_name","err","hasScope","hasAnyScope","scopes","i","hasAuthority","authority","aud","hasAnyAuthority","authorities","uaaLogin","flag","authenticate","client_id","zone","force","deferred","defer","undefined","resolve","$promise","info","reject","catch","promise","access_token","console","log","expiredAt","Date","setSeconds","getSeconds","expires_in","expires_at","getTime","remove","parseJwt","base64","split","replace","fromJson","atob","hasValidToken","getJwt","header","payload","signature","jwt","json","decodeURIComponent","escape","isSupportRefresh","refresh_token","Zone","_current","_uaa","now","changeZone","isUAA","current","change","reset","GuessSearch","_load","_selected","_filters","_anys","getAfterMomentName","context","fromNow","getBeforeMomentName","getISOMoment","toISOString","getTextMoment","text","getText","init","load","selected","attributes","configs","any","_moments","_urls","_emails","email","_enums","index","array","isArray","enum","_sorts","sort","_configs","support","group","icon","field","operator","_moment_datas","forEach","attribute","after","tags","before","_url_datas","item","_email_datas","_enum_datas","e","concat","_sort_datas","ascending","descending","search","guess","tagging","filters","filtering","and","select","filter","ps","p","join","isString","sortBy","sortOrder","orders","refreshing","searching","usingText","$resource","method","alert","query","save","update","headers","if-match","meta","delete","Authorization","transformRequest","toJson","verify","invite","transformResponse","list","check","add","User","items","USER","resourceName","getName","user","GROUP","displayName","member","entity","result","res","status","allowedproviders","Base64","code","credentials","encodeURIComponent","password","post","Content-Type","Accept","clientSecret","userList","params","action","target","userRevoke","clientList","clientRevoke","userClientRevoke","target2","revoke","verification","Info","Healthz","_info","_healthy","isHealthy","healthz","Setting","refresh","client","passcode","authorization_code","redirect_uri","start_implicit","$scope","response_type","uaa_auth_url","auth_url","authWindow","open","listener","$root","_data","origin","end_data","close","start_authorization_code","get_redirect_data","stateParams","urlParams","searchParams","URL","location","href","arrayParams","Array","from","entries","n","param","end_redirect","$stateParams","error_description","operer","$emit","parseInt","uaa","start_logout","uaa_logout_url","start_autologin","uaa_login_url","start_passcode","uaa_passcode_url","start_session","messageOrigin","uaa_url","msg","userId","sender","postMessage","cancel","directive","watchInvalidAndDirty","$inputs","$watchers","$toggle","each","$input","$","watch","$watch","hasClass","isInvalid","toggleClass","watchForm","element","watchers","find","$formGroup","watcherInline","inputs","watcher","$formInline","$inline","warchFormInline","restrict","require","link","isFunction","iElement","attr","strength","colors","mesureStrength","_force","_flags","test","_passedMatches","grep","el","Math","min","getColor","s","idx","col","passwordToCheck","c","removeClass","children","css","background","slice","uibPagerConfig","itemsPerPage","previousText","nextText","uibPaginationConfig","maxSize","boundaryLinks","firstText","lastText","attrs","clazz","activeLink","substring","newPath","addClass","Principal","TokenHolder","ZoneHolder","inProduction","isZoneMode","parent","file","reader","FileReader","onload","ev","content","readAsText","readFile","on","files","transclude","ngModel","fileInput","$render","$setViewValue","click","request","responseError","response","removeIfError","subdomain","input","chars","breakOnWord","isNaN","charAt","substr","lastspace","lastIndexOf","words","inputWords","service","keyStr","chr1","chr2","enc1","enc2","enc3","output","chr3","enc4","charCodeAt","String","fromCharCode","key","JSON","parse","localStorage","getItem","setItem","stringify","removeItem","clearAll","clear","toUpperCase","provider","toast","$get","$timeout","$sce","exports","alertOptions","trustAsHtml","alertId","timeout","position","scoped","alerts","closeAlert","isToast","extAlerts","thisAlerts","closeAlertByIndex","map","splice","success","warning","showAsToast","error_alerts","cleanHttpErrorListener","httpResponse","stopPropagation","addErrorAlert","errorHeader","entityKey","entityName","fieldErrors","fieldError","convertedField","fieldName","message","Error","parts","links","section","trim","queryString","RegExp","$0","$1","$2","$3","page","convertLocaleDateToServer","date","convertLocaleDateFromServer","dateString","convertDateTimeFromServer","byteSize","base64String","endsWith","suffix","str","toString","abbreviate","predicate","callback","$apply","applyClass","allThIcons","sortIcon","sortAsc","sortDesc","thisIcon","parentCtrl","bind","jhSortBy","addItem","listOrMap","deleItem","hasItem","toggleItem","suppressDeprecationWarnings","conversion","copy","isValid","datas","onEnter","$uibModal","size","reload","$uibModalInstance","count","isSaving","dismiss","goingDebug","login","token_type","id_token","content@","TokenServerProvider","errorMessage","SSOServerProvider","goPasscode","pastePasscode","navigator","clipboard","readText","absUrl","AutoLogin","removeToken","isRefresh","refreshToken","isSSO","logoutUaa","sso","loginUaa","checkUaaSSO","user_id","sjcl","sha256","window","codec","hex","fromBits","UserPassword","Passcode","userInfo","changePassword","oldPassword","getPasscode","serverInfo","Client","zones","loadAll","setActive","isActivated","active","$resolved","canChangeZone","editForm","$setPristine","$setUntouched","Group","ZONE_SCOPES","isAllowSwitching","exitZoneMode","ui","groups","hasGroup","has","toggleGroup","resources","MFAProvider","IdentityProvider","SetUtils","HTTP_METHIDS","HTTP_HEADERS","onSaveSuccess","onSaveError","save_processors","branding","Object","keys","consent","productLogo","imageModelToBase64","branding_productLogo","squareLogo","branding_squareLogo","banner","logo","branding_banner_logo","processor","time_units","S","to","original","M","H","D","changeUnit","object","unit","units","last_unit","assignmentUnit","http","methods","base64ToImageModel","model","format","fileToImageModel","default","readAsDataURL","activeTab","num","changeKey","samlConfig","activeKeyId","providers","mfa","initRawConfig","configChange","init_processors","tokenPolicy","tokenPolicy_accessTokenValidity","accessTokenValidity","tokenPolicy_refreshTokenValidity","refreshTokenValidity","clientSecretPolicy","corsPolicy","defaultConfiguration","allowedHeaders","allowedMethods","allowedOriginPatterns","allowedOrigins","allowedUriPatterns","allowedUris","xhrConfiguration","prompts","logout","whitelist","selfService","footerLinks","responseType","onloadend","mfaConfig","identityProviders","userConfig","defaultGroups","other","confirmDelete","confirmChange","ClientMeta","Search","GRANTS","GROUPS","grants","apps","loadAllApp","app","appIcon","appIconUrl","clients","pageTotal","pageNumber","pageSize","loadPage","startIndex","totalResults","getScopeLabel","autoapprove","getScopeIcon","getScopeTipIndex","goGroupListOrDetail","wild","goIdentityProviderDetail","originKey","pagging","ClientSecret","isMe","changeSecret","secret","old_secret","ZoneClient","RESOURCE_IDS","resourceIds","authorized_grant_types","resource_ids","required_user_groups","imageUrl","imageFormat","imageIsLoaded","flashIcon","disable","appLaunchUrl","showOnHomePage","Member","MemberType","members","selectItem","node","$event","reflashChildItem","nochild","expandItem","show","gid","isInDirect","reflashParentType","parents","mapping_node","group_members","nodeMember","findOldMember","returnEntities","nodes","createNode","memberOrGroup","display","findNode","findInRoot","findInAll","mappingNode","results","shift","node_child","findInUser","promises","all","UserInvite","new_invites","failed_invites","new_invite","invites","done","addInvite","deleInvite","body","emails","copyText","UserStatus","UserVerify","UserVerifyLink","UserMFARegistration","Password","Email","old_password","resetPassword","useCodeFlow","new_password","changeEmail","deleteMFA","unlockAccount","locked","expirePassword","passwordChangeRequired","verify_link","verifyUser","verifyLink","phoneNumbers","primary","verified","approvals","users","valueOf","paths","reflash","root","createPath","unshift","father","member_nodes","member_node","old","actionItems","searchUserItems","searchGroupItems","searchMode","searchText","changePath","$index","addAction","removeAction","fixedPage","user_result","group_result","max","Token","loadToken","tokens","revokeToken","rawConfig","config@","types","isUnknowType","metaDataLocation","MetaDataFormat","baseState","change_processors","saml","emailDomain","externalGroupsWhitelist","attributeMappings","external_groups","authnContext","ldap","oidc1.0","showLinkText","oauth2.0","keystone","import","importConfig","issuer","authUrl","authorization_endpoint","tokenUrl","token_endpoint","userInfoUrl","userinfo_endpoint","tokenKeyUrl","jwks_uri","scopes_supported","SAMLServiceProvider","staticCustomAttributes","config_staticCustomAttributes","UAAServerProvider","url_healthz","trustAsResourceUrl"],"mappings":"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,GAEV,CACC5C,KAAQ,WACR+B,KAAQ,SACRY,OAAS,EACTC,OAAS,GAEV,CACC5C,KAAQ,gBACR+B,KAAQ,OACRa,OAAS,GAEV,CACC5C,KAAQ,aACR+B,KAAQ,QACRa,OAAS,GAEV,CACC5C,KAAQ,eACR+B,KAAQ,QACRc,MAAS,gDACTD,OAAS,GAEV,CACC5C,KAAQ,aACR+B,KAAQ,QACRc,MAAS,8CACTD,OAAS,KAIVF,SAAS,cAAe,CACxB,CACCI,SAAY,wBACZC,YAAe,kNAEhB,CACCD,SAAY,uBACZC,YAAe,yGAEhB,CACCD,SAAY,gCACZC,YAAe,kHAEhB,CACCD,SAAY,+BACZC,YAAe,iHAEhB,CACCD,SAAY,gCACZC,YAAe,kHAEhB,CACCD,SAAY,4BACZC,YAAe,8GAEhB,CACCD,SAAY,8BACZC,YAAe,gHAEhB,CACCD,SAAY,6BACZC,YAAe,+GAEhB,CACCD,SAAY,8BACZC,YAAe,gHAEhB,CACCD,SAAY,4BACZC,YAAe,8GAEhB,CACCD,SAAY,6BACZC,YAAe,+GAEhB,CACCD,SAAY,2BACZC,YAAe,6GAEhB,CACCD,SAAY,4BACZC,YAAe,gHAIhBL,SAAS,eAAgB,CACzB,QACA,OACA,UACA,OACA,WACA,QACA,YACA,SACA,QAGAA,SAAS,eAAgB,CACzB,MACA,OACA,OACA,MACA,QACA,SACA,UACA,UAGAA,SAAS,eAAgB,CACzB,SACA,iBACA,kBACA,kBACA,gBACA,mCACA,+BACA,+BACA,8BACA,gCACA,yBACA,iCACA,gCACA,MACA,QACA,gBACA,gBACA,aACA,mBACA,sBACA,mBACA,iBACA,mBACA,gBACA,eACA,SACA,OACA,OACA,SACA,UACA,OACA,OACA,WACA,oBACA,gBACA,WACA,sBACA,gBACA,OACA,WACA,eACA,SACA,SACA,qBACA,sBACA,QACA,UACA,cACA,SACA,aACA,cACA,KACA,UACA,oBACA,UACA,aACA,OACA,MACA,UACA,qBAGAA,SAAS,UAAW,CACpBM,QAAW,EACXC,OAAS,EACTC,IAAO,6BACPC,SAAY,SACZC,SAAY,QACZC,UAAa,WACbC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","file":"app.js","sourcesContent":["'use strict';\n\nangular.module('uaaUIApp', [\n    'ngResource', 'ngCookies', 'ngAria', 'ngCacheBuster', 'ngFileUpload', 'ngPostMessage', 'ngSanitize',\n    'ui.bootstrap', 'ui.router', 'ui.select',\n    'infinite-scroll', 'LocalStorageModule', \n    'angular-loading-bar', 'angular-clipboard', 'angularMoment', 'file'])\n\n    .run(function ($rootScope, $location, $window, $http, $state, $interval, ENV, VERSION, STATHAT,\n        moment, AlertService) {\n        \n        $rootScope.ENV = ENV;\n        $rootScope.VERSION = VERSION;\n        $rootScope.icu = null;\n        _StatHat.push(['_trackValue', STATHAT.bootstrap, 1]);\n        $rootScope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams) {\n            $rootScope.toState = toState;\n            $rootScope.toStateParams = toParams;\n\n            var hash = $location.hash();\n            if (hash) {\n                toParams['#'] = hash;\n            }\n            \n            if($rootScope.icu === null &&\n                moment().utcOffset() === 480 &&\n                (moment().day() === 0 ||\n                    moment().day() === 6 ||\n                    moment().hour() < 9 ||\n                    moment().hour() > 21)){\n                $rootScope.icu = $interval(function(){\n                    AlertService.error(\"<strong>UI: </strong>Are you in ICU?\");\n                },5000);\n                _StatHat.push(['_trackValue', STATHAT.icu, 1]);\n            }\n        });\n\n        $rootScope.$on('$stateChangeSuccess',  function(event, toState, toParams, fromState, fromParams) {\n\n            var titleKey = 'UaaUI' ;\n\n            // Remember previous state unless we've been redirected to login or we've just\n            // reset the state memory after logout. If we're redirected to login, our\n            // previousState is already set in the authExpiredInterceptor. If we're going\n            // previousState is already set in the authExpiredInterceptor. If we're going\n            // to login directly, we don't want to be sent to some previous state anyway\n            if (angular.isUndefined(toState.data) ||\n                angular.isUndefined(toState.data.previous) || \n                toState.data.previous === true) {\n                $rootScope.previousStateName = fromState.name;\n                $rootScope.previousStateParams = fromParams;\n            }\n\n            // Set the page title key to the one configured in state or use default one\n            if (angular.isDefined(toState.data) && \n                toState.data.pageTitle) {\n                titleKey = toState.data.pageTitle;\n            }\n            $window.document.title = titleKey;\n        });\n\n        $rootScope.back = function() {\n            // If previous state is 'activate' or do not exist go to 'home'\n            if ($rootScope.previousStateName === 'activate' || $state.get($rootScope.previousStateName) === null) {\n                $state.go('home');\n            } else {\n                $state.go($rootScope.previousStateName, $rootScope.previousStateParams);\n            }\n        };\n    })\n    .config(function ($stateProvider, $urlRouterProvider, $httpProvider, $locationProvider,\n      httpRequestInterceptorCacheBusterProvider, AlertServiceProvider) {\n        // uncomment below to make alerts look like toast\n        // AlertServiceProvider.showAsToast(true);\n\n        //Cache everything except rest api requests\n        httpRequestInterceptorCacheBusterProvider.setMatchlist([/.*api.*/, /.*protected.*/], true);\n\n        $urlRouterProvider.otherwise('/');\n        $urlRouterProvider.rule(function ($injector, $location) {\n            var path = $location.path(),\n            normalized = path.toLowerCase();\n            if (path !== normalized) {\n               return normalized;\n            }\n        });\n        $stateProvider.state('site', {\n            'abstract': true,\n            views: {\n                'navbar@': {\n                    templateUrl: 'scripts/components/navbar/navbar.html',\n                    controller: 'NavbarController'\n                }\n            }\n        });\n\n        $httpProvider.interceptors.push('errorHandlerInterceptor');\n        $httpProvider.interceptors.push('zoneInterceptor');\n        $httpProvider.interceptors.push('authExpiredInterceptor');\n        $httpProvider.interceptors.push('authInterceptor');\n        // $httpProvider.interceptors.push('notificationInterceptor');\n        \n    })\n    .config(['$urlMatcherFactoryProvider', function($urlMatcherFactory) {\n        $urlMatcherFactory.type('boolean', {\n            name : 'boolean',\n            decode: function(val) { return val == true ? true : val == \"true\" ? true : false; },\n            encode: function(val) { return val ? 1 : 0; },\n            equals: function(a, b) { return this.is(a) && a === b; },\n            is: function(val) { return [true,false,0,1].indexOf(val) >= 0; },\n            pattern: /bool|true|0|1/\n        });\n    }]);\nangular.module(\"uaaUIApp\")\n\n.constant(\"ENV\", \"prod\")\n\n.constant(\"VERSION\", \"0.0.1-SNAPSHOT\")\n\n.constant(\"STATHAT\", {\n\t\"bootstrap\": \"a0eJrxQFBovvwhgPrifi1CBDUmV4\",\n\t\"icu\": \"uryhasBFrhZI6QS9KxRRsSBMaEtD\"\n})\n\n.constant(\"GROUPS\", [\n\t\"zones.read\",\n\t\"zones.write\",\n\t\"idps.read\",\n\t\"idps.write\",\n\t\"clients.admin\",\n\t\"clients.write\",\n\t\"clients.read\",\n\t\"clients.secret\",\n\t\"scim.write\",\n\t\"scim.read\",\n\t\"scim.create\",\n\t\"scim.userids\",\n\t\"scim.zones\",\n\t\"scim.invite\",\n\t\"password.write\",\n\t\"oauth.approval\",\n\t\"oauth.login\",\n\t\"approvals.me\",\n\t\"openid\",\n\t\"groups.update\",\n\t\"uaa.user\",\n\t\"uaa.resource\",\n\t\"uaa.admin\"\n])\n\n.constant(\"GRANTS\", [\n\t{\n\t\t\"name\": \"client_credentials\",\n\t\t\"type\": \"oauth2\",\n\t\t\"token\": true,\n\t\t\"grant\": true\n\t},\n\t{\n\t\t\"name\": \"implicit\",\n\t\t\"type\": \"oauth2\",\n\t\t\"token\": true,\n\t\t\"grant\": true\n\t},\n\t{\n\t\t\"name\": \"password\",\n\t\t\"type\": \"oauth2\",\n\t\t\"token\": true,\n\t\t\"grant\": true\n\t},\n\t{\n\t\t\"name\": \"authorization_code\",\n\t\t\"type\": \"oauth2\",\n\t\t\"token\": true,\n\t\t\"grant\": true\n\t},\n\t{\n\t\t\"name\": \"auto_login\",\n\t\t\"type\": \"oauth2\",\n\t\t\"token\": true,\n\t\t\"grant\": false\n\t},\n\t{\n\t\t\"name\": \"passcode\",\n\t\t\"type\": \"oauth2\",\n\t\t\"token\": true,\n\t\t\"grant\": false\n\t},\n\t{\n\t\t\"name\": \"refresh_token\",\n\t\t\"type\": \"flag\",\n\t\t\"grant\": true\n\t},\n\t{\n\t\t\"name\": \"user_token\",\n\t\t\"type\": \"other\",\n\t\t\"grant\": true\n\t},\n\t{\n\t\t\"name\": \"saml2-bearer\",\n\t\t\"type\": \"other\",\n\t\t\"value\": \"urn:ietf:params:oauth:grant-type:saml2-bearer\",\n\t\t\"grant\": true\n\t},\n\t{\n\t\t\"name\": \"jwt-bearer\",\n\t\t\"type\": \"other\",\n\t\t\"value\": \"urn:ietf:params:oauth:grant-type:jwt-bearer\",\n\t\t\"grant\": true\n\t}\n])\n\n.constant(\"ZONE_SCOPES\", [\n\t{\n\t\t\"template\": \"zones.<zone id>.admin\",\n\t\t\"description\": \"scope that permits operations in a designated zone by authenticating against the default zone, such as create identity providers or clients in another zone (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.read\",\n\t\t\"description\": \"scope that permits reading the given identity zone (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.clients.admin\",\n\t\t\"description\": \"translates into clients.admin after zone switch is complete (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.clients.read\",\n\t\t\"description\": \"translates into clients.read after zone switch is complete (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.clients.write\",\n\t\t\"description\": \"translates into clients.write after zone switch is complete (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.scim.read\",\n\t\t\"description\": \"translates into scim.read after zone switch is complete (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.scim.create\",\n\t\t\"description\": \"translates into scim.create after zone switch is complete (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.scim.write\",\n\t\t\"description\": \"translates into scim.write after zone switch is complete (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.scim.invite\",\n\t\t\"description\": \"translates into scim.invite after zone switch is complete (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.idps.read\",\n\t\t\"description\": \"translates into idps.read after zone switch is complete (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.idps.write\",\n\t\t\"description\": \"translates into idps.write after zone switch is complete (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.sps.read\",\n\t\t\"description\": \"translates into sps.read after zone switch is complete (used together with the X-Identity-Zone-Id header)\"\n\t},\n\t{\n\t\t\"template\": \"zones.<zone id>.sps.write\",\n\t\t\"description\": \"translates into sps.write after zone switch is complete (used together with the X-Identity-Zone-Id header)\"\n\t}\n])\n\n.constant(\"RESOURCE_IDS\", [\n\t\"zones\",\n\t\"idps\",\n\t\"clients\",\n\t\"scim\",\n\t\"password\",\n\t\"oauth\",\n\t\"approvals\",\n\t\"groups\",\n\t\"uaa\"\n])\n\n.constant(\"HTTP_METHIDS\", [\n\t\"GET\",\n\t\"HEAD\",\n\t\"POST\",\n\t\"PUT\",\n\t\"PATCH\",\n\t\"DELETE\",\n\t\"OPTIONS\",\n\t\"TRACE\"\n])\n\n.constant(\"HTTP_HEADERS\", [\n\t\"Accept\",\n\t\"Accept-Charset\",\n\t\"Accept-Encoding\",\n\t\"Accept-Language\",\n\t\"Accept-Ranges\",\n\t\"Access-Control-Allow-Credentials\",\n\t\"Access-Control-Allow-Headers\",\n\t\"Access-Control-Allow-Methods\",\n\t\"Access-Control-Allow-Origin\",\n\t\"Access-Control-Expose-Headers\",\n\t\"Access-Control-Max-Age\",\n\t\"Access-Control-Request-Headers\",\n\t\"Access-Control-Request-Method\",\n\t\"Age\",\n\t\"Allow\",\n\t\"Authorization\",\n\t\"Cache-Control\",\n\t\"Connection\",\n\t\"Content-Encoding\",\n\t\"Content-Disposition\",\n\t\"Content-Language\",\n\t\"Content-Length\",\n\t\"Content-Location\",\n\t\"Content-Range\",\n\t\"Content-Type\",\n\t\"Cookie\",\n\t\"Date\",\n\t\"ETag\",\n\t\"Expect\",\n\t\"Expires\",\n\t\"From\",\n\t\"Host\",\n\t\"If-Match\",\n\t\"If-Modified-Since\",\n\t\"If-None-Match\",\n\t\"If-Range\",\n\t\"If-Unmodified-Since\",\n\t\"Last-Modified\",\n\t\"Link\",\n\t\"Location\",\n\t\"Max-Forwards\",\n\t\"Origin\",\n\t\"Pragma\",\n\t\"Proxy-Authenticate\",\n\t\"Proxy-Authorization\",\n\t\"Range\",\n\t\"Referer\",\n\t\"Retry-After\",\n\t\"Server\",\n\t\"Set-Cookie\",\n\t\"Set-Cookie2\",\n\t\"TE\",\n\t\"Trailer\",\n\t\"Transfer-Encoding\",\n\t\"Upgrade\",\n\t\"User-Agent\",\n\t\"Vary\",\n\t\"Via\",\n\t\"Warning\",\n\t\"WWW-Authenticate\"\n])\n\n.constant(\"SETTING\", {\n\t\"version\": 8,\n\t\"debug\": false,\n\t\"url\": \"http://localhost:8080/uaa/\",\n\t\"clientId\": \"uaa_ui\",\n\t\"username\": \"admin\",\n\t\"loginType\": \"password\",\n\t\"authUrlPath\": \"oauth/authorize\",\n\t\"authRedirectUrl\": \"#/auth_redirect?\",\n\t\"authWindowType\": \"popup\",\n\t\"authWindowParam\": \"toolbar=no,scrollbars=no,resizable=no,top=100,left=500,width=600,height=800\",\n\t\"sessionCheckUrl\": \"session_management\"\n})\n\n;\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Setting', function apiService(localStorageService, SETTING) {\n        return {\n            version: 7,\n            set: function(setting) {\n                localStorageService.set('setting', setting);\n            },\n            get: function () {\n                var setting = localStorageService.get('setting');\n                if(setting === null || setting.version < this.version){\n                    setting = angular.merge({},SETTING);\n                    localStorageService.set('setting', setting);\n                }\n                return setting;\n            }\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Principal', function Principal($q, $filter, UserInfo) {\n        var _identity,\n            _authenticated = false,\n            _token,\n            _zone,\n            _uaaLogin = false;\n\n        var that = {\n            isIdentityResolved: function () {\n                return angular.isDefined(_identity);\n            },\n            isAuthenticated: function () {\n                return _authenticated;\n            },\n            isUAALogin: function(){\n                return _uaaLogin;\n            },\n            isClient: function(){\n                return angular.isDefined(_token) &&\n                    _token.grant_type === 'client_credentials';\n            },\n            isRedirect: function(){\n                return angular.isDefined(_token) &&\n                    (_token.grant_type === 'authorization_code' ||\n                    _token.grant_type === 'implicit');\n            },\n            //Using uaa zone client to manage other zone\n            isSwitchingZone: function(){\n                if (!_token || !_zone) {\n                    return false;\n                }\n                return _token.zid !== _zone.id &&\n                    that.canSwitchingZone(_zone.id);\n            },\n            canSwitchingZone: function(zoneId){\n                if (!_authenticated || !_token) {\n                    return false;\n                }\n                if(zoneId === 'uaa'){\n                    return false;\n                }\n                var find = $filter('filter')(_token.scope, 'zones.' + zoneId + '.');\n                return find.length > 0;\n            },\n            userName: function() {\n                return that.identity().then(function(_id) {\n                    if(_id == null){\n                        return 'UNKNOW';\n                    }\n                    return _id.user_name;\n                }, function(err){\n                    return 'UNKNOW';\n                });\n            },\n            hasScope: function (scope) {\n                if (!_authenticated || !_token) {\n                    return false;\n                }\n                if (that.isSwitchingZone()) {\n                    scope = 'zones.' + _token.zid + '.' + scope;\n                }\n                return _token.scope.indexOf(scope);\n            },\n            hasAnyScope: function (scopes) {\n                if (!_authenticated || !_token) {\n                    return false;\n                }\n                if (that.isSwitchingZone()) {\n                    scopes = 'zones.' + _token.zid + '.' + scopes;\n                }\n\n                for (var i = 0; i < scopes.length; i++) {\n                    if (_token.scope.indexOf(scopes[i]) !== -1) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n            hasAuthority: function (authority) {\n                if (!_authenticated || !_token) {\n                    return false;\n                }\n                if (that.isSwitchingZone()) {\n                    authority = 'zones.' + _token.zid + '.' + authority;\n                }\n\n                return _token.aud.indexOf(authority);\n            },\n            hasAnyAuthority: function (authorities) {\n                if (!_authenticated || !_token) {\n                    return false;\n                }\n                if (that.isSwitchingZone()) {\n                    authorities = 'zones.' + _token.zid + '.' + authorities;\n                }\n\n                for (var i = 0; i < authorities.length; i++) {\n                    if (_token.aud.indexOf(authorities[i]) !== -1) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n            uaaLogin: function(flag){\n                _uaaLogin = flag;\n            },\n            token: function(token){\n                _token = token;\n                if(that.isRedirect()){\n                    _uaaLogin = true;\n                }\n\n                if(that.isClient()){\n                    that.authenticate({\n                        user_name: token.client_id\n                    });\n                }else{\n                    that.userName();\n                }\n                return that;\n            },\n            zone: function(zone){\n                _zone = zone;\n                return that;\n            },\n            authenticate: function (identity) {\n                _identity = identity;\n                _authenticated = typeof identity !== 'undefined';\n            },\n            identity: function (force) {\n                var deferred = $q.defer();\n\n                if (force === true) {\n                    _identity = undefined;\n                }\n\n                // check and see if we have retrieved the identity data from the server.\n                // if we have, reuse it by immediately resolving\n                if (angular.isDefined(_identity)) {\n                    deferred.resolve(_identity);\n\n                    return deferred.promise;\n                }\n\n                // retrieve the identity data from the server, update the identity object, and then resolve.\n                UserInfo.get().$promise\n                    .then(function (info) {\n                        if (angular.isUndefined(info.user_name)) {\n                            _identity = undefined;\n                            _authenticated = false;\n                            deferred.reject(null);\n                            return;\n                        }\n                        _identity = info;\n                        _authenticated = true;\n                        deferred.resolve(_identity);\n                    })\n                    .catch(function() {\n                        _identity = undefined;\n                        _authenticated = false;\n                        deferred.reject(null);\n                    });\n                return deferred.promise;\n            }\n        };\n\n        return that;\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('TokenHolder', function apiService(localStorageService,$window) {\n        return {\n            set: function(token) {\n                var access_token = token.access_token ? token.access_token : null;\n                if(access_token) {\n                    console.log('JWT:', access_token);\n                    \n                    var expiredAt = new Date();\n                    expiredAt.setSeconds(expiredAt.getSeconds() + token.expires_in);\n                    token.expires_at = expiredAt.getTime();\n                    \n                    localStorageService.set('token', token);\n                }\n            },\n            get: function () {\n                return localStorageService.get('token');\n            },\n            remove: function () {\n                return localStorageService.remove('token');\n            },\n            parseJwt: function(token) {\n                var base64Url = token.split('.')[1];\n                var base64 = base64Url.replace('-', '+').replace('_', '/');\n                return angular.fromJson($window.atob(base64));\n            },\n            hasValidToken: function () {\n                var token = this.get();\n                return token && token.expires_at && token.expires_at > new Date().getTime();\n            },\n            getJwt: function(){\n                var token = this.get();\n                if(token === null){\n                    return {\n                        header: undefined,\n                        payload: undefined,\n                        signature: undefined\n                    };\n                }\n                var jwt = token.access_token.split('.');\n                \n                //Base64URL to Base64\n                var header = jwt[0].replace(/-/g, '+').replace(/_/g, '/');\n                var payload = jwt[1].replace(/-/g, '+').replace(/_/g, '/');\n                var signature = jwt[2].replace(/-/g, '+').replace(/_/g, '/');\n                header = angular.fromJson($window.atob(header));\n                var json = $window.atob(payload);\n                json = decodeURIComponent(escape(json))\n                payload = angular.fromJson(json);\n                signature = $window.atob(signature);\n                return {\n                    header: header,\n                    payload: payload,\n                    signature: signature\n                };\n            },\n            isSupportRefresh: function(){\n                var token = localStorageService.get('token');\n                return token !== null && \n                    angular.isDefined(token.refresh_token);\n            }\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('ZoneHolder', function (Zone, localStorageService, $q) {\n        var _current;\n        var _uaa = true;\n\n        restoreZone();\n\n        function restoreZone(){\n            _current = localStorageService.get(\"zone\");\n            _uaa = (_current === null || _current.id === 'uaa');\n        }\n        function is_uaa(){\n            return _uaa;\n        }\n        function now(){\n            var deferred = $q.defer();\n\n            if(_current === null){\n                changeZone('uaa')\n                    .then(function(zone){\n                        deferred.resolve(zone);\n                    });\n            }else{\n                deferred.resolve(_current);\n            }\n\n            return deferred.promise;\n        }\n        function nowName(){\n            var deferred = $q.defer();\n            now().then(function(zone){\n                deferred.resolve(zone.name);\n            });\n            return deferred.promise;\n        }\n        function changeZone(id){\n            if(_current !== null && \n                _current.id === id){\n                var deferred = $q.defer();\n                deferred.resolve(_current);\n                return deferred.promise;\n            }else{\n                return Zone.get({id: id}).$promise\n                    .then(function(zone){\n                        localStorageService.set(\"zone\",zone);\n                        _uaa = (zone.id === 'uaa');\n                        _current = zone;\n                        return zone;\n                    });\n            }\n        }\n        function resetZone(){\n            localStorageService.remove(\"zone\");\n            _uaa = true;\n            _current = null;\n        }\n\n        return {\n            isUAA: is_uaa,\n            current: now,\n            name: nowName,\n            change: changeZone,\n            reset: resetZone\n        };\n    });\n\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Search', function apiService($filter, GuessSearch) {\n\n        var _load;\n        var _selected;\n        var _filters;\n        var _anys;\n\n        var getAfterMomentName = function(context){\n            return 'After ' + context.moment.fromNow();\n        };\n\n        var getBeforeMomentName = function(context){\n            return 'Before ' + context.moment.fromNow();\n        };\n\n        var getISOMoment = function(context){\n            return context.moment.toISOString();\n        };\n        \n        var getTextMoment = function(context){\n            return context.text;\n        };\n        \n        var getText = function(context){\n            return context;\n        };\n\n        var getAscSortName = function(context){\n            return 'Sort ' + context + ' Asc';\n        };\n\n        var getDescSortName = function(context){\n            return 'Sort ' + context + ' Desc';\n        };\n\n        return {\n            // attribute {\n            //     name,field,moment,order,any\n            // }\n            init: function(load, selected, attributes, configs) {\n                _load = load;\n                _selected = selected;\n                _anys = $filter('filter')(attributes, {'any':true}, true);\n                var _moments = $filter('filter')(attributes, {'moment':'!!'});\n                var _urls = $filter('filter')(attributes, {'url':true}, true);\n                var _emails = $filter('filter')(attributes, {'email':true}, true);\n                var _enums = $filter('filter')(attributes, function(value, index, array){\n                    return angular.isArray(value.enum);\n                }, true);\n                var _sorts = $filter('filter')(attributes, {'sort':true}, true);\n\n\n                var _configs = [];\n                //all\n                _configs.push({\n                    support: 'string',\n                    data: {\n                        group: 'Search',\n                        icon: 'glyphicon-search',\n                        name: function(context){\n                            return 'ANY:' + context;\n                        },\n                        field: \"ANY\",\n                        operator: \"co\",\n                        value: function(context){\n                            return context;\n                        }\n                    }\n                });\n\n                //moment\n                if(_moments.length > 0){\n                    var _moment_datas = [];\n                    angular.forEach(_moments,function(attribute){\n                        var after = {\n                            group: attribute.name,\n                            icon: \"glyphicon-time\",\n                            name: getAfterMomentName,\n                            tags: getTextMoment,\n                            field: attribute.field,\n                            operator: 'ge',\n                            value: getISOMoment\n                        };\n                        _moment_datas.push(after);\n\n                        var before = {\n                            group: attribute.name,\n                            icon: \"glyphicon-time\",\n                            name: getBeforeMomentName,\n                            tags: getTextMoment,\n                            field: attribute.field,\n                            operator: 'le',\n                            value: getISOMoment\n                        };\n                        _moment_datas.push(before);\n                        if(angular.isDefined(attribute.value)){\n                            after.value = attribute.value;\n                            before.value = attribute.value;\n                        }\n                    });\n                    _configs.push({\n                        support: 'moment',\n                        data: _moment_datas\n                    });\n                }\n\n                //url\n                if(_urls.length > 0){\n                    var _url_datas = [];\n                    angular.forEach(_urls,function(attribute){\n                        var item = {\n                            group: attribute.name,\n                            icon: \"glyphicon-retweet\",\n                            name: getText,\n                            tags: getText,\n                            field: attribute.field,\n                            operator: 'ge',\n                            value: getText\n                        };\n                        _url_datas.push(item);\n                    });\n                    _configs.push({\n                        support: 'url',\n                        data: _url_datas\n                    });\n                }\n\n                //_emails\n                if(_emails.length > 0){\n                    var _email_datas = [];\n                    angular.forEach(_emails,function(attribute){\n                        var item = {\n                            group: attribute.name,\n                            icon: \"glyphicon-envelope\",\n                            name: getText,\n                            tags: getText,\n                            field: attribute.field,\n                            operator: 'co',\n                            value: getText\n                        };\n                        _email_datas.push(item);\n                    });\n                    _configs.push({\n                        support: 'email',\n                        data: _email_datas\n                    });\n                }\n\n                //enum\n                if(_enums.length > 0){\n                    var _enum_datas = [];\n                    angular.forEach(_enums,function(attribute){\n                        var a = {\n                            group: attribute.name,\n                            field: attribute.field,\n                        };\n                        angular.forEach(attribute.enum, function(e){\n                            var data = angular.merge({},a,e);\n                            _enum_datas.push(data);\n                        });\n                        \n                        // angular.merge(_enum_datas,attribute.enum);\n                    });\n                    _configs.push({\n                        support: true,\n                        data: _enum_datas\n                    });\n                }\n\n                //\n                if(angular.isDefined(configs)){\n                    _configs.concat(configs);\n                }\n                \n                //sort \n                if(_sorts.length > 0){\n                    var _sort_datas = [];\n                    angular.forEach(_sorts,function(attribute){\n                        var ascending = {\n                            group: attribute.name,\n                            icon: \"glyphicon-sort-by-attributes\",\n                            name: getAscSortName(attribute.name),\n                            field: attribute.field,\n                            operator: 'ORDER',\n                            value: 'ascending'\n                        };\n                        _sort_datas.push(ascending);\n\n                        var descending = {\n                            group: attribute.name,\n                            icon: \"glyphicon-sort-by-attributes-alt\",\n                            name: getDescSortName(attribute.name),\n                            field: attribute.field,\n                            operator: 'ORDER',\n                            value: 'descending'\n                        };\n                        _sort_datas.push(descending);\n                    });\n                    _configs.push({\n                        support: function(search,selected){\n                            if(angular.isDefined(selected)){\n                                var already_sort = $filter('filter')(selected, {'operator':'ORDER'}, true);\n                                return (already_sort.length === 0);\n                            }\n                            return true;\n                        },\n                        data: _sort_datas\n                    });\n                }\n                \n                //other\n                _configs.push({\n                    support: true,\n                    data: [{\n                        group: 'Advanced',\n                        icon: 'glyphicon-random',\n                        tags: 'exact and',\n                        name: 'EXACT',\n                        field: \"EXACT\",\n                        operator: \"\",\n                        value: \"with 'AND' operator\"\n                    }]\n                });\n\n                GuessSearch.config(_configs);\n\n                _filters = GuessSearch.guess();\n                return _filters;\n            },\n            tagging: function (text) {\n                var filters = GuessSearch.guess(text,_selected.value);\n                _filters.length = 0;\n                angular.merge(_filters,filters);\n                return {\n                    group: 'Search',\n                    icon: 'glyphicon-search',\n                    name: 'ANY:' + text,\n                    field: \"ANY\",\n                    operator: \"co\",\n                    value: text\n                };\n            },\n            filtering: function(selected){\n                var filters = [];\n                var find = $filter('filter')(selected, {'field':'EXACT'}, true);\n                var and = (find.length > 0);\n    \n                angular.forEach(selected,function(select){\n                    var filter = '';\n                    if(select.field === 'EXACT' || \n                        select.operator === 'ORDER'){\n                        return;\n                    }else if(select.field === 'ANY'){\n                        var ps = [];\n                        angular.forEach(_anys, function(attribute){\n                            var p = attribute.field + ' co \\'' + select.value + '\\'';\n                            ps.push(p);\n                        });\n\n                        filter = \n                            (and ? '(' : '') +\n                            ps.join(' or ') + \n                            (and ? ')' : '');\n                    }else{\n                        filter = \n                            select.field + ' ' +\n                            select.operator + ' ' + \n                            (angular.isString(select.value) ? '\\'' + select.value + '\\'' :  select.value);\n                    }\n                    filters.push(filter);\n                });\n    \n                var filter = filters.join(and ? ' and ' : ' or ');\n                \n                var sortBy = null;\n                var sortOrder = null;\n                var orders = $filter('filter')(selected, {'operator':'ORDER'}, true);\n                if(orders.length > 0){\n                    sortBy = orders[0].field;\n                    sortOrder = orders[0].value;\n                }\n    \n    \n                _load(filter,sortBy,sortOrder);\n                this.tagging();\n            },\n            refreshing: function(){\n                this.filtering(_selected.value);\n            },\n            searching: function(text){\n                if(!!text){\n                    _selected.value = [{\n                        group: 'Search',\n                        icon: 'glyphicon-search',\n                        name: 'ANY:' + text,\n                        field: \"ANY\",\n                        operator: \"co\",\n                        value: text\n                    }];\n                }\n                this.refreshing();\n            },\n            usingText: getText\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Healthz', function ($resource) {\n        //this api cant cors\n        return $resource('api/healthz', {}, {\n                'get': { method: 'GET' }\n            });\n        });\n\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('UserInfo', function ($resource) {\n        return $resource('api/userinfo', {}, {\n                'get': { method: 'GET', alert: false }\n            });\n        });\n\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Info', function ($resource) {\n        return $resource('api/info', {}, {\n                'get': { method: 'GET', alert: false }\n            });\n        });\n\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('User', function ($resource) {\n        return $resource('api/Users/:id', {}, {\n                'query': {method: 'GET', isArray: false},\n                'get': { method: 'GET' },\n                'save': { method:'POST' },\n                'update': { \n                    method:'PUT',\n                    headers : {\n                        'if-match': function(config) {\n                            return config.data.meta.version;\n                        }\n                    },\n                },\n                'delete':{ method:'DELETE'}\n            });\n        })\n    .factory('UserPassword', function ($resource) {\n        return $resource('api/Users/:id/password', {}, {\n                // only login as user\n                'change': { \n                    method:'PUT',\n                    headers: {\n                        \"Authorization\": function(config) {\n                            if(angular.isUndefined(config.data.token)){\n                                return null;\n                            }\n                            var auth = 'Bearer ' + config.data.token;\n                            return auth;\n                        }\n                    },\n                    transformRequest: function(data) {\n                        // you can delete the variable if you don't want it sent to the backend\n                        // delete data['old_secret'];\n                        delete data.token;\n                        // transform payload before sending\n                        return angular.toJson(data);\n                    }\n                }\n            });\n        })\n    .factory('UserStatus', function ($resource) {\n        return $resource('api/Users/:id/status', {}, {\n                'change': { method:'PATCH' }\n            });\n        })\n    .factory('UserVerify', function ($resource) {\n        return $resource('api/Users/:id/verify', {}, {\n                'verify': { method:'GET' }\n            });\n        })\n    .factory('UserVerifyLink', function ($resource) {\n        return $resource('api/Users/:id/verify-link', {}, {\n                'verify': { method:'GET' }\n            });\n        })\n    .factory('UserMFARegistration', function ($resource) {\n        return $resource('api/Users/:id/mfa', {}, {\n                'delete': { method:'DELETE' }\n            });\n        })\n    .factory('UserInvite', function ($resource) {\n        return $resource('api/invite_users', {}, {\n                'invite': { method:'POST' }\n            });\n        });\n\n        \n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Group', function ($resource) {\n        return $resource('api/Groups/:id', {}, {\n                'query': {method: 'GET', isArray: false},\n                'get': {\n                    method: 'GET',\n                    transformResponse: function (data) {\n                        data = angular.fromJson(data);\n                        return data;\n                    }\n                },\n                'save': { method:'POST' },\n                'update': { \n                    method:'PUT',\n                    headers : {\n                        'if-match': function(config) {\n                            return config.data.meta.version;\n                        }\n                    },\n                },\n                'delete':{ method:'DELETE'}\n            });\n        });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Member', function ($resource) {\n        return $resource('api/Groups/:gid/members/:id', {}, {\n                'list': {method: 'GET', isArray: true},\n                'check': {\n                    method: 'GET',\n                    transformResponse: function (data) {\n                        data = angular.fromJson(data);\n                        return data;\n                    }\n                },\n                'add': { method:'POST' },\n                'remove':{ method:'DELETE'}\n            });\n        })\n    .factory('MemberType', function (User, $q, $injector) {\n\n        var items = {\n            \"USER\": {\n                \"resourceName\": \"User\",\n                \"getName\": function(user){\n                    return user.userName;\n                }\n            },\n            \"GROUP\": {\n                \"resourceName\": \"Group\",\n                \"getName\": function(group){\n                    return group.displayName;\n                }\n            }\n        };\n\n        return {\n                'getName': function (member) {\n                    var deferred = $q.defer();\n                    var item = items[member.type];\n                    if (angular.isUndefined(item)){\n                        return;\n                    }\n                    if (angular.isDefined(member.entity)) {\n                        deferred.resolve(item.getName(member.entity));\n                    }else{ \n                        var name = item.resourceName;\n                        var resource = $injector.get(name);\n                        resource.get({id: member.value}).$promise\n                            .then(function (result) {\n                                member.entity = result;\n                                deferred.resolve(item.getName(member.entity));\n                            })\n                            .catch(function(res) {\n                                if(res.status === 404){\n                                    //when delete zone \n                                    //the switching scopes member relationship will not be deleted\n                                    member.entity = undefined;\n                                    deferred.resolve(\"NOT EXIST\"); \n                                }else{\n                                    member.entity = undefined;\n                                    deferred.resolve(\"UNKNOW\"); \n                                }\n                            });\n                    }\n                    return deferred.promise;\n                }\n            };\n        });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Client', function ($resource) {\n        var transformRequest = function(data) {\n            if(data.allowedproviders != null &&\n                data.allowedproviders.length == 0){\n                //https://github.com/cloudfoundry/uaa/blob/b9f228091ee9856129b157c9f908978549e8ca37/server/src/main/java/org/cloudfoundry/identity/uaa/oauth/UaaAuthorizationRequestManager.java#L222-L227\n                delete data.allowedproviders;\n            }\n            return angular.toJson(data);\n        };\n\n        return $resource('api/oauth/clients/:id', {}, {\n                'query': { method: 'GET', isArray: false},\n                'get': { method: 'GET' },\n                'save': { \n                    method:'POST',\n                    transformRequest: transformRequest\n                },\n                'update': { \n                    method:'PUT',\n                    transformRequest: transformRequest\n                },\n                'delete':{ method:'DELETE'}\n            });\n        })\n    .factory('ClientSecret', function ($resource, Base64) {\n        return $resource('api/oauth/clients/:id/secret', {}, {\n                // only login as user\n                'change': { \n                    method:'PUT',\n                    headers: {\n                        \"Authorization\": function(config) {\n                            // var up = config.data.clientId + ':' + config.data.old_secret\n                            // var auth = 'Basic ' + Base64.encode(up)\n                            // // access variable via config.data\n                            // return auth;\n\n                            if(angular.isUndefined(config.data.token)){\n                                return null;\n                            }\n                            var auth = 'Bearer ' + config.data.token;\n                            return auth;\n                        }\n                    },\n                    transformRequest: function(data) {\n                        // you can delete the variable if you don't want it sent to the backend\n                        // delete data['old_secret'];\n                        delete data.token;\n                        // transform payload before sending\n                        return angular.fromJson(data);\n                    }\n                }\n            });\n        })\n    .factory('ClientMeta', function ($resource) {\n        return $resource('api/oauth/clients/:id/meta', {}, {\n                'query': {method: 'GET', isArray: true},\n                'get': {\n                    method: 'GET',\n                    transformResponse: function (data) {\n                        data = angular.fromJson(data);\n                        return data;\n                    }\n                },\n                'update': { method:'PUT' }\n            });\n        });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Zone', function ($resource) {\n        return $resource('api/identity-zones/:id', {}, {\n                'query': {method: 'GET', isArray: true},\n                'get': {\n                    method: 'GET',\n                    transformResponse: function (data) {\n                        data = angular.fromJson(data);\n                        return data;\n                    }\n                },\n                'save': { method:'POST' },\n                'update': { method:'PUT' },\n                'delete':{ method:'DELETE'}\n            });\n        })\n    .factory('ZoneClient', function ($resource) {\n        return $resource('api/identity-zones/:id/clients/:cid', {}, {\n                'save': { method:'POST' },\n                'delete':{ method:'DELETE'}\n            });\n        });\n    \n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('AutoLogin', function ($http, Base64) {\n        return {\n            code: function(credentials) {\n                var data = \"username=\" +  encodeURIComponent(credentials.username) + \n                    \"&password=\" + encodeURIComponent(credentials.password);\n                return $http.post('api/autologin', data, {\n                    headers: {\n                        \"Content-Type\": \"application/x-www-form-urlencoded\",\n                        \"Accept\": \"application/json\",\n                        \"Authorization\": \"Basic \" + Base64.encode(credentials.clientId + ':' + credentials.clientSecret)\n                    }\n                });\n            },\n        };\n    });\n\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Passcode', function ($resource) {\n        //this api is page\n        return $resource('api/passcode', {}, {\n                'get': { method: 'GET' }\n            });\n        });\n\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Token', function ($resource) {\n        return $resource('api/oauth/token/:action/:target/:id/:target2/:id2', {}, {\n                'userList': { method: 'GET', isArray: true, params: { action: 'list', target: 'user' }},\n                'userRevoke': { method: 'GET', params: { action: 'revoke', target: 'user' }},\n                'clientList': { method: 'GET', isArray: true, params: { action: 'list', target: 'client' }},\n                'clientRevoke': { method: 'GET', params: { action: 'revoke', target: 'client' }},\n                'userClientRevoke': { method:'POST', \n                    params: { action: 'revoke', target: 'user', target2: 'client' }},\n                'revoke': { method:'DELETE', params: { action: 'revoke' }}\n            });\n        });\n\n        \n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Password', function ($resource) {\n        return $resource('api/:action', {}, {\n                'reset': {method: 'POST', params: { action: 'password_resets' }},\n                'change': {method: 'POST', params: { action: 'password_change' }}\n            });\n        });\n\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('Email', function ($resource) {\n        return $resource('api/:action', {}, {\n                'verification': {method: 'POST', params: { action: 'email_verifications' },\n                    isArray: false,\n                    transformResponse: function(data){\n                        return {\n                            code: data\n                        };\n                    }},\n                'change': {method: 'POST', params: { action: 'email_changes' }}\n            });\n        });\n\n\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('IdentityProvider', function ($resource) {\n        return $resource('api/identity-providers/:id', {}, {\n                'query': {method: 'GET', isArray: true},\n                'get': {\n                    method: 'GET',\n                    transformResponse: function (data) {\n                        data = angular.fromJson(data);\n                        return data;\n                    }\n                },\n                'save': { method:'POST' },\n                'update': { method:'PUT' },\n                'delete':{ method:'DELETE'}\n            });\n        });\n\n        \n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('MFAProvider', function ($resource) {\n        return $resource('api/mfa-providers/:id', {}, {\n                'query': {method: 'GET', isArray: true},\n                'get': {\n                    method: 'GET',\n                    transformResponse: function (data) {\n                        data = angular.fromJson(data);\n                        return data;\n                    }\n                },\n                'save': { method:'POST' },\n                'update': { method:'PUT' },\n                'delete':{ method:'DELETE' }\n            });\n        });\n\n        \n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('SAMLServiceProvider', function ($resource) {\n        var transformRequest = function(data) {\n            data.config = angular.toJson(data.config);\n            return angular.toJson(data);\n        };\n        var transformResponse = function(json) {\n            var data = angular.fromJson(json);\n            data.config = angular.fromJson(data.config);\n            return data;\n        };\n        var transformResponses = function(json) {\n            var list = angular.fromJson(json);\n            angular.forEach(list, function(data){\n                data.config = angular.fromJson(data.config);\n            });\n            return list;\n        };\n        \n        return $resource('api/saml/service-providers/:id', {}, {\n                'query': {\n                    method: 'GET', \n                    transformResponse: transformResponses,\n                    isArray: true\n                },\n                'get': { \n                    method: 'GET',\n                    transformResponse: transformResponse\n                },\n                'save': { \n                    method:'POST',\n                    transformRequest: transformRequest\n                },\n                'update': { \n                    method:'PUT',\n                    transformRequest: transformRequest\n                },\n                'delete':{ method:'DELETE' }\n            });\n        });\n\n        \n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('UAAServerProvider', function apiService($q,Info,Healthz) {\n\n        var _info;\n        var _healthy = false;\n\n        return {\n            isHealthy: function () {\n                return _healthy;\n            },\n            healthz: function(){\n                var deferred = $q.defer();\n\n                Healthz.get().$promise\n                    .then(function (res) {\n                        if(res.data === 'ok\\n'){\n                            _healthy = true;\n                        }else{\n                            _healthy = false;\n                        }\n                        deferred.resolve(_healthy);\n                    })\n                    .catch(function(){\n                        _healthy = false;\n                        deferred.resolve(_healthy);\n                    });\n                return deferred.promise;\n            },\n            info: function(force){\n                var deferred = $q.defer();\n\n                if (force === true) {\n                    _info = undefined;\n                }\n\n                if (angular.isDefined(_info)) {\n                    deferred.resolve(_info);\n\n                    return deferred.promise;\n                }\n\n                Info.get().$promise\n                    .then(function (res) {\n                        _info = res;\n                        _healthy = true;\n                        deferred.resolve(_info);\n                    })\n                    .catch(function() {\n                        _info = null;\n                        _healthy = false;\n                        deferred.resolve(_info);\n                    });\n                return deferred.promise;\n            }\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('TokenServerProvider', function ($http, $window, $location, $q, Base64, Setting) {\n        return {\n            refresh: function(credentials) {\n                var data = \"client_id=\" + encodeURIComponent(credentials.clientId) +\n                    \"&client_secret=\" + encodeURIComponent(credentials.clientSecret) +\n                    \"&grant_type=refresh_token\" +\n                    //TODO not jwt format\n                    // + \"&token_format=opaque\" +\n                    \"&refresh_token=\" + credentials.token;\n                \n                return $http.post('api/oauth/token', data, {\n                    headers: {\n                        \"Content-Type\": \"application/x-www-form-urlencoded\",\n                        \"Accept\": \"application/json\",\n                        \"Authorization\": \"Basic \" + Base64.encode(credentials.clientId + ':' + credentials.clientSecret)\n                    }\n                });\n            },\n            client: function(credentials) {\n                var data = \"grant_type=client_credentials\";\n                return $http.post('api/oauth/token', data, {\n                    headers: {\n                        \"Content-Type\": \"application/x-www-form-urlencoded\",\n                        \"Accept\": \"application/json\",\n                        \"Authorization\": \"Basic \" + Base64.encode(credentials.clientId + ':' + credentials.clientSecret)\n                    }\n                });\n            },\n            password: function(credentials) {\n                var data = \"username=\" +  encodeURIComponent(credentials.username) +\n                    \"&password=\" + encodeURIComponent(credentials.password) +\n                    \"&grant_type=password\";\n                return $http.post('api/oauth/token', data, {\n                    headers: {\n                        \"Content-Type\": \"application/x-www-form-urlencoded\",\n                        \"Accept\": \"application/json\",\n                        \"Authorization\": \"Basic \" + Base64.encode(credentials.clientId + ':' + credentials.clientSecret)\n                    }\n                });\n            },\n            passcode: function(credentials) {\n                var data = \"passcode=\" +  encodeURIComponent(credentials.passcode) +\n                    \"&grant_type=password\";\n                return $http.post('api/oauth/token', data, {\n                    headers: {\n                        \"Content-Type\": \"application/x-www-form-urlencoded\",\n                        \"Accept\": \"application/json\",\n                        \"Authorization\": \"Basic \" + Base64.encode(credentials.clientId + ':' + credentials.clientSecret)\n                    }\n                });\n            },\n            authorization_code: function(credentials){\n                var data = \"client_id=\" + encodeURIComponent(credentials.clientId) +\n                    \"&redirect_uri=\" + encodeURIComponent(credentials.redirect_uri) +\n                    \"&grant_type=authorization_code&code=\" + credentials.code;\n                return $http.post('api/oauth/token', data, {\n                    headers: {\n                        \"Content-Type\": \"application/x-www-form-urlencoded\",\n                        \"Accept\": \"application/json\",\n                        \"Authorization\": \"Basic \" + Base64.encode(credentials.clientId + ':' + credentials.clientSecret)\n                    }\n                });                \n            },\n            start_implicit: function(credentials,$scope){\n                var response_type = credentials.response_type || 'token';\n                var data = \"client_id=\" + encodeURIComponent(credentials.clientId) +\n                    \"&redirect_uri=\" + encodeURIComponent(credentials.redirect_uri) +\n                    \"&response_type=\" + response_type +\n                    \"&state=\" + credentials.state;\n                var uaa_auth_url = credentials.auth_url + '?' + data;\n\n                if(Setting.get().authWindowType === 'popup'){\n                    var authWindow = $window.open(uaa_auth_url, 'UAA-Auth-Window', \n                        Setting.get().authWindowParam);\n\n                    var that = this;\n                    var deferred = $q.defer();\n                    var listener = $scope.$root.$on('$messageIncoming', function (event, data){\n                        var _data = angular.fromJson(data);\n                        //TODO\n                        delete _data.origin;\n\n                        that.end_data(_data)\n                            .then(function(token){\n                                listener();\n                                authWindow.close();\n                                deferred.resolve(token);\n                            })\n                            .catch(function(err){\n                                deferred.reject(err);\n                            });\n                    });\n                    \n                    return deferred.promise;\n                }\n            },\n            start_authorization_code: function(credentials,$scope){\n                var response_type = credentials.response_type || 'code';\n\n                var data = \"client_id=\" + encodeURIComponent(credentials.clientId) +\n                    \"&redirect_uri=\" + encodeURIComponent(credentials.redirect_uri) +\n                    \"&response_type=\" + response_type +\n                    \"&state=\" + credentials.state;\n                if(credentials.code !== null &&\n                    !angular.isUndefined(credentials.code)){\n                    data = data + \"&code=\" + credentials.code; \n                }\n                var uaa_auth_url = credentials.auth_url + '?' + data;\n\n                if(Setting.get().authWindowType === 'popup'){\n                    var authWindow = $window.open(uaa_auth_url, 'UAA-Auth-Window', \n                        Setting.get().authWindowParam);\n\n                    var that = this;\n                    var deferred = $q.defer();\n                    var listener = $scope.$root.$on('$messageIncoming', function (event, data){\n                        var _data = angular.fromJson(data);\n                        //TODO\n                        delete _data.origin;\n\n                        _data.redirect_uri = credentials.redirect_uri;\n                        that.end_data(_data)\n                            .then(function(token){\n                                listener();\n                                authWindow.close();\n                                deferred.resolve(token);\n                            })\n                            .catch(function(err){\n                                deferred.reject(err);\n                            });\n                    });\n                    \n                    return deferred.promise;\n                }\n            },\n            get_redirect_data: function(stateParams){\n                var urlParams = {};\n                var searchParams = new URL(location.href).searchParams;\n                var arrayParams = Array.from(searchParams.entries());\n                angular.forEach(arrayParams, function(param){\n                    urlParams[param[0]] = param[1];\n                });\n\n                for (var n in stateParams) { \n                    if (stateParams[n] === null) {\n                        delete stateParams[n];\n                    }\n                }\n\n                var params = angular.merge(urlParams,stateParams);\n                return params;\n            },\n            end_redirect: function($scope,$window,$stateParams){\n                var deferred = $q.defer();\n\n                var data = this.get_redirect_data($stateParams);\n                if(data === null){\n                    deferred.reject({\n                        error: true,\n                        error_description: \"No redirect.\"\n                    });\n                }else if(!angular.isUndefined(data.error)){\n                    deferred.reject(data);\n                    return deferred.promise;\n                }else if(Setting.get().authWindowType === 'popup' && \n                    $window.operer !== null && \n                    angular.isUndefined($window.operer)){\n                    //check this is popup auth window\n                    //post massage back\n                    $scope.$emit(\n                        '$messageOutgoing',\n                        angular.toJson(data)\n                    );\n                    deferred.reject({\n                        error: false,\n                        error_description: \"Redirect data post back to opener window. waiting for auto close.\"\n                    });\n                }else{\n                    //TODO other windowType\n                    deferred.resolve(data);\n                }\n                return deferred.promise;\n            },\n            end_data: function(data){\n                var deferred = $q.defer();\n                if(data.code !== null &&\n                    !angular.isUndefined(data.code)){ \n                    var setting = Setting.get();\n                    var uaa = {\n                        url: setting.url,\n                        clientId: setting.clientId,\n                        clientSecret: setting.clientSecret,\n                        code: data.code,\n                        redirect_uri: data.redirect_uri\n                    };\n                    this.authorization_code(uaa)\n                        .then(function(res){\n                            deferred.resolve(res.data);\n                        })\n                        .catch(function(err){\n                            deferred.resolve(err);\n                        });\n                } else if(data.access_token !== null &&\n                    !angular.isUndefined(data.access_token)){\n                    data.expires_in = parseInt(data.expires_in);\n                    deferred.resolve(data);\n                }\n                return deferred.promise;\n            }\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('SSOServerProvider', function ($http, $window, $location, $interval, $q, Base64, Setting) {\n        return {\n            start_logout: function(credentials,$scope){\n                var data = \"client_id=\" + encodeURIComponent(credentials.clientId) +\n                    \"&redirect=\" + encodeURIComponent(credentials.redirect_uri);\n                var uaa_logout_url = credentials.url + 'logout.do?' + data;\n\n                if(Setting.get().authWindowType === 'popup'){\n                    var authWindow = $window.open(uaa_logout_url, 'UAA-Auth-Window', \n                        Setting.get().authWindowParam);\n\n                    var deferred = $q.defer();\n                    var listener = $scope.$root.$on('$messageIncoming', function (event, data){\n                        listener();\n                        authWindow.close();\n                        deferred.resolve();\n                    });\n                    \n                    return deferred.promise;\n                }\n            },\n            start_autologin: function(credentials){\n                var data = \"code=\" + encodeURIComponent(credentials.code) +\n                    \"&client_id=\" + encodeURIComponent(credentials.clientId);\n                var uaa_login_url = credentials.url + 'autologin?' + data;\n\n                if(Setting.get().authWindowType === 'popup'){\n                    $window.open(uaa_login_url, 'UAA-Autologin-Window', \n                        Setting.get().authWindowParam);\n                }\n            },\n            start_passcode: function(credentials){\n                var uaa_passcode_url = credentials.url + 'passcode';\n\n                if(Setting.get().authWindowType === 'popup'){\n                    $window.open(uaa_passcode_url, 'UAA-Passcode-Window', \n                        Setting.get().authWindowParam);\n                }\n            },\n            start_session: function(credentials,$scope){\n                var data = \"clientId=\" + encodeURIComponent(credentials.clientId) +\n                    \"&messageOrigin=\" + encodeURIComponent(credentials.messageOrigin);\n                var uaa_url = credentials.url + '?' + data;\n\n                var msg = credentials.clientId + ' ' + credentials.userId;\n\n                var sender = null;\n\n                if(Setting.get().authWindowType === 'popup'){\n                    var authWindow = $window.open(uaa_url, 'UAA-Session-Window', \n                        Setting.get().authWindowParam);\n                    sender = $interval(function() {\n                        authWindow.postMessage(msg, uaa_url);\n                    }, 100);\n\n                    var deferred = $q.defer();\n                    var listener = $scope.$root.$on('$messageIncoming', function (event, data){\n                        $interval.cancel(sender);\n                        listener();\n                        authWindow.close();\n                        deferred.resolve(data);\n                    });\n                    return deferred.promise;\n                }\n            }\n        };\n    });\n\n/* globals $ */\n'use strict';\n\nangular.module('uaaUIApp')\n    .directive('showValidation', function() {\n        var watchInvalidAndDirty = function($scope,$inputs,$watchers,$toggle){\n            $inputs.each(function() {\n                var $input = $(this);\n                var watch = $scope.$watch(function() {\n                    return $input.hasClass('ng-invalid') ;\n                }, function(isInvalid) {\n                    $toggle.toggleClass('has-error', isInvalid);\n                });\n                $watchers.push(watch);\n            });\n        };\n\n        var warchFormInline = function(scope, element, watchers){\n            var $formInline = element.find('div.form-inline');\n            if($formInline.length > 0){\n                $formInline.each(function() {\n                    var $inline = $(this);\n                    var $inputs = $inline.find('input[ng-model],textarea[ng-model],select[ng-model]');\n                    \n                    watchInvalidAndDirty(scope,$inputs,watchers,$inline);\n                });\n                return;\n            }\n            var $inputs = element.find('input[ng-model],textarea[ng-model],select[ng-model]');\n            watchInvalidAndDirty(scope,$inputs,watchers,element);\n        };\n\n        var watchForm = function(scope, element, watchers){\n            element.find('.form-group').each(function() {\n                var $formGroup = $(this);\n                var $inputs = $formGroup.find('input[ng-model],textarea[ng-model],select[ng-model]');\n\n                if ($inputs.length > 0) {\n                    watchInvalidAndDirty(scope,$inputs,watchers,$formGroup);\n                }else{\n                    var watcherInline = {\n                        length: null,\n                        inputs: []\n                    };\n                    watchers.push(watcherInline);\n                    \n                    watcherInline.length = scope.$watch(function() {\n                        $inputs = $formGroup.find('input[ng-model],textarea[ng-model],select[ng-model]');\n                        return $inputs.length;\n                    }, function() {\n                        //remove all watcher\n                        watcherInline.inputs.forEach(function(watcher) {\n                            watcher();\n                        });\n                        watcherInline.inputs = [];\n                        //add all watcher\n                        warchFormInline(scope, $formGroup, watcherInline.inputs, $formGroup)\n                    });\n                }\n            });\n        };\n\n        return {\n            restrict: 'A',\n            require: 'form',\n            link: function (scope, element) {\n                var watchers = [];\n                if(element.find('[ui-view]').length > 0){\n                    scope.$watch(function() {\n                        var formGroups = element.find('.form-group');\n                        return formGroups.length;\n                    }, function() {\n                        //remove all watcher\n                        watchers.forEach(function(watcher) {\n                            if(angular.isFunction(watcher)){\n                                watcher();\n                            }else{\n                                watcher.length();\n                                watcher.inputs.forEach(function(watcher) {\n                                    watcher();\n                                });\n                            }\n                        });\n                        watchers = [];\n                        //add all watcher\n                        watchForm(scope, element, watchers);\n                    });\n                } else {\n                    watchForm(scope, element, watchers);\n                }\n            }\n        };\n    });\n/* globals $ */\n'use strict';\n\nangular.module('uaaUIApp')\n    .directive('passwordStrengthBar', function () {\n        return {\n            replace: true,\n            restrict: 'E',\n            template: '<div id=\"strength\">' +\n                '<small translate=\"global.messages.validate.newpassword.strength\">Password strength:</small>' +\n                '<ul id=\"strengthBar\">' +\n                '<li class=\"point\"></li><li class=\"point\"></li><li class=\"point\"></li><li class=\"point\"></li><li class=\"point\"></li>' +\n                '</ul>' +\n                '</div>',\n            link: function (scope, iElement, attr) {\n                var strength = {\n                    colors: ['#F00', '#F90', '#FF0', '#9F0', '#0F0'],\n                    mesureStrength: function (p) {\n\n                        var _force = 0;\n                        var _regex = /[$-/:-?{-~!\"^_`\\[\\]]/g; // \"\n\n                        var _lowerLetters = /[a-z]+/.test(p);\n                        var _upperLetters = /[A-Z]+/.test(p);\n                        var _numbers = /[0-9]+/.test(p);\n                        var _symbols = _regex.test(p);\n\n                        var _flags = [_lowerLetters, _upperLetters, _numbers, _symbols];\n                        var _passedMatches = $.grep(_flags, function (el) {\n                            return el === true;\n                        }).length;\n\n                        _force += 2 * p.length + ((p.length >= 10) ? 1 : 0);\n                        _force += _passedMatches * 10;\n\n                        // penality (short password)\n                        _force = (p.length <= 6) ? Math.min(_force, 10) : _force;\n\n                        // penality (poor variety of characters)\n                        _force = (_passedMatches === 1) ? Math.min(_force, 10) : _force;\n                        _force = (_passedMatches === 2) ? Math.min(_force, 20) : _force;\n                        _force = (_passedMatches === 3) ? Math.min(_force, 40) : _force;\n\n                        return _force;\n\n                    },\n                    getColor: function (s) {\n\n                        var idx = 0;\n                        if (s <= 10) {\n                            idx = 0;\n                        }\n                        else if (s <= 20) {\n                            idx = 1;\n                        }\n                        else if (s <= 30) {\n                            idx = 2;\n                        }\n                        else if (s <= 40) {\n                            idx = 3;\n                        }\n                        else {\n                            idx = 4;\n                        }\n\n                        return { idx: idx + 1, col: this.colors[idx] };\n                    }\n                };\n                scope.$watch(attr.passwordToCheck, function (password) {\n                    if (password) {\n                        var c = strength.getColor(strength.mesureStrength(password));\n                        iElement.removeClass('ng-hide');\n                        iElement.find('ul').children('li')\n                            .css({ 'background': '#DDD' })\n                            .slice(0, c.idx)\n                            .css({ 'background': c.col });\n                    }\n                });\n            }\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function (uibPagerConfig) {\n        uibPagerConfig.itemsPerPage = 20;\n        uibPagerConfig.previousText = '';\n        uibPagerConfig.nextText = '';\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function (uibPaginationConfig) {\n        uibPaginationConfig.itemsPerPage = 20;\n        uibPaginationConfig.maxSize = 5;\n        uibPaginationConfig.boundaryLinks = true;\n        uibPaginationConfig.firstText = '';\n        uibPaginationConfig.previousText = '';\n        uibPaginationConfig.nextText = '';\n        uibPaginationConfig.lastText = '';\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .directive('activeLink', function(location) {\n        return {\n            restrict: 'A',\n            link: function (scope, element, attrs) {\n                var clazz = attrs.activeLink;\n                var path = attrs.href;\n                path = path.substring(1); //hack because path does bot return including hashbang\n                scope.location = location;\n                scope.$watch('location.path()', function(newPath) {\n                    if (path === newPath) {\n                        element.addClass(clazz);\n                    } else {\n                        element.removeClass(clazz);\n                    }\n                });\n            }\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('NavbarController', function ($scope, $state, Principal, TokenHolder, ZoneHolder, ENV) {\n        $scope.$state = $state;\n        $scope.inProduction = ENV === 'prod';\n        \n        \n        $scope.isAuthenticated = Principal.isAuthenticated;\n        $scope.isClient = Principal.isClient;\n\n        $scope.isZoneMode = !ZoneHolder.isUAA();\n        \n        //revert\n        Principal.token(TokenHolder.getJwt().payload);\n\n        ZoneHolder.current().then(function(zone){\n            $scope.zone = zone;\n            Principal.zone(zone);\n            if(Principal.isSwitchingZone() &&\n                Principal.isAuthenticated()){\n                return;\n            }\n            Principal.identity(true)\n                .catch(function() {\n                    if($state.current.name !== 'auth_redirect' && \n                        $state.current.name !== 'home' && \n                        $state.current.parent !== 'home' ){\n                        $state.go('home');\n                    }\n                });\n        });\n    });\n\n'use strict';\r\n\r\nangular.module('file',[])\r\n\r\n.factory('readFile', function ($window, $q) {\r\n    var readFile = function (file) {\r\n        var deferred = $q.defer(),  \r\n            reader = new $window.FileReader();\r\n\r\n        reader.onload = function (ev) {\r\n            var content = ev.target.result;\r\n            deferred.resolve(content);\r\n        };\r\n\r\n        reader.readAsText(file);\r\n        return deferred.promise;\r\n    };\r\n\r\n    return readFile;\r\n})\r\n\r\n// does not capture input change event\r\n.directive('fileHandler', function (readFile) {\r\n    return {\r\n        link: function (scope, element) {\r\n            element.on('change', function (event) {\r\n                var file = event.target.files[0];\r\n                readFile(file).then(function (content) {\r\n                    console.log(content);\r\n                });\r\n            });\r\n        }\r\n    };\r\n})\r\n\r\n.directive('fileBrowser', function () {\r\n    return {\r\n        require: \"ngModel\",\r\n        template: '<input type=\"file\" style=\"display: none;\" />' +\r\n            '<ng-transclude></ng-transclude>',\r\n        transclude: true,\r\n        link: function (scope, element, attrs, ngModel) {\r\n            var fileInput = element.children('input');\r\n            \r\n            ngModel.$render = function() {\r\n                // element.html(ngModel.$viewValue || '');\r\n            };\r\n\r\n            fileInput.on('change', function (event) {\r\n                var file = event.target.files[0];\r\n                // scope[ngModel.ngModel] = file;\r\n                \r\n                ngModel.$setViewValue(file);\r\n                // readFile(file).then(function (content) {\r\n                //     console.log(content);\r\n                // });\r\n                // disable Event bubbling\r\n                // if(event){\r\n                //     event.stopPropagation();\r\n                // }\r\n                // scope.f\r\n            });\r\n            \r\n            element.on('click', function () {\r\n                fileInput[0].click();\r\n            });\r\n        }\r\n    };\r\n});\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('authInterceptor', function (localStorageService, Setting) {\n        return {\n            // Add authorization token to headers\n            request: function (config) {\n                if (config.url.indexOf('api') !== 0) {\n                    return config;\n                }\n\n                config.url = config.url.replace(\"api/\", Setting.get().url);\n                config.headers = config.headers || {};\n                \n                var token = localStorageService.get('token');\n                // var token = $rootScope.uaatokendetails;\n                // var expiredAt = new Date();\n                // expiredAt.setSeconds(expiredAt.getSeconds() + token.expires_in);\n                // token.expires_at = expiredAt.getTime();\n\n                if (typeof config.headers.Authorization === 'undefined' &&\n                    token && \n                    token.expires_at && \n                    token.expires_at > new Date().getTime()) {\n                    config.headers.Authorization = 'Bearer ' + token.access_token;\n                }\n                \n                return config;\n            }\n        };\n    })\n    .factory('authExpiredInterceptor', function ($rootScope, $q, $injector, localStorageService) {\n        return {\n            responseError: function (response) {\n                // token has expired\n                if (response.config.removeIfError === true &&\n                    response.status === 401 && \n                    (response.data.error == 'invalid_token' || response.data.error == 'unauthorized')) {\n                    localStorageService.remove('token');\n                    var Principal = $injector.get('Principal');\n                    if (Principal.isAuthenticated()) {\n                        Principal.authenticate(undefined);\n                    }\n                }\n                return $q.reject(response);\n            }\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('errorHandlerInterceptor', function ($q, $rootScope) {\n        return {\n            'responseError': function (response) {\n                // if (!(response.status == 401  )){\n\t                $rootScope.$emit('uaaUIApp.httpError', response);\n\t            // }\n                return $q.reject(response);\n            }\n        };\n    });\n'use strict';\n\nangular.module('uaaUIApp')\n    .factory('zoneInterceptor', function ($rootScope, $q, $location, localStorageService) {\n        return {\n            // Add X-Identity-Zone-Id and X-Identity-Zone-Subdomain to headers\n            request: function (config) {\n                if (config.url.indexOf('api') !== 0) {\n                    return config;\n                }\n                var zone = localStorageService.get(\"zone\");\n                if(zone !== null &&\n                    zone.id !== 'uaa'){\n                    config.headers['X-Identity-Zone-Id'] = zone.id;\n                    config.headers['X-Identity-Zone-Subdomain'] = zone.subdomain;\n                }\n                return config;\n            }\n        };\n    });\n    \n\n'use strict';\n\nangular.module('uaaUIApp')\n    .filter('characters', function () {\n        return function (input, chars, breakOnWord) {\n            if (isNaN(chars)) {\n                return input;\n            }\n            if (chars <= 0) {\n                return '';\n            }\n            if (input && input.length > chars) {\n                input = input.substring(0, chars);\n\n                if (!breakOnWord) {\n                    var lastspace = input.lastIndexOf(' ');\n                    // Get last space\n                    if (lastspace !== -1) {\n                        input = input.substr(0, lastspace);\n                    }\n                } else {\n                    while (input.charAt(input.length-1) === ' ') {\n                        input = input.substr(0, input.length - 1);\n                    }\n                }\n                return input + '...';\n            }\n            return input;\n        };\n    })\n    .filter('words', function () {\n        return function (input, words) {\n            if (isNaN(words)) {\n                return input;\n            }\n            if (words <= 0) {\n                return '';\n            }\n            if (input) {\n                var inputWords = input.split(/\\s+/);\n                if (inputWords.length > words) {\n                    input = inputWords.slice(0, words).join(' ') + '...';\n                }\n            }\n            return input;\n        };\n    });\n\n/*jshint bitwise: false*/\n'use strict';\n\nangular.module('uaaUIApp')\n    .service('Base64', function () {\n        var keyStr = 'ABCDEFGHIJKLMNOP' +\n            'QRSTUVWXYZabcdef' +\n            'ghijklmnopqrstuv' +\n            'wxyz0123456789+/' +\n            '=';\n        this.encode = function (input) {\n            var output = '',\n                chr1, chr2, chr3 = '',\n                enc1, enc2, enc3, enc4 = '',\n                i = 0;\n\n            while (i < input.length) {\n                chr1 = input.charCodeAt(i++);\n                chr2 = input.charCodeAt(i++);\n                chr3 = input.charCodeAt(i++);\n\n                enc1 = chr1 >> 2;\n                enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n                enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n                enc4 = chr3 & 63;\n\n                if (isNaN(chr2)) {\n                    enc3 = enc4 = 64;\n                } else if (isNaN(chr3)) {\n                    enc4 = 64;\n                }\n\n                output = output +\n                    keyStr.charAt(enc1) +\n                    keyStr.charAt(enc2) +\n                    keyStr.charAt(enc3) +\n                    keyStr.charAt(enc4);\n                chr1 = chr2 = chr3 = '';\n                enc1 = enc2 = enc3 = enc4 = '';\n            }\n\n            return output;\n        };\n\n        this.decode = function (input) {\n            var output = '',\n                chr1, chr2, chr3 = '',\n                enc1, enc2, enc3, enc4 = '',\n                i = 0;\n\n            // remove all characters that are not A-Z, a-z, 0-9, +, /, or =\n            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n            while (i < input.length) {\n                enc1 = keyStr.indexOf(input.charAt(i++));\n                enc2 = keyStr.indexOf(input.charAt(i++));\n                enc3 = keyStr.indexOf(input.charAt(i++));\n                enc4 = keyStr.indexOf(input.charAt(i++));\n\n                chr1 = (enc1 << 2) | (enc2 >> 4);\n                chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n                chr3 = ((enc3 & 3) << 6) | enc4;\n\n                output = output + String.fromCharCode(chr1);\n\n                if (enc3 !== 64) {\n                    output = output + String.fromCharCode(chr2);\n                }\n                if (enc4 !== 64) {\n                    output = output + String.fromCharCode(chr3);\n                }\n\n                chr1 = chr2 = chr3 = '';\n                enc1 = enc2 = enc3 = enc4 = '';\n            }\n            return output;\n        };\n    })\n    .factory('StorageService', function ($window) {\n        return {\n\n            get: function (key) {\n                return JSON.parse($window.localStorage.getItem(key));\n            },\n\n            save: function (key, data) {\n                $window.localStorage.setItem(key, JSON.stringify(data));\n            },\n\n            remove: function (key) {\n                $window.localStorage.removeItem(key);\n            },\n\n            clearAll : function () {\n                $window.localStorage.clear();\n            }\n        };\n    });\n\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .filter('capitalize', function () {\n        return function (input, scope) {\n            if (input != null)\n                input = input.toLowerCase();\n            return input.substring(0, 1).toUpperCase() + input.substring(1);\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .provider('AlertService', function () {\n        this.toast = false;\n\n        this.$get = ['$timeout', '$sce', function($timeout, $sce) {\n\n            var exports = {\n                factory: factory,\n                isToast: isToast,\n                add: addAlert,\n                closeAlert: closeAlert,\n                closeAlertByIndex: closeAlertByIndex,\n                clear: clear,\n                get: get,\n                success: success,\n                error: error,\n                info: info,\n                warning : warning\n            },\n            \n            toast = this.toast,\n            alertId = 0, // unique id for each alert. Starts from 0.\n            alerts = [],\n            timeout = 5000; // default timeout\n\n            function isToast() {\n                return toast;\n            }\n\n            function clear() {\n                alerts.length = 0;\n            }\n\n            function get() {\n                return alerts;\n            }\n\n            function success(msg, params, position) {\n                return this.add({\n                    type: \"success\",\n                    msg: msg,\n                    params: params,\n                    timeout: timeout,\n                    toast: toast,\n                    position: position\n                });\n            }\n\n            function error(msg, params, position) {\n                return this.add({\n                    type: \"danger\",\n                    msg: msg,\n                    params: params,\n                    timeout: timeout,\n                    toast: toast,\n                    position: position\n                });\n            }\n\n            function warning(msg, params, position) {\n                return this.add({\n                    type: \"warning\",\n                    msg: msg,\n                    params: params,\n                    timeout: timeout,\n                    toast: toast,\n                    position: position\n                });\n            }\n\n            function info(msg, params, position) {\n                return this.add({\n                    type: \"info\",\n                    msg: msg,\n                    params: params,\n                    timeout: timeout,\n                    toast: toast,\n                    position: position\n                });\n            }\n\n            function factory(alertOptions) {\n                var alert = {\n                    type: alertOptions.type,\n                    msg: $sce.trustAsHtml(alertOptions.msg),\n                    id: alertOptions.alertId,\n                    timeout: alertOptions.timeout,\n                    toast: alertOptions.toast,\n                    position: alertOptions.position ? alertOptions.position : 'top right',\n                    scoped: alertOptions.scoped,\n                    close: function (alerts) {\n                        return exports.closeAlert(this.id, alerts);\n                    }\n                };\n                if(!alert.scoped) {\n                    alerts.push(alert);\n                }\n                return alert;\n            }\n\n            function addAlert(alertOptions, extAlerts) {\n                alertOptions.alertId = alertId++;\n                var that = this;\n                var alert = this.factory(alertOptions);\n                if (alertOptions.timeout && alertOptions.timeout > 0) {\n                    $timeout(function () {\n                        that.closeAlert(alertOptions.alertId, extAlerts);\n                    }, alertOptions.timeout);\n                }\n                return alert;\n            }\n\n            function closeAlert(id, extAlerts) {\n                var thisAlerts = extAlerts ? extAlerts : alerts;\n                return this.closeAlertByIndex(thisAlerts.map(function(e) { return e.id; }).indexOf(id), thisAlerts);\n            }\n\n            function closeAlertByIndex(index, thisAlerts) {\n                return thisAlerts.splice(index, 1);\n            }\n\n            return exports;\n        }];\n\n        this.showAsToast = function(isToast) {\n            this.toast = isToast;\n        };\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .directive('jhAlert', function(AlertService) {\n        return {\n            restrict: 'E',\n            template: '<div class=\"alerts\" ng-cloak=\"\">' +\n                            '<div ng-repeat=\"alert in alerts\" ng-class=\"[alert.position, {\\'toast\\': alert.toast}]\">' +\n                                '<div uib-alert ng-cloak=\"\" ng-class=\"\\'alert-{{alert.type}}\\'\" close=\"alert.close()\">' +\n                                    // '<pre>{{ alert.msg }}</pre>' +\n                                    // '{{ alert.msg }}' + \n                                    '<pre ng-bind-html=\"alert.msg\"></pre>' + \n                                '</div>' +\n                            '</div>' +\n                      '</div>',\n            controller: ['$scope',\n                function($scope) {\n                    $scope.alerts = AlertService.get();\n                    $scope.$on('$destroy', function () {\n                        $scope.alerts = [];\n                    });\n                }\n            ]\n        };\n    })\n    .directive('jhAlertError', function(AlertService, $rootScope) {\n        return {\n            restrict: 'E',\n            template: '<div class=\"alerts\" ng-cloak=\"\">' +\n                            '<div ng-repeat=\"alert in error_alerts\" ng-class=\"[alert.position, {\\'toast\\': alert.toast}]\">' +\n                                '<div uib-alert ng-cloak=\"\" ng-class=\"\\'alert-{{alert.type}}\\'\" close=\"alert.close(error_alerts)\">' + \n                                    // '<pre>{{ alert.msg }}</pre>' + \n                                    // '{{ alert.msg }}' + \n                                    '<pre ng-bind-html=\"alert.msg\"></pre>' + \n                                '</div>' +\n                            '</div>' +\n                      '</div>',\n            controller: ['$scope',\n                function($scope) {\n\n                    $scope.error_alerts = [];\n\n                    var cleanHttpErrorListener = $rootScope.$on('uaaUIApp.httpError', function (event, httpResponse) {\n                        var i;\n                        event.stopPropagation();\n                        if (httpResponse.config.alert === false) {\n                            console.log(\"No alert for \" + httpResponse.status);\n                            return;\n                        }\n                        switch (httpResponse.status) {\n                            // connection refused, server not reachable\n                            case 0:\n                                addErrorAlert(\"Server not reachable\",'error.server.not.reachable');\n                                break;\n\n                            case 400:\n                                var errorHeader = httpResponse.headers('X-uaaUIApp-error');\n                                var entityKey = httpResponse.headers('X-uaaUIApp-params');\n                                if (errorHeader) {\n                                    var entityName = entityKey;\n                                    addErrorAlert(errorHeader, errorHeader, {entityName: entityName});\n                                } else if (httpResponse.data && httpResponse.data.fieldErrors) {\n                                    for (i = 0; i < httpResponse.data.fieldErrors.length; i++) {\n                                        var fieldError = httpResponse.data.fieldErrors[i];\n                                        // convert 'something[14].other[4].id' to 'something[].other[].id' so translations can be written to it\n                                        var convertedField = fieldError.field.replace(/\\[\\d*\\]/g, \"[]\");\n                                        var fieldName = convertedField.charAt(0).toUpperCase() + convertedField.slice(1);\n                                        addErrorAlert('Field ' + fieldName + ' cannot be empty', 'error.' + fieldError.message, {fieldName: fieldName});\n                                    }\n                                } else if (httpResponse.data && httpResponse.data.message) {\n                                    addErrorAlert(httpResponse.data.message, httpResponse.data.message, httpResponse.data);\n                                } else if (httpResponse.data && httpResponse.data.error) {\n                                    addErrorAlert(httpResponse.data.error_description, httpResponse.data.error, httpResponse.data);\n                                } else {\n                                    addErrorAlert(httpResponse.data);\n                                }\n                                break;\n\n                            default:\n                                if (httpResponse.data && httpResponse.data.message) {\n                                    addErrorAlert('<strong>' + httpResponse.status + ' Error: </strong>' + \n                                        httpResponse.data.message);\n                                } else if (httpResponse.data && httpResponse.data.error_description) {\n                                    addErrorAlert('<strong>' + httpResponse.status + ' Error: </strong>' + \n                                        httpResponse.data.error_description);\n                                } else if (httpResponse.data && httpResponse.data.error) {\n                                    addErrorAlert('<strong>' + httpResponse.status + ' Error: </strong>' + \n                                        httpResponse.data.error);\n                                } else {\n                                    addErrorAlert('<strong>' + httpResponse.status + ' Error: </strong>' + \n                                        JSON.stringify(httpResponse,null,\"  \"));\n                                }\n                        }\n                    });\n\n                    $scope.$on('$destroy', function () {\n                        if(cleanHttpErrorListener !== undefined && cleanHttpErrorListener !== null){\n                            cleanHttpErrorListener();\n                            $scope.error_alerts = [];\n                        }\n                    });\n\n                    var addErrorAlert = function (message, key, data) {\n                        $scope.error_alerts.push(\n                            AlertService.add(\n                                {\n                                    type: \"danger\",\n                                    msg: message,\n                                    timeout: 5000,\n                                    toast: AlertService.isToast(),\n                                    scoped: true\n                                },\n                                $scope.error_alerts\n                            )\n                        );\n                    };\n                }\n            ]\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .service('ParseLinks', function () {\n        this.parse = function (header) {\n            if (header.length == 0) {\n                throw new Error(\"input must not be of zero length\");\n            }\n\n            // Split parts by comma\n            var parts = header.split(',');\n            var links = {};\n            // Parse each part into a named link\n            angular.forEach(parts, function (p) {\n                var section = p.split(';');\n                if (section.length != 2) {\n                    throw new Error(\"section could not be split on ';'\");\n                }\n                var url = section[0].replace(/<(.*)>/, '$1').trim();\n                var queryString = {};\n                url.replace(\n                    new RegExp(\"([^?=&]+)(=([^&]*))?\", \"g\"),\n                    function($0, $1, $2, $3) { queryString[$1] = $3; }\n                );\n                var page = queryString.page;\n                if( angular.isString(page) ) {\n                    page = parseInt(page);\n                }\n                var name = section[1].replace(/rel=\"(.*)\"/, '$1').trim();\n                links[name] = page;\n            });\n\n            return links;\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .service('DateUtils', function ($filter) {\n      this.convertLocaleDateToServer = function(date) {\n        if (date) {\n          return $filter('date')(date, 'yyyy-MM-dd');\n        } else {\n          return null;\n        }\n      };\n      this.convertLocaleDateFromServer = function(date) {\n        if (date) {\n          var dateString = date.split(\"-\");\n          return new Date(dateString[0], dateString[1] - 1, dateString[2]);\n        }\n        return null;\n      };\n      this.convertDateTimeFromServer = function(date) {\n        if (date) {\n          return new Date(date);\n        } else {\n          return null;\n        }\n      };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .service('DataUtils', function ($filter) {\n      this.byteSize = function (base64String) {\n          if (!angular.isString(base64String)) {\n              return '';\n          }\n          function endsWith(suffix, str) {\n              return str.indexOf(suffix, str.length - suffix.length) !== -1;\n          }\n          function paddingSize(base64String) {\n              if (endsWith('==', base64String)) {\n                  return 2;\n              }\n              if (endsWith('=', base64String)) {\n                  return 1;\n              }\n              return 0;\n          }\n          function size(base64String) {\n              return base64String.length / 4 * 3 - paddingSize(base64String);\n          }\n          function formatAsBytes(size) {\n              return size.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \") + \" bytes\";\n          }\n\n          return formatAsBytes(size(base64String));\n      };\n      this.abbreviate = function (text) {\n          if (!angular.isString(text)) {\n              return '';\n          }\n          if (text.length < 30) {\n              return text;\n          }\n          return text ? (text.substring(0, 15) + '...' + text.slice(-10)) : '';\n      };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .directive('jhSort', function () {\n        return {\n            restrict: 'A',\n            scope: {\n                predicate: '=jhSort',\n                ascending: '=',\n                callback: '&'\n            },\n            controller: ['$scope', function ($scope) {\n                this.sort = function (field) {\n                    if (field !== $scope.predicate) {\n                        $scope.ascending = true;\n                    } else {\n                        $scope.ascending = !$scope.ascending;\n                    }\n                    $scope.predicate = field;\n                    $scope.$apply();\n                    $scope.callback();\n                };\n                this.applyClass = function (element) {\n                    var allThIcons = element.parent().find('span.glyphicon'),\n                    sortIcon = 'glyphicon-sort',\n                    sortAsc = 'glyphicon-sort-by-attributes',\n                    sortDesc = 'glyphicon-sort-by-attributes-alt',\n                    remove = sortIcon + ' ' + sortDesc,\n                    add = sortAsc,\n                    thisIcon = element.find('span.glyphicon');\n                    if (!$scope.ascending) {\n                        remove = sortIcon + ' ' + sortAsc;\n                        add = sortDesc;\n                    }\n                    allThIcons.removeClass(sortAsc + ' ' + sortDesc);\n                    allThIcons.addClass(sortIcon);\n                    thisIcon.removeClass(remove);\n                    thisIcon.addClass(add);\n                };\n            }]\n        };\n    }).directive('jhSortBy', function () {\n        return {\n            restrict: 'A',\n            scope: false,\n            require: '^jhSort',\n            link: function (scope, element, attrs, parentCtrl) {\n                element.bind('click', function () {\n                    parentCtrl.sort(attrs.jhSortBy);\n                    parentCtrl.applyClass(element);\n                });\n            }\n        };\n    });\n\n/*jshint bitwise: false*/\n'use strict';\n\nangular.module('uaaUIApp')\n    .service('SetUtils', function () {\n        this.addItem = function(listOrMap, item) {\n            if(angular.isUndefined(listOrMap) ||\n                listOrMap === null){\n                return;\n            }\n            if(angular.isArray(listOrMap) &&\n                angular.isArray(item)){\n                for (var i=0; i<item.length; i++){\n                    listOrMap.push(item[i]);\n                }\n            }else if(angular.isArray(listOrMap)){\n                listOrMap.push(item);\n            }else{\n                listOrMap[item.key] = item.value;\n            }\n        };\n    \n        this.deleItem = function(listOrMap, index) {\n            if(angular.isUndefined(listOrMap) ||\n                listOrMap === null){\n                return;\n            }\n            if(angular.isArray(listOrMap)){\n                listOrMap.splice(index,1);\n            }else{\n                var key = index;\n                delete listOrMap[key];\n            }\n        };\n    \n        this.hasItem = function(listOrMap, item) {\n            if(angular.isUndefined(listOrMap) ||\n                listOrMap === null){\n                return false;\n            }\n            if(angular.isArray(listOrMap)){\n                var index = listOrMap.indexOf(item);\n                return index !== -1;\n            }else{\n                return item in listOrMap;\n            }\n        };\n    \n        this.toggleItem = function(listOrMap, item) {\n            if(angular.isUndefined(listOrMap) ||\n                listOrMap === null){\n                return;\n            }\n            if(angular.isArray(listOrMap)){\n                if(this.hasItem(listOrMap,item)){\n                    var index = listOrMap.indexOf(item);\n                    listOrMap.splice(index,1);\n                    return;\n                }\n                listOrMap.push(item);\n            }else{\n                if(this.hasItem(listOrMap,item)){\n                    this.deleItem(listOrMap,item);\n                    return;\n                }\n                this.addItem(listOrMap,item);\n            }\n        };\n    });\n\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .service('GuessSearch', function (moment) {\n\n        moment.suppressDeprecationWarnings = true;\n        var configs = [];\n\n        var conversion = function(data,context){\n            for (var key in data) { \n                if(angular.isFunction(data[key])){\n                    data[key] = data[key](context);\n                }\n            }\n        };\n\n\n        this.config = function(config) {\n            configs = [];\n            if(angular.isArray(config)){\n                angular.forEach(config, function(config){\n                    configs.push(config);\n                });\n            }else{\n                configs.push(config);\n            } \n        };\n    \n        this.guess = function(search, current) {\n            var result = [];\n            angular.forEach(configs, function(config){\n                var data = null;\n                var context = search;\n                if(angular.isFunction(config.support)){\n                    if(config.support(search,current)){\n                        data = angular.copy(config.data);\n                    }\n                }else if (config.support === 'moment'){\n                    if(!!search){\n                        var date = moment(search);\n                        if(date.isValid()){\n                            data = angular.copy(config.data);\n                            context = {\n                                moment: date,\n                                text: search\n                            };\n                        }\n                    }\n                }else if (config.support === 'string'){\n                    if(angular.isString(search) &&\n                        search !== ''){\n                        data = angular.copy(config.data);\n                    }\n                }else if (config.support === 'url'){\n                    try{\n                        new URL(search);\n                        data = angular.copy(config.data);\n                    }catch(e){}\n                }else if (config.support === 'email'){\n                    if(angular.isString(search) &&\n                        search.indexOf('@') !== -1){\n                        data = angular.copy(config.data);\n                    }\n                }else if (config.support === true){\n                    data = angular.copy(config.data);\n                }\n                \n                if(data === null){\n                    return;\n                }\n\n                if(angular.isFunction(data)){\n                    data = data(context);\n                }\n                if(angular.isArray(data)){\n                    var datas = data;\n                    angular.forEach(datas, function(data){\n                        conversion(data,context);\n                        result.push(data);\n                    });\n                }else{\n                    conversion(data,context);\n                    result.push(data);\n                }                \n            });\n            \n            return result;\n        };\n\n    });\n\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('setting', {\n                parent: 'home',\n                url: '/setting',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'Setting@UaaUI'\n                },\n                onEnter: ['$stateParams', '$state', '$uibModal', function($stateParams, $state, $uibModal) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/ui/setting/setting.html',\n                        controller: 'SettingController',\n                        size: 'lg',\n                        resolve: {\n                            \n                        }\n                    }).result.then(function(result) {\n                        $state.go('home', null, { reload: true });\n                    }, function() {\n                        $state.go('home', null, { reload: true });\n                    });\n                }]\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('SettingController',\n    ['$scope', '$stateParams', '$uibModalInstance', 'Setting', 'AlertService',\n        function($scope, $stateParams, $uibModalInstance, Setting, AlertService) {\n\n        $scope.setting = Setting.get();\n        $scope.count = 5;\n        \n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            $uibModalInstance.close(result);\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        $scope.save = function () {\n            $scope.isSaving = true;\n            Setting.set($scope.setting);\n            onSaveSuccess($scope.setting);\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        $scope.goingDebug = function(){\n            AlertService.clear();\n            if($scope.count === 0){\n                $scope.setting.debug = !$scope.setting.debug;\n                Setting.set($scope.setting);\n                $scope.count = 5;\n            }else{\n                AlertService.info('<strong>UI: </strong>click ' + $scope.count + ' times to enter/exit debug mode');\n                $scope.count = $scope.count - 1;\n            }\n        };\n}]);\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('password', {\n                parent: 'home',\n                // url: '/',\n                views: {\n                    'login': {\n                        templateUrl: 'scripts/app/ui/login/password.html',\n                        controller: 'LoginPasswordController'\n                    }\n                }\n            })\n            .state('authorization_code', {\n                parent: 'home',\n                // url: '/',\n                views: {\n                    'login': {\n                        templateUrl: 'scripts/app/ui/login/authorization_code.html',\n                        controller: 'LoginAuthorizationCodeController'\n                    }\n                }\n            })\n            .state('implicit', {\n                parent: 'home',\n                // url: '/',\n                views: {\n                    'login': {\n                        templateUrl: 'scripts/app/ui/login/implicit.html',\n                        controller: 'LoginImplicitController'\n                    }\n                }\n            })\n            .state('client_credentials', {\n                parent: 'home',\n                // url: '/',\n                views: {\n                    'login': {\n                        templateUrl: 'scripts/app/ui/login/client_credentials.html',\n                        controller: 'LoginClientCredentialsController'\n                    }\n                }\n            })\n            .state('auto_login', {\n                parent: 'home',\n                // url: '/',\n                views: {\n                    'login': {\n                        templateUrl: 'scripts/app/ui/login/auto_login.html',\n                        controller: 'LoginAutoLoginController'\n                    }\n                }\n            })\n            .state('auth_redirect', {\n                parent: 'site',\n                url: '/auth_redirect?code&state&error&error_description&token_type&access_token&id_token&expires_in&scope',\n                params: {\n                    code: null,\n                    state: null,\n                    error: null,\n                    error_description: null,\n                    token_type: null,\n                    access_token: null,\n                    id_token: null,\n                    expires_in: null,\n                    scope: null\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/ui/login/redirect.html',\n                        controller: 'AuthRedirectController'\n                    }\n                }\n            })\n            .state('passcode', {\n                parent: 'home',\n                // url: '/',\n                views: {\n                    'login': {\n                        templateUrl: 'scripts/app/ui/login/passcode.html',\n                        controller: 'LoginPasscodeController'\n                    }\n                }\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('LoginPasswordController',\n    ['$scope', '$state', '$stateParams', 'Setting', 'TokenServerProvider', 'TokenHolder', 'Principal',\n        function($scope, $state, $stateParams, Setting, TokenServerProvider, TokenHolder, Principal) {\n\n        $scope.setting = Setting.get();\n        $scope.uaa = {\n            url: $scope.setting.url,\n            clientId: $scope.setting.clientId,\n            clientSecret: $scope.setting.clientSecret,\n            username: $scope.setting.username,\n            password: $scope.setting.password\n        };\n\n        $scope.login = function(){\n            TokenServerProvider.password($scope.uaa)\n                .then(function(res){\n                    TokenHolder.set(res.data);\n                    Principal.token(TokenHolder.getJwt().payload);\n                    $state.go('token');\n                })\n                .catch(function(err){\n                    $scope.error = true;\n                    $scope.errorMessage = err.error_description;\n                });\n        };\n}]);\n'use strict';\n\nangular.module('uaaUIApp').controller('LoginPasscodeController',\n    // ['$scope', '$state', '$stateParams', 'Setting', 'TokenServerProvider', 'SSOServerProvider', 'TokenHolder', 'Principal',\n        function($scope, $state, $stateParams, Setting, \n        TokenServerProvider, SSOServerProvider, TokenHolder, Principal) {\n\n        $scope.setting = Setting.get();\n        $scope.uaa = {\n            url: $scope.setting.url,\n            clientId: $scope.setting.clientId,\n            clientSecret: $scope.setting.clientSecret\n        };\n\n        $scope.goPasscode = function(){\n            SSOServerProvider.start_passcode({\n                url: Setting.get().url\n            });\n        };\n        $scope.pastePasscode = function(){\n            navigator.clipboard.readText()\n                .then(function(text){\n                    $scope.uaa.passcode = text;\n                    $scope.$apply();\n                })\n                .catch(function(err){\n                    $scope.error = true;\n                    $scope.errorMessage = 'Failed to read clipboard contents: ' + err;\n                });\n        };\n\n        $scope.login = function(){\n            TokenServerProvider.passcode($scope.uaa)\n                .then(function(res){\n                    TokenHolder.set(res.data);\n                    Principal.token(TokenHolder.getJwt().payload);\n                    Principal.uaaLogin(true);\n                    $state.go('token');\n                })\n                .catch(function(err){\n                    $scope.error = true;\n                    $scope.errorMessage = err.error_description;\n                });\n        };\n});\n'use strict';\n\nangular.module('uaaUIApp').controller('LoginAuthorizationCodeController',\n    ['$scope', '$state', '$stateParams', '$location', 'Setting', 'TokenServerProvider', 'TokenHolder', 'Principal',\n        function($scope, $state, $stateParams, $location, Setting, TokenServerProvider, TokenHolder, Principal) {\n\n        $scope.setting = Setting.get();\n        $scope.uaa = {\n            url: $scope.setting.url,\n            clientId: $scope.setting.clientId,\n            redirect_uri: $location.absUrl().replace(/#\\/.*/gi, $scope.setting.authRedirectUrl),\n            state: \"\"\n        };\n\n        $scope.login = function(){\n            $scope.uaa.auth_url = $scope.setting.url + $scope.setting.authUrlPath;\n            TokenServerProvider.start_authorization_code($scope.uaa,$scope)\n                .then(function(token){\n                    TokenHolder.set(token);\n                    Principal.token(TokenHolder.getJwt().payload);\n                    $state.go('token');\n                })\n                .catch(function(err){\n                    $scope.error = err.error;\n                    $scope.errorMessage = err.error_description;\n                });\n        };\n}]);\n'use strict';\n\nangular.module('uaaUIApp').controller('LoginImplicitController',\n    ['$scope', '$state', '$stateParams', '$location', 'Setting', 'TokenServerProvider', 'TokenHolder', 'Principal',\n        function($scope, $state, $stateParams, $location, Setting, TokenServerProvider, TokenHolder, Principal) {\n\n        $scope.setting = Setting.get();\n        $scope.uaa = {\n            url: $scope.setting.url,\n            clientId: $scope.setting.clientId,\n            redirect_uri: $location.absUrl().replace(/#\\/.*/gi, $scope.setting.authRedirectUrl),\n            state: \"\"\n        };\n\n        $scope.login = function(){\n            $scope.uaa.auth_url = $scope.setting.url + $scope.setting.authUrlPath;\n            TokenServerProvider.start_implicit($scope.uaa,$scope)\n                .then(function(token){\n                    TokenHolder.set(token);\n                    Principal.token(TokenHolder.getJwt().payload);\n                    $state.go('token');\n                })\n                .catch(function(err){\n                    $scope.error = true;\n                    $scope.errorMessage = err.error_description;\n                });\n        };\n}]);\n'use strict';\n\nangular.module('uaaUIApp').controller('LoginAutoLoginController',\n    ['$scope', '$state', '$stateParams', '$location', 'Setting', 'TokenServerProvider', 'TokenHolder', 'Principal', 'AutoLogin',\n        function($scope, $state, $stateParams, $location, Setting, TokenServerProvider, TokenHolder, Principal, AutoLogin) {\n\n        $scope.setting = Setting.get();\n        $scope.uaa = {\n            url: $scope.setting.url,\n            clientId: $scope.setting.clientId,\n            clientSecret: $scope.setting.clientSecret,\n            redirect_uri: $location.absUrl().replace(/#\\/.*/gi, $scope.setting.authRedirectUrl),\n            state: '',\n            username: $scope.setting.username,\n            password: $scope.setting.password\n        };\n\n        $scope.login = function(){\n            AutoLogin.code($scope.uaa)\n                .then(function(res){\n                    $scope.uaa.auth_url = res.data.path.replace(/^\\//gi,$scope.setting.url);\n                    $scope.uaa.code = res.data.code;\n                    // $scope.uaa.response_type = 'code,code=' + res.data.code\n                    TokenServerProvider.start_authorization_code($scope.uaa,$scope)\n                        .then(function(token){\n                            TokenHolder.set(token);\n                            Principal.token(TokenHolder.getJwt().payload);\n                            $state.go('token');\n                        })\n                        .catch(function(err){\n                            $scope.error = true;\n                            $scope.errorMessage = err.error_description;\n                        });\n                });\n        };\n}]);\n'use strict';\n\nangular.module('uaaUIApp').controller('LoginClientCredentialsController',\n    ['$scope', '$state', '$stateParams', 'Setting', 'TokenServerProvider', 'TokenHolder', 'Principal',\n        function($scope, $state, $stateParams, Setting, TokenServerProvider, TokenHolder, Principal) {\n\n        $scope.setting = Setting.get();\n        $scope.uaa = {\n            url: $scope.setting.url,\n            clientId: $scope.setting.clientId,\n            clientSecret: $scope.setting.clientSecret\n        };\n\n        $scope.login = function(){\n            TokenServerProvider.client($scope.uaa)\n                .then(function(res){\n                    TokenHolder.set(res.data);\n                    Principal.token(TokenHolder.getJwt().payload);\n                    $state.go('token');\n                })\n                .catch(function(err){\n                    $scope.error = true;\n                    $scope.errorMessage = err.error_description;\n                });\n        };\n}]);\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('AuthRedirectController', \n        function ($scope,$window,$state,$stateParams,TokenServerProvider,TokenHolder,Principal) {\n\n        $scope.error = null;\n        $scope.errorMessage = '';\n\n        TokenServerProvider.end_redirect($scope,$window,$stateParams)\n            .then(function(data){\n                TokenServerProvider.end_data(data)\n                    .then(function(token){\n                        TokenHolder.set(token);\n                        Principal.token(token);\n                        $state.go('token');\n                    })\n                    .catch(function(err){\n                        $scope.error = true;\n                        $scope.errorMessage = \"Error with data to token\" + angular.toJson(data);\n                    });\n            })\n            .catch(function(err){\n                $scope.error = err.error;\n                $scope.errorMessage = err.error_description;\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('token', {\n                parent: 'uaa',\n                url: '/token',\n                data: {\n                    authorities: [],\n                    pageTitle: 'TokenDetails@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/ui/token/token.html',\n                        controller: 'TokenController'\n                    }\n                }\n\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('TokenController', \n    function ($scope, $rootScope, $state, $location, \n        TokenServerProvider, TokenHolder, Principal, \n        SSOServerProvider, AutoLogin, Setting, AlertService) {\n\n        if(TokenHolder.get() === null) {\n            // if not token then go to homepage\n            $state.go('home');\n            return;\n        }\n\n        $scope.setting = Setting.get();\n        $scope.token = TokenHolder.getJwt().payload;\n\n        $scope.removeToken = function(){\n            TokenHolder.remove();\n            Principal.authenticate(undefined);\n            $state.go('home', null, { reload: true });\n        };\n\n        $scope.isRefresh = TokenHolder.isSupportRefresh;\n        $scope.refreshToken = function(){\n            var param = {\n                clientId: $scope.setting.clientId,\n                clientSecret: $scope.setting.clientSecret,\n                token: TokenHolder.get().refresh_token\n            };\n            TokenServerProvider.refresh(param)\n                .then(function(res){\n                    TokenHolder.set(res.data);\n                    Principal.token(TokenHolder.getJwt().payload);\n                    $scope.token = TokenHolder.getJwt().payload;\n                    AlertService.success('<strong>UI: </strong>Refresh success!');\n                })\n                .catch(function(err){\n                    $scope.error = true;\n                    $scope.errorMessage = err.error_description;\n                });\n        };\n\n        \n        $scope.isSSO = Principal.isUAALogin;\n        $scope.logoutUaa = function(){\n            var params = {\n                url: $scope.setting.url,\n                clientId: $scope.setting.clientId,\n                redirect_uri: $location.absUrl().replace(/#\\/.*/gi, $scope.setting.authRedirectUrl)\n            };\n            SSOServerProvider.start_logout(params,$scope)\n                .then(function(){\n                    Principal.uaaLogin(false);\n                    AlertService.success('<strong>UI: </strong>Logout success!');\n                });\n        };\n        $scope.sso = {\n            username: $scope.setting.username,\n            password: $scope.setting.password\n        };\n        $scope.loginUaa = function(){\n            AutoLogin.code({\n                url: $scope.setting.url,\n                clientId: $scope.setting.clientId,\n                clientSecret: $scope.setting.clientSecret,\n                username: $scope.sso.username,\n                password: $scope.sso.password\n            }).then(function(res){\n                SSOServerProvider.start_autologin({\n                    url: $scope.setting.url,\n                    code: res.data.code,\n                    clientId: $scope.setting.clientId\n                });\n                Principal.uaaLogin(true);\n                AlertService.warning('<strong>UI: </strong>Unable to get login status, default is login!');\n            }).catch(function(res){\n                AlertService.error(res.data.error_description);\n            });\n        };\n\n        $scope.checkUaaSSO = function(){\n            var setting = Setting.get();\n            //https://github.com/cloudfoundry/uaa/issues/950\n            var userId = $scope.token.user_id;\n            if(setting.sessionCheckUrl === 'session_management'){\n                var res = sjcl.hash.sha256.hash(setting.clientId +\n                    ' ' + window.location.origin +\n                    ' ' + userId +\n                    ' ' + 'ui');\n                userId = sjcl.codec.hex.fromBits(res) + \".\" + 'ui';\n            }\n\n            SSOServerProvider.start_session({\n                url: setting.url + setting.sessionCheckUrl,\n                clientId: setting.clientId,\n                messageOrigin: window.location.origin,\n                userId: userId\n            },$scope)\n            .then(function(data){\n                if(data.text === 'changed'){\n                    Principal.uaaLogin(false);\n                }else{\n                    Principal.uaaLogin(true);\n                }\n            });\n        };\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('user-info', {\n                parent: 'uaa',\n                url: '/user-info',\n                data: {\n                    authorities: [],\n                    pageTitle: 'UserInfo@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/user-info/user-info.html',\n                        controller: 'UserInfoController'\n                    }\n                }\n\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('UserInfoController', \n        function ($scope, UserInfo, UserPassword, Passcode, SSOServerProvider, AlertService, Setting) {\n\n        UserInfo.get().$promise\n            .then(function (info) {\n                $scope.userInfo = info;\n            });\n\n        $scope.password = {};\n        \n        $scope.changePassword = function(){\n            UserPassword.change({id: $scope.userInfo.user_id},$scope.password).$promise\n                .then(function(result){\n                    AlertService.success(result.message);\n                    $scope.password.oldPassword = $scope.password.password;\n                    $scope.password.password = '';\n                });\n        };\n\n        $scope.getPasscode = function(){\n            SSOServerProvider.start_passcode({\n                url: Setting.get().url\n            });\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('server-info', {\n                parent: 'uaa',\n                url: '/server-info',\n                data: {\n                    authorities: [],\n                    pageTitle: 'ServerInfo@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/server-info/server-info.html',\n                        controller: 'ServerInfoController'\n                    }\n                }\n\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('ServerInfoController', function ($scope, Info) {\n\n        Info.get().$promise\n            .then(function (info) {\n                $scope.serverInfo = info;\n            });\n            \n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('zone-management', {\n                parent: 'uaa',\n                url: '/zone-management',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'ZoneManagement@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/zone-management/zone-management.html',\n                        controller: 'ZoneManagementController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('zone-management-detail', {\n                parent: 'uaa',\n                url: '/zone/:id',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'ZoneManagementDetail@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/zone-management/zone-management-detail.html',\n                        controller: 'ZoneManagementDetailController'\n                    }\n                },\n                resolve: {\n                    entity: function(Zone, $stateParams) {\n                        return Zone.get({id : $stateParams.id});\n                    }\n                }\n            })\n            .state('zone-management.new', {\n                parent: 'zone-management',\n                url: '/new',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', function($state, $uibModal) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/zone-management/zone-management-edit.html',\n                        controller: 'ZoneManagementEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function (Zone) {\n                                return new Zone();\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('zone-management', null, { reload: true });\n                    }, function() {\n                        $state.go('zone-management');\n                    });\n                }]\n            })\n            .state('zone-management.edit', {\n                parent: 'zone-management',\n                url: '/{id}/edit',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/zone-management/zone-management-edit.html',\n                        controller: 'ZoneManagementEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function(Zone) {\n                                return Zone.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('zone-management', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n            .state('zone-management.delete', {\n                parent: 'zone-management',\n                url: '/{id}/delete',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/zone-management/zone-management-delete.html',\n                        controller: 'ZoneManagementDeleteController',\n                        size: 'md',\n                        resolve: {\n                            entity: function(Zone) {\n                                return Zone.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('zone-management', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n            .state('zone-management.change', {\n                parent: 'zone-management',\n                url: '/{id}/change',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/zone-management/zone-management-change.html',\n                        controller: 'ZoneManagementChangeController',\n                        size: 'md',\n                        resolve: {\n                            entity: function(Zone) {\n                                return Zone.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('home', null, result);\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n            .state('zone-management-detail.edit', {\n                parent: 'zone-management-detail',\n                url: '/zone/:id/edit',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/zone-management/zone-management-edit.html',\n                        controller: 'ZoneManagementEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function(Zone) {\n                                return Zone.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('zone-management-detail', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n            .state('zone-management-detail.client', {\n                parent: 'zone-management-detail',\n                url: '/zone/:id/client',\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/client-management/client-management-edit.html',\n                        controller: 'ClientManagementEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function(Client) {\n                                return new Client();\n                            },\n                            zoneId: function($stateParams) {\n                                return $stateParams.id;\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('zone-management-detail', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('ZoneManagementController', function ($scope, $state, Zone, ZoneHolder, Principal) {\n        $scope.zones = [];\n        $scope.loadAll = function () {\n            Zone.query({}, function (result) {\n                $scope.zones = result;\n            });\n        };\n\n        $scope.loadAll();\n\n        $scope.setActive = function (zone, isActivated) {\n            zone.active = isActivated;\n            Zone.update({id: zone.id}, zone, function (result) {\n                delete result.$promise;\n                delete result.$resolved;\n                angular.merge(zone,result);\n            });\n        };\n\n        $scope.canChangeZone = function (zone) {\n            return zone !== 'uaa';\n        };\n\n        $scope.clear = function () {\n            $scope.zone = {};\n            $scope.editForm.$setPristine();\n            $scope.editForm.$setUntouched();\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('ZoneManagementDetailController', \n    function ($scope, $state, $q, $filter, ZoneHolder, entity, Group, ZONE_SCOPES) {\n        $scope.zone = entity;\n\n        $scope.isZoneMode = !ZoneHolder.isUAA();\n        $scope.isAllowSwitching = function(){\n            return ZoneHolder.isUAA() && $scope.zone.id !== 'uaa';\n        };\n        $scope.exitZoneMode = function(){\n            ZoneHolder.reset();\n            $state.go('home', null, { reload: true });\n        };\n\n        $scope.ui = {\n            groups: []\n        };\n        $scope.hasGroup = function(group){\n            return !!group.has;\n        };\n        $scope.toggleGroup = function(group){\n            if(group.has){\n                Group.delete({id: group.has.id},\n                    function () {\n                        group.has = undefined;\n                    });\n            }else{\n                Group.save({\n                    displayName: group.name,\n                    description: group.description\n                }, function(result){\n                    group.has = result;\n                });\n            }\n        };\n\n        var init = function() {\n            var promise;\n            if(angular.isUndefined($scope.zone.$promise)){\n                var deferred = $q.defer();\n                deferred.resolve($scope.zone);\n                promise = deferred.promise;\n            }else{\n                promise = $scope.zone.$promise;\n            }\n            promise.then(function(zone){\n                angular.forEach(ZONE_SCOPES, function(scope){\n                    var group = {\n                        title: scope.template.replace('zones.<zone id>.',''),\n                        name: scope.template.replace('<zone id>',zone.id),\n                        description: scope.description,\n                        has: undefined\n                    };\n                    $scope.ui.groups.push(group);\n                    Group.query({filter: 'displayname eq \\'' + group.name + '\\''}, function (result) {\n                        var find = $filter('filter')(result.resources, {'displayName':scope.name}, true);\n                        if(find.length === 1){\n                            group.has = find[0];\n                        }\n                    });\n                });\n            });\n        };\n\n        init();\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('ZoneManagementEditController',\n    ['$scope', '$q', '$http', '$uibModalInstance', 'entity', 'Zone', 'MFAProvider', 'IdentityProvider', 'Base64', 'SetUtils', 'HTTP_METHIDS', 'HTTP_HEADERS',\n        function($scope, $q, $http, $uibModalInstance, entity, Zone, MFAProvider, IdentityProvider, Base64, SetUtils, HTTP_METHIDS, HTTP_HEADERS) {\n\n        $scope.zone = entity;\n\n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            $uibModalInstance.close(result);\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        var save_processors = {\n            'branding': function(){\n                if(Object.keys($scope.branding.consent).length === 0){\n                    $scope.branding.consent = null;\n                }\n                \n                $scope.branding.productLogo = $scope.imageModelToBase64($scope.branding_productLogo);\n                $scope.branding.squareLogo = $scope.imageModelToBase64($scope.branding_squareLogo);\n                $scope.branding.banner.logo = $scope.imageModelToBase64($scope.branding_banner_logo);\n            }\n        };\n        $scope.save = function () {\n            $scope.isSaving = true;\n\n            angular.forEach(save_processors,function(processor){\n                processor();\n            });\n            \n            if (angular.isDefined($scope.zone.$promise)) {\n                Zone.update({id: $scope.zone.id}, $scope.zone, onSaveSuccess, onSaveError);\n            } else {\n                Zone.save($scope.zone, onSaveSuccess, onSaveError);\n            }\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        $scope.addItem = SetUtils.addItem;\n        $scope.deleItem = SetUtils.deleItem;\n        $scope.hasItem = SetUtils.hasItem;\n        $scope.toggleItem = SetUtils.toggleItem;\n\n\n        //Token Policy\n        $scope.time_units = {\n            'S': {\n                'to': function(original){\n                    return original;\n                },\n                'from': function(value){\n                    return value;\n                }\n            },\n            'M': {\n                'to': function(original){\n                    return original / 60;\n                },\n                'from': function(value){\n                    return value * 60;\n                }\n            },\n            'H': {\n                'to': function(original){\n                    return original / 3600;\n                },\n                'from': function(value){\n                    return value * 3600;\n                }\n            },\n            'D': {\n                'to': function(original){\n                    return original / 86400;\n                },\n                'from': function(value){\n                    return value * 86400;\n                }\n            }\n        };\n        $scope.changeUnit = function(object,unit,units) {\n            var last_unit = object.last_unit;\n            var original = units[last_unit].from(object.value);\n            object.value = units[unit].to(original);\n            object.last_unit = unit;\n        };\n        $scope.assignmentUnit = function(object,units) {\n            var now_unit = object.unit;\n            var original = units[now_unit].from(object.value);\n            object.original = original;\n            if(angular.isUndefined(original)){\n                return 0;\n            }\n            return original;\n        };\n\n        \n        //CORS Policy\n        $scope.http = {\n            methods: HTTP_METHIDS,\n            headers: HTTP_HEADERS\n        };\n\n\n        //Branding\n        $scope.base64ToImageModel = function(base64,model){\n            var deferred = $q.defer();\n            if(angular.isUndefined(base64) || base64 === null){\n                deferred.reject('undefined base64 param');\n                return deferred.promise;\n            }\n            if(angular.isUndefined(model)){\n                model = {};\n            }\n\n            var content = Base64.decode(base64);\n            if(/data:.*\\/.*;base64,/g.test(content)){\n                model.format = 'dataUrl';\n                model.url = content;\n                deferred.resolve(model);\n            }else{\n                model.format = 'base64';\n                model.url = \"data:image/png;base64,\" + base64;\n                deferred.resolve(model);\n            }\n            return deferred.promise;\n        };\n        $scope.fileToImageModel = function(file,model){\n            var deferred = $q.defer();\n            if(angular.isUndefined(file)){\n                deferred.reject('undefined file');\n                return deferred.promise;\n            }\n            if(angular.isUndefined(model)){\n                model = {};\n            }\n        \n            var reader = new FileReader();\n            reader.onload = function(e){\n                $scope.$apply(function() {\n                    if(model.default){\n                        model.default = false;\n                    }\n                    model.url = e.target.result;\n                    deferred.resolve(model);\n                });\n            }; \n            reader.readAsDataURL(file);\n            return deferred.promise;\n        };\n        $scope.imageModelToBase64 = function(model){\n            if(model.default){\n                return null;\n            }else if(model.format === 'dataUrl'){\n                return Base64.encode(model.url);\n            }else if(model.format === 'base64'){\n                return model.url.replace(/data:.*\\/.*;base64,/g,\"\");\n            }else{\n                return null;\n            }\n        };\n\n        $scope.activeTab = function(num){\n            $scope.active = num;\n        };\n\n\n        //Saml\n        $scope.changeKey = function(key) {\n            $scope.samlConfig.activeKeyId = key;\n            $scope.key = $scope.samlConfig.keys[key];\n        };\n\n\n        //MFA\n        $scope.providers = {\n            mfa: null,\n            identity: null\n        };\n        MFAProvider.query({}, function (result) {\n            $scope.providers.mfa = result;\n        });\n        IdentityProvider.query({}, function (result) {\n            $scope.providers.identity = result;\n        });\n\n        \n        //Raw\n        $scope.initRawConfig = function() {\n            $scope.config = JSON.stringify($scope.zone.config,null,\"  \");\n            // if (angular.isDefined($scope.zone.$promise)) {\n            //     $scope.zone.$promise.then(function(zone){\n                    \n            //     });\n            // }else{\n            //     // $scope.config = {};\n            // }\n        };\n        $scope.configChange = function() {\n            $scope.zone.config = JSON.parse($scope.config);\n        };\n\n        \n        var init_processors = {\n            'tokenPolicy': function(){\n                $scope.tokenPolicy_accessTokenValidity = {\n                    last_unit: 'S',\n                    unit: 'S',\n                    value: $scope.tokenPolicy.accessTokenValidity,\n                    original: $scope.tokenPolicy.accessTokenValidity\n                };\n                $scope.tokenPolicy_refreshTokenValidity = {\n                    last_unit: 'S',\n                    unit: 'S',\n                    value: $scope.tokenPolicy.refreshTokenValidity,\n                    original: $scope.tokenPolicy.refreshTokenValidity\n                };\n            },\n            'clientSecretPolicy': function(){\n                \n            },\n            'corsPolicy': function(){\n                angular.merge(\n                    $scope.corsPolicy,\n                    {\n                        defaultConfiguration: {\n                            allowedHeaders: [],\n                            allowedMethods: [],\n                            allowedOriginPatterns: [],\n                            allowedOrigins: [],\n                            allowedUriPatterns: [],\n                            allowedUris: []\n                        },\n                        xhrConfiguration: {\n                            allowedHeaders: [],\n                            allowedMethods: [],\n                            allowedOriginPatterns: [],\n                            allowedOrigins: [],\n                            allowedUriPatterns: [],\n                            allowedUris: []\n                        }\n                    },\n                    $scope.corsPolicy);\n            },\n            'prompts': function(){\n                angular.merge(\n                    $scope.prompts,\n                    [\n                        {name: \"username\", type: \"text\", text: \"Email\"},\n                        {name: \"password\", type: \"password\", text: \"Password\"},\n                        {name: \"passcode\", type: \"password\", text: \"Password\"}\n                    ],\n                    $scope.prompts);\n            },\n            'links': function(){\n                angular.merge(\n                    $scope.links,\n                    {\n                        logout: { whitelist: [] },\n                        selfService: {}\n                    },\n                    $scope.links);\n            },\n            'branding': function(){\n                angular.merge(\n                    $scope.branding,\n                    {\n                        footerLinks: {},\n                        banner: {},\n                        consent: {}\n                    },\n                    $scope.branding);\n                \n                $scope.base64ToImageModel($scope.branding.productLogo)\n                    .then(function(model){\n                        $scope.branding_productLogo = model;\n                    })\n                    .catch(function(){\n                        $http({\n                            method: 'GET',\n                            url: 'assets/images/product-logo.png',\n                            responseType: \"blob\"\n                        }).then(function successCallback(response) {\n                            var reader = new FileReader();\n                            reader.readAsDataURL(response.data); \n                            reader.onloadend = function() {\n                                $scope.branding_productLogo = {\n                                    url: reader.result,\n                                    format: 'base64',\n                                    default: true\n                                };\n                            };\n                        });\n                    });\n                \n                $scope.base64ToImageModel($scope.branding.squareLogo)\n                    .then(function(model){\n                        $scope.branding_squareLogo = model;\n                    })\n                    .catch(function(){\n                        $http({\n                            method: 'GET',\n                            url: 'assets/images/square-logo.png',\n                            responseType: \"blob\"\n                        }).then(function successCallback(response) {\n                            var reader = new FileReader();\n                            reader.readAsDataURL(response.data); \n                            reader.onloadend = function() {\n                                $scope.branding_squareLogo = {\n                                    url: reader.result,\n                                    format: 'base64',\n                                    default: true\n                                };\n                            };\n                        });\n                    });\n\n                $scope.base64ToImageModel($scope.branding.banner.logo)\n                    .then(function(model){\n                        $scope.branding_banner_logo = model;\n                    })\n                    .catch(function(){\n                        $scope.branding_banner_logo = {\n                            url: '',\n                            format: 'base64',\n                            default: true\n                        };\n                    });\n            },\n            'samlConfig': function(){\n                angular.merge(\n                    $scope.samlConfig,\n                    {\n                        keys: {}\n                    },\n                    $scope.samlConfig);\n            },\n            'mfaConfig': function(){\n                angular.merge(\n                    $scope.mfaConfig,\n                    {\n                        identityProviders: []\n                    },\n                    $scope.mfaConfig);\n            },\n            'userConfig': function(){\n                angular.merge(\n                    $scope.userConfig,\n                    {\n                        defaultGroups: []\n                    },\n                    $scope.userConfig);\n            },\n            'other': function(){}\n        };\n        \n        var init = function() {\n            var promise;\n            if(angular.isUndefined($scope.zone.$promise)){\n                var deferred = $q.defer();\n                deferred.resolve($scope.zone);\n                promise = deferred.promise;\n            }else{\n                promise = $scope.zone.$promise;\n            }\n            promise.then(function(zone){\n                if(angular.isUndefined(zone.config)){\n                    zone.config = {};\n                }\n                angular.merge(\n                    zone.config,\n                    {\n                        tokenPolicy: {},\n                        clientSecretPolicy: {},\n                        corsPolicy: {},\n                        prompts: [],\n                        links: {},\n                        branding: {},\n                        samlConfig: {},\n                        mfaConfig: {},\n                        userConfig: {}\n                    },\n                    zone.config);\n                \n                angular.forEach(init_processors,function(processor,name){\n                    if(name in zone.config){\n                        $scope[name] = zone.config[name];\n                    }else{\n                        $scope[name] = zone.config;\n                    }\n\n                    if(angular.isFunction(processor)){\n                        processor();\n                    }\n                });\n                \n            });\n        };\n\n        init();\n}]);\n\n'use strict';\n\nangular.module('uaaUIApp')\n\t.controller('ZoneManagementDeleteController', function($scope, $uibModalInstance, entity, Zone) {\n\n        $scope.zone = entity;\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n        $scope.confirmDelete = function (id) {\n            Zone.delete({id: id},\n                function () {\n                    $uibModalInstance.close(true);\n                });\n        };\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n\t.controller('ZoneManagementChangeController', function($scope, $uibModalInstance, $stateParams, entity, ZoneHolder, Principal) {\n\n        $scope.zone = entity;\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        $scope.canSwitchingZone = Principal.canSwitchingZone($stateParams.id);\n        $scope.confirmChange = function (id) {\n            ZoneHolder.change(id)\n                .then(function(zone){\n                    var reload = !$scope.canSwitchingZone;\n                    $uibModalInstance.close({ reload: true });\n                });\n        };\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('client-management', {\n                parent: 'uaa',\n                url: '/client-management',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'ClientManagement@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/client-management/client-management.html',\n                        controller: 'ClientManagementController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('client-management-detail', {\n                parent: 'uaa',\n                url: '/client/:id',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'ClientManagementDetail@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/client-management/client-management-detail.html',\n                        controller: 'ClientManagementDetailController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('client-management.new', {\n                parent: 'client-management',\n                url: '/new',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', function($state, $uibModal) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/client-management/client-management-edit.html',\n                        controller: 'ClientManagementEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function (Client) {\n                                return new Client();\n                            },\n                            zoneId: null\n                        }\n                    }).result.then(function(result) {\n                        $state.go('client-management', null, { reload: true });\n                    }, function() {\n                        $state.go('client-management');\n                    });\n                }]\n            })\n            .state('client-management.edit', {\n                parent: 'client-management',\n                url: '/{id}/edit',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/client-management/client-management-edit.html',\n                        controller: 'ClientManagementEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function(Client) {\n                                return Client.get({id : $stateParams.id});\n                            },\n                            zoneId: null\n                        }\n                    }).result.then(function(result) {\n                        $state.go('client-management', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n            .state('client-management.delete', {\n                parent: 'client-management',\n                url: '/{id}/delete',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/client-management/client-management-delete.html',\n                        controller: 'ClientManagementDeleteController',\n                        size: 'md',\n                        resolve: {\n                            entity: function(Client) {\n                                return Client.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('client-management', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n            .state('client-management.meta', {\n                parent: 'client-management',\n                url: '/{id}/meta',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/client-management/client-management-meta.html',\n                        controller: 'ClientManagementMetaController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function(ClientMeta) {\n                                return ClientMeta.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('client-management', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('ClientManagementController', \n    function ($scope, $state, $filter,\n        Client, ClientMeta, \n        Group, IdentityProvider,\n        AlertService, Base64, SetUtils, Search, GRANTS, GROUPS) {\n        $scope.apps = [];\n        $scope.loadAllApp = function () {\n            return ClientMeta.query().$promise\n                .then(function(result){\n                    $scope.apps = result;\n                    angular.forEach(result, function(app){\n                        var content = Base64.decode(app.appIcon);\n                        if(/data:.*\\/.*;base64,/g.test(content)){\n                            app.appIconUrl = content;\n                        }else{\n                            app.appIconUrl = \"data:image/png;base64,\" + app.appIcon;\n                        }\n                    });\n                });\n        };\n\n        $scope.clients = [];\n        $scope.search = '';\n        $scope.pageTotal = 0;\n        $scope.pageNumber = 1;\n        $scope.pageSize = 5;\n        $scope.loadPage = function (filter,sortBy,sortOrder) {\n            var startIndex = ($scope.pageNumber - 1) * $scope.pageSize + 1;\n            Client.query({startIndex: startIndex, count: $scope.pageSize, \n                filter: filter, sortBy: sortBy, sortOrder: sortOrder}, function (result) {\n                $scope.clients = result.resources;\n                $scope.pageTotal = result.totalResults;\n            });\n        };\n\n        $scope.loadAllApp();\n        $scope.loadPage();\n\n        $scope.clear = function () {\n            $scope.client = {};\n            $scope.editForm.$setPristine();\n            $scope.editForm.$setUntouched();\n        };\n\n        \n        $scope.getScopeLabel = function(scope, autoapprove){\n            if(autoapprove === true || \n                autoapprove === 'true' ||\n                SetUtils.hasItem(autoapprove,'true')){\n                return 'label-success';\n            }\n            if(scope.indexOf('*') != -1){\n                return 'label-danger';\n            }\n            if(autoapprove.indexOf(scope) != -1){\n                return 'label-success';\n            }\n            return 'label-primary';\n        };\n        $scope.getScopeIcon = function(scope, autoapprove){\n            if(autoapprove === true || \n                autoapprove === 'true' ||\n                SetUtils.hasItem(autoapprove,'true')){\n                return 'glyphicon-ok';\n            }\n            if(scope.indexOf('*') != -1){\n                return 'glyphicon-asterisk';\n            }\n            if(autoapprove.indexOf(scope) != -1){\n                return 'glyphicon-ok';\n            }\n            return 'glyphicon-folder-close';\n        };\n        $scope.getScopeTipIndex = function(scope, autoapprove){\n            if(autoapprove === true || \n                autoapprove === 'true' ||\n                SetUtils.hasItem(autoapprove,'true')){\n                return 0;\n            }\n            if(scope.indexOf('*') != -1){\n                return 1;\n            }\n            if(autoapprove.indexOf(scope) != -1){\n                return 0;\n            }\n            return 2;\n        };\n        $scope.goGroupListOrDetail = function(displayName){\n            var wild = false;\n            var operator = 'eq';\n            if(displayName.indexOf('*') !== -1){\n                wild = true;\n                operator = 'co';\n                displayName = displayName.replace('*','');\n            }\n\n            Group.query({filter: 'displayname ' + operator + ' \\'' + displayName + '\\''}, function (result) {\n                var find = $filter('filter')(result.resources, {'displayName':displayName}, !wild);\n                if(find.length === 1){\n                    $state.go(\"group-management-detail\",{id: find[0].id});\n                }else if(find.length > 1){\n                    $state.go(\"group-management\",{search: displayName});\n                }else{\n                    AlertService.warning('<strong>UI: </strong>' + displayName + ' is not Group!',{timeout:1000000});\n                }\n            });\n        };\n        $scope.goIdentityProviderDetail = function(originKey){\n            IdentityProvider.query({}, function (result) {\n                var find = $filter('filter')(result, {'originKey':originKey}, true);\n                if(find.length === 1){\n                    $state.go(\"identity-provider-detail\",{id: find[0].id, type: find[0].type});\n                }else{\n                    AlertService.warning('<strong>UI: </strong>' + originKey + ' is not Identity Provider!');\n                }\n            });\n        };\n\n        \n        $scope.grants = {};\n        angular.forEach(GRANTS,function(grant){\n            if(grant.grant){\n                var value = grant.value ? grant.value: grant.name;\n                $scope.grants[value] = grant;\n            }\n        });\n\n        \n        $scope.selected = {\n            value: []\n        };\n        $scope.filters = Search.init(\n            $scope.loadPage,\n            $scope.selected,\n            [{\n                name: 'ID',\n                field: \"client_id\",\n                sort: true,\n                any: true\n            },{\n                name: 'Url',\n                field: \"web_server_redirect_uri\",\n                url: true,\n                any: true\n            },{\n                name: 'Scope',\n                field: \"scope\",\n                any: true,\n                enum: (function(){\n                    var groups = [];\n                    angular.forEach(GROUPS,function(group){\n                        var item = {\n                            group: 'Scope',\n                            icon: \"glyphicon-folder-close\",\n                            name: group,\n                        };\n                        item.field = \"scope\",\n                        item.operator = 'co';\n                        item.value = group;\n                        groups.push(item);\n                    });\n                    return groups;\n                })()\n            },{\n                name: 'Grant',\n                field: \"authorized_grant_types\",\n                any: true,\n                enum: (function(){\n                    var grants = [];\n                    angular.forEach(GRANTS,function(grant){\n                        if(grant.grant){\n                            var item = {\n                                group: 'Grant',\n                                icon: \"glyphicon-tag\"\n                            };\n                            angular.merge(item,grant);\n                            item.field = \"authorized_grant_types\",\n                            item.operator = 'co';\n                            item.value = grant.value ? grant.value: grant.name;\n                            grants.push(item);\n                        }\n                    });\n                    return grants;\n                })()\n            },{\n                name: 'LastModified',\n                field: \"lastModified\",\n                moment: true,\n                sort: true\n            }],\n            [{\n                support: function(text){\n                    return !!text && text.indexOf('.') !== -1;\n                },\n                data: {\n                    group: 'Scope',\n                    icon: 'glyphicon-folder-close',\n                    name: Search.usingText,\n                    field: \"scope\",\n                    operator: \"co\",\n                    value: Search.usingText\n                }\n            }]\n        );\n        $scope.tagging = Search.tagging;\n        $scope.filtering = Search.filtering;\n        $scope.pagging = Search.refreshing;\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('ClientManagementDetailController', function (\n        $scope, $state, $stateParams, \n        Client, ClientSecret, \n        TokenServerProvider, TokenHolder, Principal, AlertService) {\n        \n        if($state.current.name !== 'token-client'){\n            $state.go('token-client');\n        }\n        \n        $scope.client = {};\n        $scope.load = function (id) {\n            $scope.isMe = TokenHolder.getJwt().payload.client_id === id;\n            Client.get({id: id}, function(result) {\n                $scope.client = result;\n            });\n        };\n        $scope.load($stateParams.id);\n\n        $scope.changeSecret = function () {\n            //Only a client can change client secret\n            //So not change use manager token\n            TokenServerProvider.client({\n                clientId: $scope.client.client_id,\n                clientSecret: $scope.secret.old_secret,\n            }).then(function(response){\n                var token = response.data.access_token;\n                ClientSecret.change({id: $scope.client.client_id}, {\n                    \"clientId\" : $scope.client.client_id,\n                    \"secret\" : $scope.secret.secret,\n                    \"token\" : token\n                }, function(result) {\n                    AlertService.success(result.message);\n\n                    if($scope.isMe){\n                        TokenHolder.remove();\n                        Principal.authenticate(undefined);\n                        $state.go('home', null, { reload: true });\n                    }\n                }).$promise;\n            });\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('ClientManagementEditController',\n    ['$scope', '$q', '$uibModalInstance', 'entity', 'zoneId', 'Client', 'ZoneClient', 'IdentityProvider', 'SetUtils', 'GRANTS', 'GROUPS', 'RESOURCE_IDS',\n        function($scope, $q, $uibModalInstance, entity, zoneId, Client, ZoneClient, IdentityProvider, SetUtils, GRANTS, GROUPS, RESOURCE_IDS) {\n\n        $scope.client = entity;\n        $scope.zoneId = zoneId;\n        \n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            $uibModalInstance.close(result);\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        $scope.save = function () {\n            $scope.isSaving = true;\n            if (angular.isDefined($scope.client.$promise)) {\n                Client.update({id: $scope.client.client_id}, $scope.client, onSaveSuccess, onSaveError);\n            } else if($scope.zoneId !== null) {\n                ZoneClient.save({id: $scope.zoneId}, $scope.client, onSaveSuccess, onSaveError);\n            } else {\n                Client.save($scope.client, onSaveSuccess, onSaveError);\n            }\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        $scope.ui = {\n            grants: {},\n            groups: GROUPS,\n            resourceIds: RESOURCE_IDS\n        };\n        angular.forEach(GRANTS,function(grant){\n            if(grant.grant){\n                var value = grant.value ? grant.value: grant.name;\n                $scope.ui.grants[value] = grant;\n            }\n        });\n\n        $scope.providers = {\n            identity: null\n        };\n        \n        $scope.addItem = SetUtils.addItem;\n        $scope.deleItem = SetUtils.deleItem;\n        $scope.hasItem = SetUtils.hasItem;\n        $scope.toggleItem = SetUtils.toggleItem;\n\n        var init = function() {\n            var promise;\n            if(angular.isUndefined($scope.client.$promise)){\n                var deferred = $q.defer();\n                deferred.resolve($scope.client);\n                promise = deferred.promise;\n            }else{\n                promise = $scope.client.$promise;\n            }\n            promise.then(function(client){\n                angular.merge(\n                    client,\n                    {\n                        authorized_grant_types: [],\n                        redirect_uri: [],\n                        scope: [],\n                        resource_ids: [],\n                        authorities: [],\n                        autoapprove: angular.isUndefined($scope.client.$promise) ? ['true'] : [],\n                        allowedproviders: [],\n                        required_user_groups: []\n                    });\n            });\n\n            IdentityProvider.query({}, function (result) {\n                $scope.providers.identity = result;\n            });\n        };\n\n        init();\n        \n}]);\n\n'use strict';\n\nangular.module('uaaUIApp')\n\t.controller('ClientManagementDeleteController', function($scope, $uibModalInstance, entity, Client) {\n\n        $scope.client = entity;\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n        $scope.confirmDelete = function (id) {\n            Client.delete({id: id},\n                function () {\n                    $uibModalInstance.close(true);\n                });\n        };\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('ClientManagementMetaController',\n    ['$scope', '$stateParams', '$uibModalInstance', 'entity', 'ClientMeta', 'Base64', \n        function($scope, $stateParams, $uibModalInstance, entity, ClientMeta, Base64) {\n\n        $scope.client = entity;\n        $scope.file = null;\n        $scope.imageUrl = null;\n        $scope.imageFormat = true;\n\n        entity.$promise.then(function(client){\n            var content = Base64.decode(client.appIcon);\n            if(/data:.*\\/.*;base64,/g.test(content)){\n                $scope.imageUrl = content;\n                $scope.imageFormat = true;\n            }else{\n                $scope.imageUrl = \"data:image/png;base64,\" + client.appIcon;\n                $scope.imageFormat = false;\n            }\n        });\n\n        $scope.imageIsLoaded = function(e){\n            $scope.$apply(function() {\n                $scope.imageUrl = e.target.result;\n                if(/data:image\\/png;base64,/g.test($scope.imageUrl)){\n                    $scope.imageFormat = false;\n                }else{\n                    $scope.imageFormat = true;\n                }\n            });\n        };\n\n        $scope.flashIcon = function(){\n            var reader = new FileReader();\n            reader.onload = $scope.imageIsLoaded; \n            reader.readAsDataURL($scope.file);\n        };\n\n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            $uibModalInstance.close(result);\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        $scope.save = function () {\n            $scope.isSaving = true;\n            if($scope.imageFormat){\n                $scope.client.appIcon = Base64.encode($scope.imageUrl);\n            }else{\n                $scope.client.appIcon = $scope.imageUrl.replace(/data:.*\\/.*;base64,/g,\"\");\n            }\n            ClientMeta.update({id: $scope.client.clientId}, $scope.client, onSaveSuccess, onSaveError);\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        $scope.disable = function() {\n            $scope.isSaving = true;\n            $scope.client.appIcon = null;\n            $scope.client.appLaunchUrl = null;\n            $scope.client.showOnHomePage = false;\n            ClientMeta.update({id: $scope.client.clientId}, $scope.client, onSaveSuccess, onSaveError);\n        };\n\n}]);\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('UserManagementLocationController',\n    function($scope, $filter, $q, $uibModalInstance, entity, Group, Member, MemberType) {\n        $scope.user = entity;\n        $scope.members = [];\n        \n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        $scope.selectItem = function(node, $event) {\n            // disable Event bubbling\n            if($event){\n                $event.stopPropagation();\n            }\n\n            return reflashChildItem(node)\n                .then(function(members){\n                    if(members.length === 0){\n                        node.nochild = true;\n                    }else{\n                        delete node.nochild;\n                    }\n                    return members;\n                })\n        };\n\n        $scope.expandItem = function(node, $event) {\n            // disable Event bubbling\n            if($event){\n                $event.stopPropagation();\n            }\n\n            if(node.nochild === true){\n                return;\n            }\n            if(node.members.length > 0){\n                node.show = !node.show;\n            }else{\n                $scope.selectItem(node)\n                    .then(function(members){\n                        if(members.length > 0){\n                            node.show = !node.show;\n                        }\n                    });\n            }\n        };\n\n        $scope.toggleItem = function(node, $event){\n            // disable Event bubbling\n            if($event){\n                $event.stopPropagation();\n            }\n            if(node.type === 'DIRECT'){\n                Member.remove({gid: node.id, id: $scope.user.id}, function(result){\n                    if(isInDirect(node)){\n                        node.type = 'INDIRECT';\n                    }else{\n                        node.type = 'NONE';\n                    }\n                    reflashParentType(node);\n                });\n            }else{\n                Member.add({gid: node.id}, {\n                    origin: \"uaa\",\n                    type: \"USER\",\n                    value: $scope.user.id\n                }, function(result){\n                    node.type = 'DIRECT';\n                    reflashParentType(node);\n                });\n            }\n        };\n\n        var isInDirect = function(node){\n            var findInUser = $filter('filter')(node.members, {'type':'!NONE'}, true);\n            return findInUser.length > 0;\n        };\n\n        var reflashParentType = function(node){\n            angular.forEach(node.parents,function(parent){\n                //UnSure\n                if(parent.type === 'INDIRECT' ||\n                    parent.type === 'NONE'){\n                    if(isInDirect(parent)){\n                        parent.type = 'INDIRECT';\n                    }else{\n                        parent.type = 'NONE';\n                    }\n                    reflashParentType(parent);\n                }\n            });\n        };\n\n        var reflashChildItem = function(node) {\n            var deferred = $q.defer();\n\n            var mapping_node = function(members){\n                var group_members = [];\n                angular.forEach(members, function(member){\n                    if(member.type === 'USER'){\n                        return;\n                    }\n                    //Comparison change of members\n                    var nodeMember;\n                    var findOldMember = $filter('filter')(node.members, {'id':member.value}, true);\n                    if(findOldMember.length > 0){\n                        nodeMember = findOldMember[0];\n                    }else{\n                        nodeMember = {\n                            id: member.value,\n                            type: 'NONE',\n                            members: [],\n                            parents: [],\n                            show: false,\n                            nochild: false\n                        };\n                        node.members.push(nodeMember);\n                        nodeMember.parents.push(node);\n                    }\n                    //reflash name\n                    MemberType.getName(member)\n                        .then(function(name){\n                            nodeMember.name = name;\n                        });\n                    group_members.push(nodeMember);\n                });\n                return group_members;\n            };\n\n            Member.list({gid: node.id, returnEntities: true}).$promise\n                .then(mapping_node)\n                .then(function(members){\n                    deferred.resolve(members);\n                })\n                .catch(function(res){\n                    if(res.status === 404){\n                        //when delete zone \n                        //the switching scopes member relationship will not be deleted\n                        Member.list({gid: node.id, returnEntities: false}).$promise\n                            .then(mapping_node)\n                            .then(function(members){\n                                deferred.resolve(members);\n                            })\n                    }else{\n                        deferred.reject(res);\n                    }\n                })\n\n            return deferred.promise;\n        };\n\n        var init = function() {\n            var promise;\n            if(angular.isUndefined($scope.user.$promise)){\n                var deferred = $q.defer();\n                deferred.resolve($scope.user);\n                promise = deferred.promise;\n            }else{\n                promise = $scope.user.$promise;\n            }\n            promise.then(function(user){\n                var nodes = [];\n\n                var createNode = function(memberOrGroup){\n                    var node;\n                    if(memberOrGroup.display){\n                        var group = memberOrGroup;\n                        node = {\n                            id: group.value,\n                            name: group.display,\n                            type: group.type,\n                            members: [],\n                            parents: [],\n                            show: false,\n                            nochild: true\n                        };\n                    }else{\n                        var member = memberOrGroup;\n                        node = {\n                            id: member.value,\n                            name: '',\n                            type: 'NONE',\n                            members: [],\n                            parents: [],\n                            show: false,\n                            nochild: false\n                        };\n\n                        if(angular.isDefined(member.entity)){\n                            node.name = member.entity.displayName;\n                        }else{\n                            MemberType.getName(member)\n                                .then(function(name){\n                                    node.name = name;\n                                });\n                        }\n                    }\n                    \n                    nodes.push(node);\n                    return node;\n                };\n\n                var findNode = function(member){\n                    var findInRoot = $filter('filter')($scope.members, {'id':member.value}, true);\n                    if(findInRoot.length > 0){\n                        var index = $scope.members.indexOf(findInRoot[0]);\n                        $scope.members.splice(index, 1);\n                        return findInRoot[0];\n                    }\n\n                    var findInAll = $filter('filter')(nodes, {'id':member.value}, true);\n                    if(findInAll.length > 0){\n                        return findInAll[0];\n                    }\n\n                    return null;\n                };\n\n                var mappingNode = function(results){\n                    angular.forEach(user.groups, function(group){\n                        var node = findNode(group);\n                        if(node === null){\n                            node = createNode(group);\n                            $scope.members.push(node);\n                        }\n                        \n                        //members to child nodes\n                        var members = results.shift();\n                        angular.forEach(members, function(member){\n                            if(member.type === 'GROUP'){\n                                var node_child = findNode(member);\n                                if(node_child === null){\n                                    var findInUser = $filter('filter')(user.groups, {'value':member.value}, true);\n                                    if(findInUser.length > 0){\n                                        node_child = createNode(findInUser[0]);\n                                    }else{\n                                        node_child = createNode(member);\n                                    }\n                                }\n                                node.members.push(node_child);\n                                node_child.parents.push(node);\n                            }\n                        });\n\n                        node.nochild = node.members.length === 0;\n                        node.show = node.members.length !== 0;\n                    });\n                };\n\n                var promises = [];\n                angular.forEach(user.groups, function(group){\n                    var promise = Member.list({gid: group.value, returnEntities: true}).$promise;\n                    promises.push(promise);\n                });\n                $q.all(promises).then(mappingNode)\n                    .catch(function(){\n                        promises = [];\n                        angular.forEach(user.groups, function(group){\n                            var promise = Member.list({gid: group.value, returnEntities: false}).$promise;\n                            promises.push(promise);\n                        });\n                        $q.all(promises).then(mappingNode);\n                    });\n            });\n        };\n\n        init();\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('UserManagementInviteController',\n    ['$scope', '$stateParams', '$uibModalInstance', '$filter', 'clipboard', 'UserInvite', 'Setting',\n        function($scope, $stateParams, $uibModalInstance, $filter, clipboard, UserInvite, Setting) {\n\n       \n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            result.new_invites.concat(result.failed_invites).forEach(function(new_invite){\n                var find = $filter('filter')($scope.invites, {'email':new_invite.email}, true);\n                if(find.length === 1){\n                    var i = find[0];\n                    i = angular.merge(i, new_invite);\n                    i.done = true;\n                }\n            });\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        $scope.params = {\n            client_id: Setting.get().clientId,\n            redirect_uri: Setting.get().url\n        };\n        $scope.invites = [\n            { email: '', done: false }\n        ];\n\n        $scope.addInvite = function() {\n            $scope.invites.push({ email: '', done: false });\n        };\n\n        $scope.deleInvite = function(index) {\n            $scope.invites.splice(index,1);\n        };\n\n        $scope.save = function () {\n            $scope.isSaving = true;\n\n            var body = {\n                emails: []\n            };\n            $scope.invites.forEach(function(invite){\n                body.emails.push(invite.email);\n            });\n\n            UserInvite.invite(\n                $scope.params, \n                body,\n                onSaveSuccess, onSaveError);\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        \n        $scope.copyText = clipboard.copyText;\n}]);\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('UserManagementDetailController', \n    function ($scope, $state, $stateParams, $location, clipboard,\n        User, UserPassword, UserStatus, UserVerify, UserVerifyLink, UserMFARegistration, Password, Email,\n        TokenServerProvider, TokenHolder, Principal, Setting, AlertService) {\n         \n        if($state.current.name !== 'token-user'){\n            $state.go('token-user');\n        }\n        var setting = Setting.get();\n        \n        $scope.user = {};\n        $scope.load = function (id) {\n            Principal.identity()\n                .then(function(userInfo){\n                    $scope.isMe = (userInfo.user_id === id);\n                })\n                .catch(function(){\n                    $scope.isMe = false;\n                });\n            User.get({id: id}, function(result) {\n                $scope.user = result;\n            });\n        };\n        $scope.load($stateParams.id);\n\n\n        $scope.copyText = clipboard.copyText;\n\n        $scope.changePassword = function() {\n            //change use manager token\n            if($scope.isMe || \n                (Principal.hasScope('password.write') || Principal.hasAuthority('password'))) {\n                UserPassword.change({id: $scope.user.id}, {\n                    \"oldPassword\" : $scope.secret.old_password,\n                    \"password\" : $scope.secret.password\n                }, function(result) {\n                    AlertService.success(result.message);\n\n                    if($scope.isMe){\n                        TokenHolder.remove();\n                        Principal.authenticate(undefined);\n                        $state.go('home', null, { reload: true });\n                    }\n                }).$promise;\n                return;\n            }\n\n            TokenServerProvider.password({\n                clientId: setting.clientId,\n                clientSecret: setting.clientSecret,\n                username: $scope.user.userName,\n                password: $scope.secret.old_password\n            }).then(function(response){\n                var token = response.data.access_token;\n                UserPassword.change({id: $scope.user.id}, {\n                    \"oldPassword\" : $scope.secret.old_password,\n                    \"password\" : $scope.secret.password,\n                    \"token\" : token\n                }, function(result) {\n                    AlertService.success(result.message);\n                }).$promise;\n            });\n        };\n\n        $scope.reset = {\n            password: '',\n            code: ''\n        };\n        $scope.resetPassword = function(useCodeFlow) {\n            Password.reset({\n                client_id: setting.clientId,\n                redirect_uri: $location.absUrl().replace(/#\\/.*/gi, '')\n            },$scope.user.userName,function(result) {\n                if(useCodeFlow){\n                    Password.change({},{\n                        code: result.code,\n                        new_password: $scope.reset.password\n                    },function(result) {\n                        AlertService.success('<strong>UI: </strong>reset password success!');\n                        //TODO\n                        var r = result;\n                    });\n                }else{\n                    //use code in other system\n                    $scope.reset.code = result.code;\n                }\n            });\n        };\n\n        $scope.email = {\n            email: '',\n            code: ''\n        };\n        $scope.changeEmail = function(useCodeFlow) {\n            Email.verification({},{\n                userId: $scope.user.id,\n                email: $scope.email.email,\n                client_id: setting.clientId\n            },function(result) {\n                //TODO https://github.com/cloudfoundry/uaa/issues/951\n                AlertService.warning('<strong>UI: </strong>bug ' + \n                    '<a target=\"_blank\" href=\"https://github.com/cloudfoundry/uaa/issues/951\">issues/951</a>' +\n                    '!');\n                if(useCodeFlow){\n                    Email.change({},result.code,function(result) {\n                        AlertService.success('<strong>UI: </strong>change email success!');\n                        //TODO\n                        var r = result;\n                    });\n                }else{\n                    //use code in other system\n                    $scope.email.code = result.code;\n                }\n            });\n        };\n        \n        $scope.deleteMFA = function(){\n            UserMFARegistration.delete({id: $scope.user.id},function() {\n                AlertService.success('<strong>UI: </strong>delete mfa success!');\n            });\n        };\n\n        $scope.unlockAccount = function() {\n            UserStatus.change({id: $scope.user.id}, {\n                \"locked\" : false\n            }, function(result) {\n                AlertService.success('<strong>UI: </strong>Unlock account success!');\n            }).$promise;\n        };\n\n        $scope.expirePassword = function() {\n            UserStatus.change({id: $scope.user.id}, {\n                \"passwordChangeRequired\" : true\n            }, function(result) {\n                AlertService.success('<strong>UI: </strong>Force user password to expire success!');\n            }).$promise;\n        };\n\n\n        $scope.verify = {\n            redirect_uri: $location.absUrl().replace(/#\\/.*/gi, ''),\n            verify_link: ''\n        };\n        $scope.verifyUser = function() {\n            UserVerify.verify({id: $scope.user.id}, function(result) {\n                $scope.user = result;\n                AlertService.success('<strong>UI: </strong>Verify user success!');\n            }).$promise;\n        };\n        $scope.verifyLink = function() {\n            UserVerifyLink.verify({id: $scope.user.id,\n                redirect_uri: $scope.verify.redirect_uri\n            }, function(result) {\n                $scope.verify.verify_link = result.verify_link;\n                AlertService.success('<strong>UI: </strong>Verify link create success!');\n            }).$promise;\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('UserManagementEditController',\n    ['$scope', '$q', '$uibModalInstance', 'entity', 'User', 'IdentityProvider', 'SetUtils',\n        function($scope, $q, $uibModalInstance, entity, User, IdentityProvider, SetUtils) {\n\n        $scope.user = entity;\n\n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            $uibModalInstance.close(result);\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        $scope.save = function () {\n            $scope.isSaving = true;\n            if ($scope.user.id != null) {\n                User.update({id: $scope.user.id}, $scope.user, onSaveSuccess, onSaveError);\n            } else {\n                User.save($scope.user, onSaveSuccess, onSaveError);\n            }\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        \n        $scope.addItem = SetUtils.addItem;\n        $scope.deleItem = SetUtils.deleItem;\n        \n        $scope.providers = {\n            identity: null\n        };\n        \n        var init = function() {\n            var promise;\n            if(angular.isUndefined($scope.user.$promise)){\n                var deferred = $q.defer();\n                deferred.resolve($scope.user);\n                promise = deferred.promise;\n            }else{\n                promise = $scope.user.$promise;\n            }\n            promise.then(function(user){\n                if(angular.isUndefined(user.name)){\n                    user.name = {};\n                }\n                if(angular.isUndefined(user.phoneNumbers)){\n                    user.phoneNumbers = [];\n                }\n                if(angular.isUndefined(user.emails)){\n                    user.emails = [{ value: null, primary: true}];\n                }\n                if(angular.isUndefined(user.active)){\n                    user.active = true;\n                }\n                if(angular.isUndefined(user.verified)){\n                    user.verified = false;\n                }\n                if(angular.isUndefined(user.origin)){\n                    user.origin = 'uaa';\n                }\n                if(angular.isUndefined(user.approvals)){\n                    user.approvals = [];\n                }\n            });\n\n            IdentityProvider.query({}, function (result) {\n                $scope.providers.identity = result;\n            });\n        };\n\n        init();\n}]);\n\n'use strict';\n\nangular.module('uaaUIApp')\n\t.controller('UserManagementDeleteController', function($scope, $uibModalInstance, entity, User) {\n\n        $scope.user = entity;\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n        $scope.confirmDelete = function (id) {\n            User.delete({id: id},\n                function () {\n                    $uibModalInstance.close(true);\n                });\n        };\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('UserManagementController', \n    function ($scope, $stateParams, \n        User, Search) {\n        $scope.users = [];\n        $scope.pageTotal = 0;\n        $scope.pageNumber = 1;\n        $scope.pageSize = 5;\n        $scope.loadPage = function (filter,sortBy,sortOrder) {\n            var startIndex = ($scope.pageNumber - 1) * $scope.pageSize + 1;\n            User.query({startIndex: startIndex, count: $scope.pageSize, \n                filter: filter, sortBy: sortBy, sortOrder: sortOrder}, function (result) {\n                $scope.pageTotal = result.totalResults;\n                $scope.users = result.resources;\n            });\n        };\n\n        $scope.clear = function () {\n            $scope.user = {};\n            $scope.editForm.$setPristine();\n            $scope.editForm.$setUntouched();\n        };\n\n        $scope.setActive = function (user, isActivated) {\n            user.active = isActivated;\n            User.update({id: user.id}, user, function (result) {\n                delete result.$promise;\n                delete result.$resolved;\n                angular.merge(user,result);\n            });\n        };\n\n\n        $scope.selected = {\n            value: []\n        };\n        $scope.filters = Search.init(\n            $scope.loadPage,\n            $scope.selected,\n            [{\n                name: 'ID',\n                field: \"id\",\n                sort: true,\n                any: true\n            },{\n                name: 'Name',\n                field: \"userName\",\n                sort: true,\n                any: true\n            },{\n                name: 'GivenName',\n                field: \"givenname\",\n                sort: true,\n                any: true\n            },{\n                name: 'FamilyName',\n                field: \"familyname\",\n                sort: true,\n                any: true\n            },{\n                name: 'Email',\n                field: \"email\",\n                email: true,\n                sort: true,\n                any: true\n            },{\n                name: 'Status',\n                field: \"active\",\n                enum: [{\n                    icon: 'glyphicon-lock',\n                    name: 'Activated',\n                    tags: 'Activated',\n                    field: \"active\",\n                    operator: \"eq\",\n                    value: true\n                },{\n                    icon: 'glyphicon-lock',\n                    name: 'Desactivated',\n                    tags: 'Desactivated',\n                    field: \"active\",\n                    operator: \"eq\",\n                    value: false\n                }]\n            },{\n                name: 'Status',\n                field: \"verified\",\n                enum: [{\n                    icon: 'glyphicon-flag',\n                    name: 'Verified',\n                    tags: 'Verified',\n                    field: \"verified\",\n                    operator: \"eq\",\n                    value: true\n                },{\n                    icon: 'glyphicon-flag',\n                    name: 'Desverified',\n                    tags: 'Desverified',\n                    field: \"verified\",\n                    operator: \"eq\",\n                    value: false\n                }]\n            },{\n                name: 'PreviousLogonTime',\n                field: \"previous_logon_success_time\",\n                moment: true,\n                sort: true,\n                value: function(context){\n                    return context.moment.valueOf();\n                }\n            },{\n                name: 'LastLogonTime',\n                field: \"last_logon_success_time\",\n                moment: true,\n                sort: true,\n                value: function(context){\n                    return context.moment.valueOf();\n                }\n            },{\n                name: 'PasswordLastModified',\n                field: \"passwd_lastmodified\",\n                moment: true,\n                sort: true\n            },{\n                name: 'Created',\n                field: \"created\",\n                moment: true,\n                sort: true\n            },{\n                name: 'LastModified',\n                field: \"lastModified\",\n                moment: true,\n                sort: true\n            }],\n            [{\n                support: function(text){\n                    return !!text && text.indexOf('.') !== -1;\n                },\n                data: {\n                    group: 'Scope',\n                    icon: 'glyphicon-folder-close',\n                    name: Search.usingText,\n                    field: \"scope\",\n                    operator: \"co\",\n                    value: Search.usingText\n                }\n            }]\n        );\n        $scope.tagging = Search.tagging;\n        $scope.filtering = Search.filtering;\n        $scope.pagging = Search.refreshing;\n\n\n        Search.searching($stateParams.search);\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('user-management', {\n                parent: 'uaa',\n                url: '/user-management?search',\n                params: {\n                    search: ''\n                },\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'UserManagement@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/user-management/user-management.html',\n                        controller: 'UserManagementController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('user-management-detail', {\n                parent: 'uaa',\n                url: '/user/:id',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'UserManagementDetail@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/user-management/user-management-detail.html',\n                        controller: 'UserManagementDetailController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('user-management.location', {\n                parent: 'user-management',\n                url: '/user/:id/location',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'UserManagementDetail@UaaUI'\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/user-management/user-management-location.html',\n                        controller: 'UserManagementLocationController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function(User) {\n                                return User.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('user-management', null, { reload: true });\n                    }, function() {\n                        $state.go('user-management');\n                    });\n                }]\n            })\n            .state('user-management.new', {\n                parent: 'user-management',\n                url: '/new',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', function($state, $uibModal) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/user-management/user-management-edit.html',\n                        controller: 'UserManagementEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function (User) {\n                                return new User();\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('user-management', null, { reload: true });\n                    }, function() {\n                        $state.go('user-management');\n                    });\n                }]\n            })\n            .state('user-management.edit', {\n                parent: 'user-management',\n                url: '/{id}/edit',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/user-management/user-management-edit.html',\n                        controller: 'UserManagementEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function(User) {\n                                return User.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('user-management', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n            .state('user-management.delete', {\n                parent: 'user-management',\n                url: '/{id}/delete',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/user-management/user-management-delete.html',\n                        controller: 'UserManagementDeleteController',\n                        size: 'md',\n                        resolve: {\n                            entity: function(User) {\n                                return User.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('user-management', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n            .state('user-management.invite', {\n                parent: 'user-management',\n                url: '/invite',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', function($state, $uibModal) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/user-management/user-management-invite.html',\n                        controller: 'UserManagementInviteController',\n                        size: 'lg'\n                    }).result.then(function(result) {\n                        $state.go('user-management', null, { reload: true });\n                    }, function() {\n                        $state.go('user-management');\n                    });\n                }]\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('group-management', {\n                parent: 'uaa',\n                url: '/group-management?search',\n                params: {\n                    search: ''\n                },\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'GroupManagement@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/group-management/group-management.html',\n                        controller: 'GroupManagementController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('group-management-detail', {\n                parent: 'uaa',\n                url: '/group/:id',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'GroupManagementDetail@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/group-management/group-management-detail.html',\n                        controller: 'GroupManagementDetailController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('group-management.new', {\n                parent: 'group-management',\n                url: '/new',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', function($state, $uibModal) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/group-management/group-management-edit.html',\n                        controller: 'GroupManagementEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function (Group) {\n                                return new Group();\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('group-management', null, { reload: true });\n                    }, function() {\n                        $state.go('group-management');\n                    });\n                }]\n            })\n            .state('group-management.edit', {\n                parent: 'group-management',\n                url: '/{id}/edit',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/group-management/group-management-edit.html',\n                        controller: 'GroupManagementEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function(Group) {\n                                return Group.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('group-management', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n            .state('group-management.delete', {\n                parent: 'group-management',\n                url: '/{id}/delete',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/group-management/group-management-delete.html',\n                        controller: 'GroupManagementDeleteController',\n                        size: 'md',\n                        resolve: {\n                            entity: function(Group) {\n                                return Group.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('group-management', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('GroupManagementController', \n    function ($scope, $stateParams, \n        Group, Search) {\n        $scope.groups = [];\n        $scope.pageTotal = 0;\n        $scope.pageNumber = 1;\n        $scope.pageSize = 5;\n        $scope.loadPage = function (filter,sortBy,sortOrder) {\n            var startIndex = ($scope.pageNumber - 1) * $scope.pageSize + 1;\n            Group.query({startIndex: startIndex, count: $scope.pageSize, \n                filter: filter, sortBy: sortBy, sortOrder: sortOrder}, function (result) {\n                $scope.pageTotal = result.totalResults;\n                $scope.groups = result.resources;\n            });\n        };        \n\n        $scope.clear = function () {\n            $scope.group = {};\n            $scope.editForm.$setPristine();\n            $scope.editForm.$setUntouched();\n        };\n\n\n        $scope.selected = {\n            value: []\n        };\n        $scope.filters = Search.init(\n            $scope.loadPage,\n            $scope.selected,\n            [{\n                name: 'ID',\n                field: \"id\",\n                moment: false,\n                sort: false,\n                any: true\n            },{\n                name: 'DisplayName',\n                field: \"displayName\",\n                moment: false,\n                sort: true,\n                any: true\n            },{\n                name: 'Description',\n                field: \"description\",\n                moment: false,\n                sort: false,\n                any: true\n            },{\n                name: 'Created',\n                field: \"created\",\n                moment: true,\n                sort: true\n            },{\n                name: 'LastModified',\n                field: \"lastModified\",\n                moment: true,\n                sort: true\n            }]\n        );\n        $scope.tagging = Search.tagging;\n        $scope.filtering = Search.filtering;\n        $scope.pagging = Search.refreshing;\n\n        \n        Search.searching($stateParams.search);\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('GroupManagementDetailController', function ($scope, $stateParams, Group) {\n        $scope.group = {};\n        $scope.load = function (id) {\n            Group.get({id: id}, function(result) {\n                $scope.group = result;\n            });\n        };\n        $scope.load($stateParams.id);\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('GroupManagementEditController',\n    ['$scope', '$q', '$uibModalInstance', 'entity', 'Group', \n        function($scope, $q, $uibModalInstance, entity, Group) {\n\n        $scope.group = entity;\n        \n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            $uibModalInstance.close(result);\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        $scope.save = function () {\n            $scope.isSaving = true;\n            if ($scope.group.id != null) {\n                Group.update({id: $scope.group.id}, $scope.group, onSaveSuccess, onSaveError);\n            } else {\n                Group.save($scope.group, onSaveSuccess, onSaveError);\n            }\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        var init = function() {\n            var promise;\n            if(angular.isUndefined($scope.group.$promise)){\n                var deferred = $q.defer();\n                deferred.resolve($scope.group);\n                promise = deferred.promise;\n            }else{\n                promise = $scope.group.$promise;\n            }\n            promise.then(function(group){\n                \n            });\n        };\n\n        init();\n}]);\n\n'use strict';\n\nangular.module('uaaUIApp')\n\t.controller('GroupManagementDeleteController', function($scope, $uibModalInstance, entity, Group) {\n\n        $scope.group = entity;\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n        $scope.confirmDelete = function (id) {\n            Group.delete({id: id},\n                function () {\n                    $uibModalInstance.close(true);\n                });\n        };\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('member-management', {\n                parent: 'uaa',\n                url: '/{gid}/member-management',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'MemberManagement@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/member-management/member-management.html',\n                        controller: 'MemberManagementController'\n                    }\n                },\n                resolve: {\n                    group: function($stateParams, Group) {\n                        return Group.get({id : $stateParams.gid});\n                    }\n                }\n            })\n            .state('member-management.add', {\n                parent: 'member-management',\n                url: '/new',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', function($state, $uibModal) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/member-management/member-management-add.html',\n                        controller: 'MemberManagementAddController',\n                        size: 'lg',\n                        resolve: {\n                            paths: function () {\n                                if(angular.isUndefined($state.current.data)){\n                                    $state.go('member-management', null, { reload: true });\n                                }\n                                return $state.current.data.paths;\n                            }\n                        }\n                    }).result.then(function(result) {\n                        var reload = result.length > 0;\n                        if(reload){\n                            //reload part\n                            $state.reflash(result);\n                            reload = false;\n                        }\n                        $state.go('member-management', null, { reload: reload });\n                    }, function() {\n                        $state.go('member-management');\n                    });\n                }]\n            })\n            .state('member-management.delete', {\n                parent: 'member-management',\n                url: '/delete',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', function($state, $uibModal) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/member-management/member-management-delete.html',\n                        controller: 'MemberManagementDeleteController',\n                        size: 'md',\n                        resolve: {\n                            paths: function () {\n                                return $state.current.data.paths;\n                            }\n                        }\n                    }).result.then(function(result) {\n                        var reload = result.length > 0;\n                        if(reload){\n                            //reload part\n                            $state.reflash(result);\n                            reload = false;\n                        }\n                        $state.go('member-management', null, { reload: reload });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('MemberManagementController', function ($scope, $state, $q, $filter, group, MemberType, Group, User, Member) {\n        $scope.paths = [];\n        $scope.members = [];\n\n        group.$promise.then(function(group){\n            var root = {\n                type: 'GROUP',\n                entity: group,\n                value: group.id,\n    \n                id: group.id,\n                members: $scope.members\n            };\n            MemberType.getName(root)\n                .then(function(name){\n                    root.name = name;\n                });\n\n            $scope.selectItem(root)\n                .then(function(members){\n                    $scope.members = members;\n                });\n        });\n\n        $scope.clear = function () {\n            $scope.editForm.$setPristine();\n            $scope.editForm.$setUntouched();\n        };\n\n        $scope.selectItem = function(node, $event) {\n            // disable Event bubbling\n            if($event){\n                $event.stopPropagation();\n            }\n            if(node.type !== 'GROUP'){   \n                return;\n            }\n\n            // change paths\n            var ps = [];\n            createPath(ps,node);\n            \n            //TODO Comparison change\n            $scope.paths = ps;\n            $state.current.data.paths = $scope.paths;\n\n            return reflashChildItem(node)\n                .then(function(members){\n                    if(members.length === 0){\n                        node.nochild = true;\n                    }else{\n                        delete node.nochild;\n                        node.show = true;\n                    }\n                    return members;\n                });\n        };\n\n        $scope.expandItem = function(node, $event) {\n            // disable Event bubbling\n            if($event){\n                $event.stopPropagation();\n            }\n            if(node.members === null && !node.show){\n                reflashChildItem(node)\n                    .then(function(members){\n                        if(members.length === 0){\n                            node.nochild = true;\n                        }else{\n                            delete node.nochild;\n                            node.show = true;\n                        }\n                    });\n            }else{\n                if(node.members.length === 0){\n                    \n                }else{\n                    node.show = !node.show;\n                }\n            }\n        };\n        \n        var createPath = function(paths, member){\n            paths.unshift(member);\n            if(typeof member.father !== 'undefined'){\n                createPath(paths, member.father);\n            }\n        };\n\n        var reflashChildItem = function(node) {\n            var deferred = $q.defer();\n\n            var mapping_node = function (members) {\n                var member_nodes = [];\n                angular.forEach(members, function(member){\n                    var member_node = {\n                        id: member.value,\n                        type: member.type,\n                        name: '',\n                    };\n\n                    MemberType.getName(member)\n                        .then(function(name){\n                            member_node.name = name;\n                        });\n                    //Comparison change\n                    var old = $filter('filter')(node.members, {'id':member_node.id});\n                    if(old != null && old.length === 1 && typeof old[0] !== 'undefined'){\n                        member_node.members = old[0].members;\n                        member_node.show = old[0].show;\n                    }else{\n                        member_node.members = null;\n                        member_node.show = false;\n                    }\n                    member_node.father = node;\n                    member_nodes.push(member_node);\n                });\n                return member_nodes;\n            };\n\n            Member.list({gid: node.id, returnEntities: true}).$promise\n                .then(mapping_node)\n                .then(function(members){\n                    node.members = members;\n                    deferred.resolve(members);\n                })\n                .catch(function(res){\n                    if(res.status === 404){\n                        //when delete zone \n                        //the switching scopes member relationship will not be deleted\n                        Member.list({gid: node.id, returnEntities: false}).$promise\n                            .then(mapping_node)\n                            .then(function(members){\n                                node.members = members;\n                                deferred.resolve(members);\n                            })\n                    }else{\n                        deferred.reject(res);\n                    }\n                })\n\n            return deferred.promise;\n        };\n\n        $state.reflash = function(result){\n            var path = $scope.paths.slice(-1)[0];\n            $scope.selectItem(path)\n                .then(function(members){\n                    if($scope.paths.length === 1){\n                        $scope.members = members;\n                    }\n                });\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('MemberManagementAddController',\n    ['$scope', '$q', '$filter', '$uibModalInstance', 'paths', 'Group', 'User', 'Member', 'AlertService',\n        function($scope, $q, $filter, $uibModalInstance, paths, Group, User, Member, AlertService) {\n        \n        $scope.paths = paths;\n\n        $scope.actionItems = [];\n\n        $scope.searchUserItems = [];\n        $scope.searchGroupItems = [];\n        $scope.searchMode = {\n            user: true,\n            group: true\n        };\n        $scope.searchText = '';\n        $scope.pageTotal = 0;\n        $scope.pageSize = 10;\n        $scope.pageNumber = 1;\n\n\n        $scope.changePath = function($index, $event) {\n            // change paths\n            $scope.paths = $scope.paths.slice(0,$index+1);\n        };\n\n        $scope.addAction = function(item) {\n            var index = $scope.actionItems.indexOf(item);\n            if(index == -1){\n                $scope.actionItems.push(item);\n            }else{\n                AlertService.warning('Already added!');\n            }\n        };\n\n        $scope.removeAction = function(index) {\n            // var index = $scope.actionItems.indexOf(item);\n            $scope.actionItems.splice(index, 1);\n        };\n\n        $scope.loadPage = function (fixedPage) {\n            $scope.searchUserItems = [];\n            $scope.searchGroupItems = [];\n            var startIndex = ($scope.pageNumber - 1) * $scope.pageSize + 1;\n            var filter;\n            var promises = [];\n            if ($scope.searchMode.user) {\n                filter = \"userName co '\" + $scope.searchText + \"'\";\n                promises.push(\n                    User.query({startIndex: startIndex, count: $scope.pageSize, filter: filter})\n                        .$promise);\n            }\n            if ($scope.searchMode.group) {\n                filter = \"displayName co '\" + $scope.searchText + \"'\";\n                promises.push(\n                    Group.query({startIndex: startIndex, count: $scope.pageSize, filter: filter})\n                        .$promise);\n            }\n\n            $q.all(promises)\n                .then(function(results){\n                    var user_result = results[0];\n                    var group_result = results[1];\n                    if(!fixedPage){\n                        $scope.pageTotal = Math.max(user_result.totalResults, group_result.totalResults);\n                    }\n                    angular.forEach(user_result.resources, function(user){\n                        $scope.searchUserItems.push({\n                            name: user.userName,\n                            id: user.id,\n                            type: \"USER\"\n                        });          \n                    });\n                    angular.forEach(group_result.resources, function(group){\n                        $scope.searchGroupItems.push({\n                            name: group.displayName,\n                            id: group.id,\n                            type: \"GROUP\"\n                        });          \n                    });\n                });\n        };\n\n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            $uibModalInstance.close(result);\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        $scope.save = function () {\n            $scope.isSaving = true;\n            var path = $scope.paths.slice(-1)[0];\n            var promises = [];\n            angular.forEach($scope.actionItems, function(member){\n                promises.push(\n                    Member.add({gid: path.id}, {\n                        // TODO get by api service\n                        origin: \"uaa\",\n                        type: member.type,\n                        value: member.id\n                    }, function(result){\n                        var find = $filter('filter')($scope.actionItems, {'id':result.value});\n                        if(find.length === 1){\n                            var index = $scope.actionItems.indexOf(find[0]);\n                            $scope.actionItems.splice(index, 1);\n                        }\n                    }).$promise);\n            });\n            $q.all(promises)\n                .then(onSaveSuccess)\n                .catch(onSaveError);\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n}]);\n\n'use strict';\n\nangular.module('uaaUIApp').controller('MemberManagementDeleteController',\n    ['$scope', '$q', '$filter', '$uibModalInstance', 'paths', 'MemberType', 'Member', 'AlertService',\n        function($scope, $q, $filter, $uibModalInstance, paths, MemberType, Member, AlertService) {\n        \n        $scope.paths = paths;\n        \n        $scope.actionItems = [];\n\n        $scope.members = [];\n\n        $scope.changePath = function($index, $event) {\n            if($index+1 === $scope.paths.length){\n                return;\n            }else if($index+1 > $scope.paths.length){\n                $index = $scope.paths.length - 1;\n            }\n\n            // change paths\n            $scope.paths = $scope.paths.slice(0,$index+1);\n\n            // reflash\n            var path = $scope.paths[$index];\n\n            var deferred = $q.defer();\n            var mapping_node = function (members) {\n                var member_nodes = [];\n                angular.forEach(members, function(member){\n                    var member_node = {\n                        id: member.value,\n                        type: member.type,\n                        name: '',\n                    };\n\n                    MemberType.getName(member)\n                        .then(function(name){\n                            member_node.name = name;\n                        });\n                    member_nodes.push(member_node);\n                });\n                return member_nodes;\n            };\n\n            Member.list({gid: path.id, returnEntities: true}).$promise\n                .then(mapping_node)\n                .then(function(members){\n                    $scope.members = members;\n                    deferred.resolve(members);\n                })\n                .catch(function(res){\n                    if(res.status === 404){\n                        //when delete zone \n                        //the switching scopes member relationship will not be deleted\n                        Member.list({gid: path.id, returnEntities: false}).$promise\n                            .then(mapping_node)\n                            .then(function(members){\n                                $scope.members = members;\n                                deferred.resolve(members);\n                            })\n                    }else{\n                        deferred.reject(res);\n                    }\n                })\n\n            return deferred.promise;\n        };\n\n        $scope.addAction = function(item) {\n            var index = $scope.actionItems.indexOf(item);\n            if(index == -1){\n                $scope.actionItems.push(item);\n            }else{\n                AlertService.warning('Already added!');\n            }\n        };\n\n        $scope.removeAction = function(index) {\n            // var index = $scope.addItems.indexOf(item);\n            $scope.actionItems.splice(index, 1);\n        };\n\n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            $uibModalInstance.close(result);\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        $scope.changePath($scope.paths.length);\n\n        $scope.save = function () {\n            $scope.isSaving = true;\n            var path = $scope.paths.slice(-1)[0];\n            var promises = [];\n            angular.forEach($scope.actionItems, function(member){\n                promises.push(\n                    Member.remove({gid: path.id, id: member.id}, function(result){\n                        var find = $filter('filter')($scope.actionItems, {'id':result.value});\n                        if(find != null && find.length === 1){\n                            var index = $scope.actionItems.indexOf(find[0]);\n                            $scope.actionItems.splice(index, 1);\n                        }\n                    }).$promise);\n            });\n            $q.all(promises)\n                .then(onSaveSuccess)\n                .catch(onSaveError);\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n}]);\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('token-client', {\n                parent: 'client-management-detail',\n                params: {\n                    type: 'client'\n                },\n                data: {\n                    previous: false\n                },\n                views: {\n                    'token': {\n                        templateUrl: 'scripts/app/uaa/token-management/token-management.html',\n                        controller: 'TokenManagementController'\n                    }\n                }\n            })\n            .state('token-user', {\n                parent: 'user-management-detail',\n                params: {\n                    type: 'user'\n                },\n                data: {\n                    previous: false\n                },\n                views: {\n                    'token': {\n                        templateUrl: 'scripts/app/uaa/token-management/token-management.html',\n                        controller: 'TokenManagementController'\n                    }\n                }\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('TokenManagementController', \n    function ($scope, $stateParams, $state, $filter,\n        Token, Group,\n        TokenHolder, ZoneHolder, Principal, AlertService) {\n        \n        $scope.init = function (id,type) {\n            $scope.id = id;\n            $scope.type = type;\n            if(type === 'user'){\n                Principal.identity()\n                    .then(function(userInfo){\n                        $scope.isMe = (userInfo.user_id === id);\n                    })\n                    .catch(function(){\n                        $scope.isMe = false;\n                    });\n            }else if(type === 'client'){\n                $scope.isMe = TokenHolder.getJwt().payload.client_id === id;\n            }\n            $scope.loadToken();\n\n            ZoneHolder.current()\n                .then(function(zone){\n                    $scope.zoneId = zone.id;\n                    $scope.tokenPolicy = zone.config.tokenPolicy;\n                });\n        };\n\n        $scope.tokens = [];\n        $scope.loadToken = function () {\n            if($scope.type === 'user'){\n                Token.userList({id: $scope.id}, function (result) {\n                    $scope.tokens = result;\n                    angular.forEach(result, function(item){\n                        item.scope = item.scope.replace(/\\[|\\]/g,\"\").split(\", \");\n                    });\n                });\n            }else if($scope.type === 'client'){\n                Token.clientList({id: $scope.id}, function (result) {\n                    $scope.tokens = result;\n                    angular.forEach(result, function(item){\n                        item.scope = item.scope.replace(/\\[|\\]/g,\"\").split(\", \");\n                    });\n                });\n            }\n        };\n        $scope.revokeToken = function (id) {\n            if(!id){\n                if($scope.type === 'user'){\n                    Token.userRevoke({id: $scope.id}, function (result) {\n                        $scope.tokens = result;\n                    });\n                }else if($scope.type === 'client'){\n                    Token.clientRevoke({id: $scope.id}, function (result) {\n                        $scope.tokens = result;\n                    });\n                }\n            }else{\n                Token.revoke({id: id}, function () {\n                    AlertService.success('<strong>UI: </strong>Revoke token success!');\n\n                    // token will not expire immediately\n                    if($scope.isMe){\n                        TokenHolder.remove();\n                        Principal.authenticate(undefined);\n                        $state.go('home', null, { reload: true });\n                        return;\n                    }\n                    $scope.loadToken();\n                });\n            }\n        };\n\n        $scope.init($stateParams.id, $stateParams.type);\n\n        \n        $scope.goGroupListOrDetail = function(displayName){\n            var wild = false;\n            var operator = 'eq';\n            if(displayName.indexOf('*') !== -1){\n                wild = true;\n                operator = 'co';\n                displayName = displayName.replace('*','');\n            }\n\n            Group.query({filter: 'displayname ' + operator + ' \\'' + displayName + '\\''}, function (result) {\n                var find = $filter('filter')(result.resources, {'displayName':displayName}, !wild);\n                if(find.length === 1){\n                    $state.go(\"group-management-detail\",{id: find[0].id});\n                }else if(find.length > 1){\n                    $state.go(\"group-management\",{search: displayName});\n                }else{\n                    AlertService.warning('<strong>UI: </strong>' + displayName + ' is not Group!',{timeout:1000000});\n                }\n            });\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('identity-provider', {\n                parent: 'uaa',\n                url: '/identity-provider',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'IdentityProvider@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/identity-provider.html',\n                        controller: 'IdentityProviderController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('identity-provider-detail', {\n                parent: 'uaa',\n                url: '/identity-provider/:id/:type',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'IdentityProviderDetail@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/identity-provider-detail.html',\n                        controller: 'IdentityProviderDetailController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('identity-provider.new', {\n                parent: 'identity-provider',\n                url: '/new',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', function($state, $uibModal) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/identity-provider/identity-provider-edit.html',\n                        controller: 'IdentityProviderEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function (IdentityProvider) {\n                                return new IdentityProvider({type:'uaa'});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('identity-provider', null, { reload: true });\n                    }, function() {\n                        $state.go('identity-provider');\n                    });\n                }]\n            })\n            .state('identity-provider.edit', {\n                parent: 'identity-provider',\n                url: '/{id}/edit',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/identity-provider/identity-provider-edit.html',\n                        controller: 'IdentityProviderEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function(IdentityProvider) {\n                                return IdentityProvider.get({id: $stateParams.id, rawConfig: true});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('identity-provider', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n            .state('identity-provider.delete', {\n                parent: 'identity-provider',\n                url: '/{id}/delete',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/identity-provider/identity-provider-delete.html',\n                        controller: 'IdentityProviderDeleteController',\n                        size: 'md',\n                        resolve: {\n                            entity: function(IdentityProvider) {\n                                return IdentityProvider.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('identity-provider', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n\n\n\n\n            .state('identity-provider-detail.uaa', {\n                parent: 'identity-provider-detail',\n                views: {\n                    'config': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-uaa-detail.html'\n                    }\n                }\n            })\n            .state('identity-provider-detail.keystone', {\n                parent: 'identity-provider-detail',\n                views: {\n                    'config': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-keystone-detail.html'\n                    }\n                }\n            })\n            .state('identity-provider-detail.oidc10', {\n                parent: 'identity-provider-detail',\n                views: {\n                    'config': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-oidc-detail.html'\n                    }\n                }\n            })\n            .state('identity-provider-detail.oauth20', {\n                parent: 'identity-provider-detail',\n                views: {\n                    'config': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-oauth2-detail.html'\n                    }\n                }\n            })\n            .state('identity-provider-detail.ldap', {\n                parent: 'identity-provider-detail',\n                views: {\n                    'config': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-ldap-detail.html'\n                    }\n                }\n            })\n            .state('identity-provider-detail.saml', {\n                parent: 'identity-provider-detail',\n                views: {\n                    'config': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-saml-detail.html'\n                    }\n                }\n            })\n            \n\n            .state('identity-provider.edit.uaa', {\n                parent: 'identity-provider.edit',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-uaa-edit.html'\n                    }\n                }\n            })\n            .state('identity-provider.edit.keystone', {\n                parent: 'identity-provider.edit',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-keystone-edit.html'\n                    }\n                }\n            })\n            .state('identity-provider.edit.oidc10', {\n                parent: 'identity-provider.edit',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-oidc-edit.html'\n                    }\n                }\n            })\n            .state('identity-provider.edit.oauth20', {\n                parent: 'identity-provider.edit',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-oauth2-edit.html'\n                    }\n                }\n            })\n            .state('identity-provider.edit.ldap', {\n                parent: 'identity-provider.edit',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-ldap-edit.html'\n                    }\n                }\n            })\n            .state('identity-provider.edit.saml', {\n                parent: 'identity-provider.edit',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-saml-edit.html'\n                    }\n                }\n            })\n\n            .state('identity-provider.new.uaa', {\n                parent: 'identity-provider.new',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-uaa-edit.html'\n                    }\n                }\n            })\n            .state('identity-provider.new.keystone', {\n                parent: 'identity-provider.new',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-keystone-edit.html'\n                    }\n                }\n            })\n            .state('identity-provider.new.oidc10', {\n                parent: 'identity-provider.new',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-oidc-edit.html'\n                    }\n                }\n            })\n            .state('identity-provider.new.oauth20', {\n                parent: 'identity-provider.new',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-oauth2-edit.html'\n                    }\n                }\n            })\n            .state('identity-provider.new.ldap', {\n                parent: 'identity-provider.new',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-ldap-edit.html'\n                    }\n                }\n            })\n            .state('identity-provider.new.saml', {\n                parent: 'identity-provider.new',\n                views: {\n                    'config@': {\n                        templateUrl: 'scripts/app/uaa/identity-provider/config-saml-edit.html'\n                    }\n                }\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('IdentityProviderController', function ($scope, IdentityProvider) {\n        $scope.providers = [];\n        $scope.loadAll = function () {\n            IdentityProvider.query({}, function (result) {\n                $scope.providers = result;\n            });\n        };\n\n        $scope.loadAll();\n\n        $scope.clear = function () {\n            $scope.provider = {};\n            $scope.editForm.$setPristine();\n            $scope.editForm.$setUntouched();\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('IdentityProviderDetailController', \n    function ($scope, $state, $stateParams, IdentityProvider) {\n        \n        $scope.types = [\n            \"uaa\",\n            \"oauth2.0\",\"oidc1.0\",\n            \"keystone\",\n            \"saml\",\n            \"ldap\"\n        ];\n        $scope.isUnknowType = function(type){\n            return $scope.types.indexOf(type) === -1;\n        };\n\n        if(!$scope.isUnknowType($stateParams.type) &&\n            $state.current.name.indexOf($stateParams.type) === -1){\n            $state.go(\"identity-provider-detail.\" + $stateParams.type.replace('.',''));\n        }\n    \n        $scope.provider = {};\n        $scope.load = function (id) {\n            IdentityProvider.get({id: id, rawConfig: true}, function(result) {\n                $scope.provider = result;\n\n                if(result.type === 'saml'){\n                    //Same like https://github.com/cloudfoundry/uaa/blob/4.26.0/model/src/main/java/org/cloudfoundry/identity/uaa/provider/saml/idp/SamlServiceProviderDefinition.java#L80\n                    if(result.config.metaDataLocation.indexOf(\"<?xml\") == 0 ||\n                        result.config.metaDataLocation.indexOf(\"<md:EntityDescriptor\") == 0 ||\n                        result.config.metaDataLocation.indexOf(\"<EntityDescriptor\") == 0){\n                        $scope.ui.MetaDataFormat = 'XML';\n                    }else if(result.config.metaDataLocation.indexOf(\"http\") == 0){\n                        $scope.ui.MetaDataFormat = 'URL';\n                    }\n                }\n            });\n        };\n        $scope.load($stateParams.id);\n\n        $scope.ui = {\n            MetaDataFormat: 'URL'\n        };\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('IdentityProviderEditController',\n    ['$scope', '$q', '$http', '$uibModalInstance', '$state', 'entity', 'IdentityProvider', 'Setting', 'SetUtils',\n        function($scope, $q, $http, $uibModalInstance, $state, entity, IdentityProvider, Setting, SetUtils) {\n\n        $scope.setting = Setting.get();\n        $scope.provider = entity;\n        $scope.baseState = $state.current.name;\n\n\n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            $uibModalInstance.close(result);\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        $scope.save = function () {\n            $scope.isSaving = true;\n            if ($scope.provider.id != null) {\n                IdentityProvider.update({id: $scope.provider.id}, $scope.provider, onSaveSuccess, onSaveError);\n            } else {\n                IdentityProvider.save($scope.provider, onSaveSuccess, onSaveError);\n            }\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        $scope.types = [\n            \"uaa\",\n            \"oauth2.0\",\"oidc1.0\",\n            \"keystone\", \n            \"ldap\",\n            \"saml\",\n        ];\n        $scope.isUnknowType = function(type){\n            return $scope.types.indexOf(type) === -1;\n        };\n\n        var change_processors = {\n            'saml': function(config){\n                angular.merge(\n                    config,\n                    {\n                        emailDomain: [],\n                        externalGroupsWhitelist: [],\n                        attributeMappings: {\n                            external_groups: []\n                        },\n\n                        metaDataLocation: '',\n                        authnContext: []\n                    },\n                    config);\n\n                //Same like https://github.com/cloudfoundry/uaa/blob/4.26.0/model/src/main/java/org/cloudfoundry/identity/uaa/provider/saml/idp/SamlServiceProviderDefinition.java#L80\n                if(config.metaDataLocation.indexOf(\"<?xml\") == 0 ||\n                    config.metaDataLocation.indexOf(\"<md:EntityDescriptor\") == 0 ||\n                    config.metaDataLocation.indexOf(\"<EntityDescriptor\") == 0){\n                    $scope.ui.MetaDataFormat = 'XML';\n                }else if(config.metaDataLocation.indexOf(\"http\") == 0){\n                    $scope.ui.MetaDataFormat = 'URL';\n                }               \n            },\n            'ldap': function(config){\n                angular.merge(\n                    config,\n                    {\n                        emailDomain: [],\n                        externalGroupsWhitelist: [],\n                        attributeMappings: {\n                            external_groups: []\n                        }\n                    },\n                    config);\n            },\n            'oidc1.0': function(config){\n                angular.merge(\n                    config,\n                    {\n                        emailDomain: [],\n                        externalGroupsWhitelist: [],\n                        attributeMappings: {\n                            external_groups: []\n                        },\n\n                        scopes: [],\n                        prompts: [],\n                        showLinkText: false\n                    },\n                    config);\n            },\n            'oauth2.0': function(config){\n                angular.merge(\n                    config,\n                    {\n                        emailDomain: [],\n                        externalGroupsWhitelist: [],\n                        attributeMappings: {\n                            external_groups: []\n                        },\n\n                        scopes: [],\n                        showLinkText: false\n                    },\n                    config);\n            },\n            'uaa': function(config){\n                angular.merge(\n                    config,\n                    {\n                        emailDomain: []\n                    },\n                    config);\n            },\n            'keystone': function(config){\n                angular.merge(\n                    config,\n                    {\n                        emailDomain: [],\n                        externalGroupsWhitelist: [],\n                        attributeMappings: {\n                            external_groups: []\n                        }\n                    },\n                    config);\n            }\n        };\n        $scope.change = function(name) {\n            if(angular.isUndefined($scope.provider.type)){\n                //first active\n                $scope.active = 'none';\n                return;\n            }else if($scope.provider.type !== name){\n                $scope.provider.config = {};\n            }else if($scope.provider.config === null ||\n                angular.isUndefined($scope.provider.config)){\n                $scope.provider.config = {};\n            }\n            $scope.provider.type = name;\n\n            var processor = change_processors[name];\n            if(angular.isFunction(processor)){\n                processor($scope.provider.config);\n            }\n            \n            $state.go($scope.baseState + '.' + name.replace('.',''));\n            return;\n        };\n        \n        $scope.addItem = SetUtils.addItem;\n        $scope.deleItem = SetUtils.deleItem;\n        $scope.hasItem = SetUtils.hasItem;\n        $scope.toggleItem = SetUtils.toggleItem;\n\n\n        //SAML\n        $scope.ui = {\n            MetaDataFormat: 'URL'\n        };\n\n\n        //OIDC1\n        $scope.import = {\n            url: $scope.setting.url + '.well-known/openid-configuration'\n        };\n        $scope.importConfig = function(){\n            $http.get($scope.import.url, {}, {\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\",\n                    \"Accept\": \"application/json\"\n                }\n            })\n            .then(function(res){\n                var config = $scope.provider.config;\n                config.issuer = res.data.issuer;\n                config.authUrl = res.data.authorization_endpoint;\n                config.tokenUrl = res.data.token_endpoint;\n                config.userInfoUrl = res.data.userinfo_endpoint;\n                config.tokenKeyUrl = res.data.jwks_uri;\n                config.scopes = res.data.scopes_supported;\n            });\n        };\n\n\n        var init = function() {\n            var promise;\n            if(angular.isUndefined($scope.provider.$promise)){\n                var deferred = $q.defer();\n                deferred.resolve($scope.provider);\n                promise = deferred.promise;\n            }else{\n                promise = $scope.provider.$promise;\n            }\n            promise.then(function(provider){\n                $scope.active = provider.type;\n            });\n        };\n\n        init();\n}]);\n\n'use strict';\n\nangular.module('uaaUIApp')\n\t.controller('IdentityProviderDeleteController', function($scope, $uibModalInstance, entity, IdentityProvider) {\n\n        $scope.provider = entity;\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n        $scope.confirmDelete = function (id) {\n            IdentityProvider.delete({id: id},\n                function () {\n                    $uibModalInstance.close(true);\n                });\n        };\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('mfa-provider', {\n                parent: 'uaa',\n                url: '/mfa-provider',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'MFAProvider@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/mfa-provider/mfa-provider.html',\n                        controller: 'MFAProviderController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('mfa-provider-detail', {\n                parent: 'uaa',\n                url: '/mfa-provider/:id/:type',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'MFAProviderDetail@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/mfa-provider/mfa-provider-detail.html',\n                        controller: 'MFAProviderDetailController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('mfa-provider.new', {\n                parent: 'mfa-provider',\n                url: '/new',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', function($state, $uibModal) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/mfa-provider/mfa-provider-edit.html',\n                        controller: 'MFAProviderEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function (MFAProvider) {\n                                return new MFAProvider();\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('mfa-provider', null, { reload: true });\n                    }, function() {\n                        $state.go('mfa-provider');\n                    });\n                }]\n            })\n            .state('mfa-provider.delete', {\n                parent: 'mfa-provider',\n                url: '/{id}/delete',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/mfa-provider/mfa-provider-delete.html',\n                        controller: 'MFAProviderDeleteController',\n                        size: 'md',\n                        resolve: {\n                            entity: function(MFAProvider) {\n                                return MFAProvider.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('mfa-provider', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            });\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('MFAProviderController', function ($scope, MFAProvider) {\n        $scope.providers = [];\n        $scope.loadAll = function () {\n            MFAProvider.query({}, function (result) {\n                $scope.providers = result;\n            });\n        };\n\n        $scope.loadAll();\n\n        $scope.clear = function () {\n            $scope.provider = {};\n            $scope.editForm.$setPristine();\n            $scope.editForm.$setUntouched();\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('MFAProviderEditController',\n    ['$scope', '$q', '$uibModalInstance', 'entity', 'MFAProvider',\n        function($scope, $q, $uibModalInstance, entity, MFAProvider) {\n\n        $scope.provider = entity;\n\n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            $uibModalInstance.close(result);\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        $scope.save = function () {\n            $scope.isSaving = true;\n            if ($scope.provider.id != null) {\n                MFAProvider.update({id: $scope.provider.id}, $scope.provider, onSaveSuccess, onSaveError);\n            } else {\n                MFAProvider.save($scope.provider, onSaveSuccess, onSaveError);\n            }\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        var init = function() {\n            var promise;\n            if(angular.isUndefined($scope.provider.$promise)){\n                var deferred = $q.defer();\n                deferred.resolve($scope.provider);\n                promise = deferred.promise;\n            }else{\n                promise = $scope.provider.$promise;\n            }\n            promise.then(function(provider){\n                if(angular.isUndefined(provider.type)){\n                    provider.type = 'google-authenticator';\n                }\n            });\n        };\n\n        init();\n\n}]);\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('MFAProviderDetailController', \n    function ($scope, $state, $stateParams, $location, $filter,\n        MFAProvider, Setting) {\n        \n        $scope.provider = {};\n        $scope.load = function (id) {\n            MFAProvider.get({id: id}, function(result) {\n                $scope.provider = result;\n            });\n        };\n        $scope.load($stateParams.id);\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n\t.controller('MFAProviderDeleteController', function($scope, $uibModalInstance, entity, MFAProvider) {\n\n        $scope.provider = entity;\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n        $scope.confirmDelete = function (id) {\n            MFAProvider.delete({id: id},\n                function () {\n                    $uibModalInstance.close(true);\n                });\n        };\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('saml-service-provider', {\n                parent: 'uaa',\n                url: '/saml-service-provider',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'SAMLServiceProvider@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/saml-service-provider/saml-service-provider.html',\n                        controller: 'SAMLServiceProviderController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('saml-service-provider-detail', {\n                parent: 'uaa',\n                url: '/saml-service-provider/:id/:type',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    pageTitle: 'SAMLServiceProviderDetail@UaaUI'\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/uaa/saml-service-provider/saml-service-provider-detail.html',\n                        controller: 'SAMLServiceProviderDetailController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            })\n            .state('saml-service-provider.new', {\n                parent: 'saml-service-provider',\n                url: '/new',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', function($state, $uibModal) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/saml-service-provider/saml-service-provider-edit.html',\n                        controller: 'SAMLServiceProviderEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function (SAMLServiceProvider) {\n                                return new SAMLServiceProvider();\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('saml-service-provider', null, { reload: true });\n                    }, function() {\n                        $state.go('saml-service-provider');\n                    });\n                }]\n            })\n            .state('saml-service-provider.edit', {\n                parent: 'saml-service-provider',\n                url: '/{id}/edit',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/saml-service-provider/saml-service-provider-edit.html',\n                        controller: 'SAMLServiceProviderEditController',\n                        size: 'lg',\n                        resolve: {\n                            entity: function(SAMLServiceProvider) {\n                                return SAMLServiceProvider.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('saml-service-provider', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            })\n            .state('saml-service-provider.delete', {\n                parent: 'saml-service-provider',\n                url: '/{id}/delete',\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                },\n                onEnter: ['$state', '$uibModal', '$stateParams', function($state, $uibModal, $stateParams) {\n                    $uibModal.open({\n                        templateUrl: 'scripts/app/uaa/saml-service-provider/saml-service-provider-delete.html',\n                        controller: 'SAMLServiceProviderDeleteController',\n                        size: 'md',\n                        resolve: {\n                            entity: function(SAMLServiceProvider) {\n                                return SAMLServiceProvider.get({id : $stateParams.id});\n                            }\n                        }\n                    }).result.then(function(result) {\n                        $state.go('saml-service-provider', null, { reload: true });\n                    }, function() {\n                        $state.go('^');\n                    });\n                }]\n            });\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('SAMLServiceProviderController', function ($scope, clipboard, SAMLServiceProvider) {\n        $scope.providers = [];\n        $scope.loadAll = function () {\n            SAMLServiceProvider.query({}, function (result) {\n                $scope.providers = result;\n\n                angular.forEach(result, function(provider){\n                    provider.ui = {};\n\n                    //Same like https://github.com/cloudfoundry/uaa/blob/4.26.0/model/src/main/java/org/cloudfoundry/identity/uaa/provider/saml/idp/SamlServiceProviderDefinition.java#L80\n                    if(provider.config.metaDataLocation.indexOf(\"<?xml\") == 0 ||\n                        provider.config.metaDataLocation.indexOf(\"<md:EntityDescriptor\") == 0 ||\n                        provider.config.metaDataLocation.indexOf(\"<EntityDescriptor\") == 0){\n                        provider.ui.MetaDataFormat = 'XML';\n                    }else if(provider.config.metaDataLocation.indexOf(\"http\") == 0){\n                        provider.ui.MetaDataFormat = 'URL';\n                    }\n                });\n            });\n        };\n\n        $scope.loadAll();\n\n        $scope.clear = function () {\n            $scope.provider = {};\n            $scope.editForm.$setPristine();\n            $scope.editForm.$setUntouched();\n        };\n\n        $scope.copy = function(text){\n            clipboard.copyText(text);\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp').controller('SAMLServiceProviderEditController',\n    ['$scope', '$q', '$uibModalInstance', 'entity', 'SAMLServiceProvider',\n        function($scope, $q, $uibModalInstance, entity, SAMLServiceProvider) {\n\n        $scope.provider = entity;\n\n        var onSaveSuccess = function (result) {\n            $scope.isSaving = false;\n            $uibModalInstance.close(result);\n        };\n\n        var onSaveError = function (result) {\n            $scope.isSaving = false;\n        };\n\n        $scope.save = function () {\n            $scope.isSaving = true;\n            $scope.provider.config.staticCustomAttributes = angular.fromJson($scope.config_staticCustomAttributes);\n            if ($scope.provider.id != null) {\n                SAMLServiceProvider.update({id: $scope.provider.id}, $scope.provider, onSaveSuccess, onSaveError);\n            } else {\n                SAMLServiceProvider.save($scope.provider, onSaveSuccess, onSaveError);\n            }\n        };\n\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n        $scope.ui = {\n            MetaDataFormat: 'URL'\n        };\n        \n        var init = function() {\n            var promise;\n            if(angular.isUndefined($scope.provider.$promise)){\n                var deferred = $q.defer();\n                deferred.resolve($scope.provider);\n                promise = deferred.promise;\n            }else{\n                promise = $scope.provider.$promise;\n            }\n            promise.then(function(provider){\n                if(angular.isUndefined(provider.active)){\n                    provider.active = true;\n                }\n\n                $scope.config_staticCustomAttributes = angular.toJson(provider.config.staticCustomAttributes,true);\n            \n                //Same like https://github.com/cloudfoundry/uaa/blob/4.26.0/model/src/main/java/org/cloudfoundry/identity/uaa/provider/saml/idp/SamlServiceProviderDefinition.java#L80\n                if(provider.config.metaDataLocation.indexOf(\"<?xml\") == 0 ||\n                    provider.config.metaDataLocation.indexOf(\"<md:EntityDescriptor\") == 0 ||\n                    provider.config.metaDataLocation.indexOf(\"<EntityDescriptor\") == 0){\n                    $scope.ui.MetaDataFormat = 'XML';\n                }else if(provider.config.metaDataLocation.indexOf(\"http\") == 0){\n                    $scope.ui.MetaDataFormat = 'URL';\n                }\n            });\n        };\n\n        init();\n\n}]);\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('SAMLServiceProviderDetailController', \n    function ($scope, $state, $stateParams, $location, $filter,\n        SAMLServiceProvider, Setting) {\n        \n        $scope.provider = {};\n        $scope.load = function (id) {\n            SAMLServiceProvider.get({id: id}, function(result) {\n                $scope.provider = result;\n\n                //Same like https://github.com/cloudfoundry/uaa/blob/4.26.0/model/src/main/java/org/cloudfoundry/identity/uaa/provider/saml/idp/SamlServiceProviderDefinition.java#L80\n                if(result.config.metaDataLocation.indexOf(\"<?xml\") == 0 ||\n                    result.config.metaDataLocation.indexOf(\"<md:EntityDescriptor\") == 0 ||\n                    result.config.metaDataLocation.indexOf(\"<EntityDescriptor\") == 0){\n                    $scope.ui.MetaDataFormat = 'XML';\n                }else if(result.config.metaDataLocation.indexOf(\"http\") == 0){\n                    $scope.ui.MetaDataFormat = 'URL';\n                }\n            });\n        };\n        $scope.load($stateParams.id);\n\n        $scope.ui = {\n            MetaDataFormat: 'URL'\n        };\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n\t.controller('SAMLServiceProviderDeleteController', function($scope, $uibModalInstance, entity, SAMLServiceProvider) {\n\n        $scope.provider = entity;\n        $scope.clear = function() {\n            $uibModalInstance.dismiss('cancel');\n        };\n        $scope.confirmDelete = function (id) {\n            SAMLServiceProvider.delete({id: id},\n                function () {\n                    $uibModalInstance.close(true);\n                });\n        };\n\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('home', {\n                parent: 'site',\n                url: '/',\n                data: {\n                    authorities: []\n                },\n                views: {\n                    'content@': {\n                        templateUrl: 'scripts/app/main/main.html',\n                        controller: 'MainController'\n                    }\n                },\n                resolve: {\n                    \n                }\n            });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .controller('MainController', \n    function ($scope, $state, $sce, Setting,UAAServerProvider,Principal,ZoneHolder) {\n\n        $scope.error = null;\n        $scope.errorMessage = '';\n\n        $scope.setting = Setting.get();\n\n        if($state.current.name !== $scope.setting.loginType){\n            $state.go($scope.setting.loginType);\n        }\n\n        $scope.url_healthz = $sce.trustAsResourceUrl($scope.setting.url + 'healthz');\n        $scope.isHealthy = UAAServerProvider.isHealthy;\n        \n        \n        $scope.isAuthenticated = Principal.isAuthenticated;\n        $scope.isClient = Principal.isClient;\n\n\n        $scope.isZoneMode = !ZoneHolder.isUAA();\n\n        $scope.isSwitchingZone = Principal.isSwitchingZone;\n        $scope.exitZoneMode = function(){\n            ZoneHolder.reset();\n            $state.go('home', null, { reload: true });\n        };\n\n        \n        ZoneHolder.current().then(function(zone){\n            $scope.zone = zone;\n            if(!$scope.isSwitchingZone()){\n                UAAServerProvider.info(true);\n            }\n        });\n        Principal.userName().then(function(userName){\n            $scope.userName = userName;\n        });\n    });\n\n'use strict';\n\nangular.module('uaaUIApp')\n    .config(function ($stateProvider) {\n        $stateProvider\n            .state('uaa', {\n                abstract: true,\n                parent: 'site'\n            });\n    });\n"]}